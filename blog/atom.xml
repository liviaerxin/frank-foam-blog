<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://liviaerxin.github.io/blog</id>
    <title>S' Wiki Blog</title>
    <updated>2023-12-21T10:15:12.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://liviaerxin.github.io/blog"/>
    <subtitle>S' Wiki Blog</subtitle>
    <icon>https://liviaerxin.github.io/https://github.com/liviaerxin.png</icon>
    <entry>
        <title type="html"><![CDATA[CIL(Common Intermediate Language)]]></title>
        <id>https://liviaerxin.github.io/blog/common-intermediate-language</id>
        <link href="https://liviaerxin.github.io/blog/common-intermediate-language"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <summary type="html"><![CDATA[Verifying your own .NET IL-Code]]></summary>
        <content type="html"><![CDATA[<p><a href="https://www.dynatrace.com/news/blog/verifying-your-own-dotnet-il-code/" target="_blank" rel="noopener noreferrer">Verifying your own .NET IL-Code</a></p><p><a href="https://stackoverflow.com/questions/39979851/net-core-equivalent-of-ildasm-ilasm" target="_blank" rel="noopener noreferrer">linux - .net-core: Equivalent of ILDASM / ILASM - Stack Overflow</a></p><p><a href="https://www.geeksforgeeks.org/what-is-just-in-time-jit-compiler-in-dot-net/" target="_blank" rel="noopener noreferrer">What is Just-In-Time(JIT) Compiler in .NET - GeeksforGeeks</a></p><p><a href="https://github.com/Konard/ILProj" target="_blank" rel="noopener noreferrer">GitHub - Konard/ILProj: The example class library project, with code written in the CIL.</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-is-cilil">What is CIl/IL<a href="#what-is-cilil" class="hash-link" aria-label="Direct link to What is CIl/IL" title="Direct link to What is CIl/IL">​</a></h2><p>For C# or Java, the program is not directly compiled to machine code, but <strong>intermediate language</strong> code. For C#, the <code>intermediate</code> code is called Common Intermediate Language(CIL, or IL). So whether the <code>*.dll</code> or <code>*.exe</code> compiled from C#, is composed of IL code and its corresponding meta data. At runtime, the JIT(Just-In-Compiler) compile the IL code to the native machine code.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-is-jit">What is JIT<a href="#what-is-jit" class="hash-link" aria-label="Direct link to What is JIT" title="Direct link to What is JIT">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./ilasm ~/Documents/peggy-foam-wiki/docs/IL/test/test.il </span><span class="token parameter variable" style="color:#36acaa">-dll</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./ildasm ~/Documents/peggy-foam-wiki/docs/IL/test/test.dll </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dotnet myapp.dll</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Data Center]]></title>
        <id>https://liviaerxin.github.io/blog/data-center</id>
        <link href="https://liviaerxin.github.io/blog/data-center"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <summary type="html"><![CDATA[Economic Data]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="economic-data">Economic Data<a href="#economic-data" class="hash-link" aria-label="Direct link to Economic Data" title="Direct link to Economic Data">​</a></h2><p><a href="https://fred.stlouisfed.org/" target="_blank" rel="noopener noreferrer">FRED ECONOMIC DATA</a></p><p><a href="https://tradingeconomics.com/united-states/inflation-cpi" target="_blank" rel="noopener noreferrer">US inflation cpi</a></p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Tools]]></title>
        <id>https://liviaerxin.github.io/blog/diagram-tools</id>
        <link href="https://liviaerxin.github.io/blog/diagram-tools"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <summary type="html"><![CDATA[Generic Tools]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="generic-tools">Generic Tools<a href="#generic-tools" class="hash-link" aria-label="Direct link to Generic Tools" title="Direct link to Generic Tools">​</a></h2><p><a href="https://github.com/jgraph/drawio" target="_blank" rel="noopener noreferrer">drawio: draw.io is a JavaScript, client-side editor for general diagramming and whiteboarding</a></p><p><a href="https://www.lucidchart.com" target="_blank" rel="noopener noreferrer">Intelligent Diagramming | Lucidchart</a></p><p><a href="https://miro.com" target="_blank" rel="noopener noreferrer">The Visual Collaboration Platform for Every Team | Miro</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="code-as-diagram-tools">Code as Diagram Tools<a href="#code-as-diagram-tools" class="hash-link" aria-label="Direct link to Code as Diagram Tools" title="Direct link to Code as Diagram Tools">​</a></h2><p><a href="https://github.com/mermaid-js/mermaid" target="_blank" rel="noopener noreferrer">GitHub - mermaid-js/mermaid: Generation of diagrams like flowcharts or sequence diagrams from text in a similar manner as markdown</a></p><p><a href="https://github.com/plantuml/plantuml" target="_blank" rel="noopener noreferrer">GitHub - plantuml/plantuml: Generate diagrams from textual description</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="erd-diagram-tools">ERD Diagram Tools<a href="#erd-diagram-tools" class="hash-link" aria-label="Direct link to ERD Diagram Tools" title="Direct link to ERD Diagram Tools">​</a></h2>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[.NET Finalizer]]></title>
        <id>https://liviaerxin.github.io/blog/dotnet-finalizer</id>
        <link href="https://liviaerxin.github.io/blog/dotnet-finalizer"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <summary type="html"><![CDATA[c# - Finalizer launched while its object was still being used - Stack Overflow]]></summary>
        <content type="html"><![CDATA[<p><a href="https://stackoverflow.com/questions/134653/finalizer-launched-while-its-object-was-still-being-used" target="_blank" rel="noopener noreferrer">c# - Finalizer launched while its object was still being used - Stack Overflow</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2><ol><li>finalizers should not be accessing managed objects.</li></ol>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Frequently Asked Questions]]></title>
        <id>https://liviaerxin.github.io/blog/frequently-asked-questions</id>
        <link href="https://liviaerxin.github.io/blog/frequently-asked-questions"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <summary type="html"><![CDATA[⚠️ Foam is still in preview. Expect the experience to be a little rough.]]></summary>
        <content type="html"><![CDATA[<blockquote><p>⚠️ Foam is still in preview. Expect the experience to be a little rough.</p></blockquote><ul><li><a href="#frequently-asked-questions">Frequently Asked Questions</a><ul><li><a href="#linksgraphsbacklinks-dont-work-how-do-i-enable-them">Links/Graphs/BackLinks don't work. How do I enable them?</a></li><li><a href="#i-dont-want-foam-enabled-for-all-my-workspaces">I don't want Foam enabled for all my workspaces</a></li><li><a href="#i-want-to-publish-the-graph-view-to-github-pages-or-vercel">I want to publish the graph view to GitHub pages or Vercel</a></li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="linksgraphsbacklinks-dont-work-how-do-i-enable-them">Links/Graphs/BackLinks don't work. How do I enable them?<a href="#linksgraphsbacklinks-dont-work-how-do-i-enable-them" class="hash-link" aria-label="Direct link to Links/Graphs/BackLinks don't work. How do I enable them?" title="Direct link to Links/Graphs/BackLinks don't work. How do I enable them?">​</a></h2><ul><li>Ensure that you have all the [<!-- -->[recommended-extensions]<!-- -->] installed in Visual Studio Code</li><li>Reload Visual Studio Code by running <code>Cmd</code> + <code>Shift</code> + <code>P</code> (<code>Ctrl</code> + <code>Shift</code> + <code>P</code> for Windows), type "reload" and run the <strong>Developer: Reload Window</strong> command to for the updated extensions take effect</li><li>Check the formatting rules for links on [<!-- -->[foam-file-format]<!-- -->] and [<!-- -->[wikilinks]<!-- -->]</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="i-dont-want-foam-enabled-for-all-my-workspaces">I don't want Foam enabled for all my workspaces<a href="#i-dont-want-foam-enabled-for-all-my-workspaces" class="hash-link" aria-label="Direct link to I don't want Foam enabled for all my workspaces" title="Direct link to I don't want Foam enabled for all my workspaces">​</a></h2><p>Any extension you install in Visual Studio Code is enabled by default. Given the philosophy of Foam, it works out of the box without doing any configuration upfront. In case you want to disable Foam for a specific workspace, or disable Foam by default and enable it for specific workspaces, it is advised to follow the best practices as <a href="https://code.visualstudio.com/docs/editor/extension-marketplace#_manage-extensions" target="_blank" rel="noopener noreferrer">documented by Visual Studio Code</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="i-want-to-publish-the-graph-view-to-github-pages-or-vercel">I want to publish the graph view to GitHub pages or Vercel<a href="#i-want-to-publish-the-graph-view-to-github-pages-or-vercel" class="hash-link" aria-label="Direct link to I want to publish the graph view to GitHub pages or Vercel" title="Direct link to I want to publish the graph view to GitHub pages or Vercel">​</a></h2><p>If you want a different front-end look to your published foam and a way to see your graph view, we'd recommend checking out these templates:</p><ul><li><a href="https://github.com/mathieudutour/foam-gatsby-template" target="_blank" rel="noopener noreferrer">foam-gatsby</a> by <a href="https://github.com/mathieudutour" target="_blank" rel="noopener noreferrer">Mathieu Dutour</a></li><li><a href="https://github.com/hikerpig/foam-template-gatsby-kb" target="_blank" rel="noopener noreferrer">foam-gatsby-kb</a> by <a href="https://github.com/hikerpig" target="_blank" rel="noopener noreferrer">hikerpig</a></li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Graphical User Interface(GUI)]]></title>
        <id>https://liviaerxin.github.io/blog/graphical-user-interface</id>
        <link href="https://liviaerxin.github.io/blog/graphical-user-interface"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <summary type="html"><![CDATA[Modern GUI composition of:]]></summary>
        <content type="html"><![CDATA[<p>Modern GUI composition of:</p><ul><li>Windowing System/Compositor<ul><li>Quartz Compositor(OSX)</li><li>Desktop Window Manager(Windows)</li><li>X11(Linux)</li><li>Wayland(Linux)</li><li>SurfaceFlinger(Android)</li></ul></li><li>Graphic Rendering<ul><li>Hardware-Accelerated Rendering<ul><li>OpenGL</li><li>Vulkan</li><li>DirectX</li></ul></li><li>Software Rendering<ul><li>QT Rasterization Engine</li></ul></li></ul></li></ul><p>Windowing System</p><p>It's very essential to apply the <code>native Windowing System</code> library for Cross-platform GUI framework in different platforms. Here's a cue from <a href="https://github.com/glfw/glfw/blob/3a60992a418aad88717db32353bec22e8bb7dab3/include/GLFW/glfw3native.h#L94-L118" target="_blank" rel="noopener noreferrer">including native windowing system headers from GLFW</a></p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">if</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">!</span><span class="token macro property expression function" style="color:#d73a49">defined</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">GLFW_NATIVE_INCLUDE_NONE</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">if</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression function" style="color:#d73a49">defined</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">GLFW_EXPOSE_NATIVE_WIN32</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">||</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression function" style="color:#d73a49">defined</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">GLFW_EXPOSE_NATIVE_WGL</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/* This is a workaround for the fact that glfw3.h needs to export APIENTRY (for</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * example to allow applications to correctly declare a GL_KHR_debug callback)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * but windows.h assumes no one will define APIENTRY before it does</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">if</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression function" style="color:#d73a49">defined</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">GLFW_APIENTRY_DEFINED</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">undef</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression" style="color:#36acaa">APIENTRY</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">undef</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression" style="color:#36acaa">GLFW_APIENTRY_DEFINED</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">endif</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;windows.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">elif</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression function" style="color:#d73a49">defined</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">GLFW_EXPOSE_NATIVE_COCOA</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">||</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression function" style="color:#d73a49">defined</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">GLFW_EXPOSE_NATIVE_NSGL</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">if</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression function" style="color:#d73a49">defined</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">__OBJC__</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">import</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">&lt;</span><span class="token macro property expression" style="color:#36acaa">Cocoa</span><span class="token macro property expression operator" style="color:#393A34">/</span><span class="token macro property expression" style="color:#36acaa">Cocoa</span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">h</span><span class="token macro property expression operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;ApplicationServices/ApplicationServices.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;objc/objc.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">endif</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">elif</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression function" style="color:#d73a49">defined</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">GLFW_EXPOSE_NATIVE_X11</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">||</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression function" style="color:#d73a49">defined</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">GLFW_EXPOSE_NATIVE_GLX</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;X11/Xlib.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;X11/extensions/Xrandr.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">elif</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression function" style="color:#d73a49">defined</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">GLFW_EXPOSE_NATIVE_WAYLAND</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;wayland-client.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">endif</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://en.wikipedia.org/wiki/Windowing_system" target="_blank" rel="noopener noreferrer">Windowing system - Wikipedia</a></p><p><a href="https://www.baeldung.com/linux/gui" target="_blank" rel="noopener noreferrer">GUI Under Linux | Baeldung on Linux</a></p><p><a href="https://en.wikipedia.org/wiki/GTK" target="_blank" rel="noopener noreferrer">GTK - Wikipedia</a></p><p>Graphic Render APIs/Libraries</p><p><a href="https://alain.xyz/blog/comparison-of-modern-graphics-apis" target="_blank" rel="noopener noreferrer">A Comparison of Modern Graphics APIs</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="android-graphics">Android graphics<a href="#android-graphics" class="hash-link" aria-label="Direct link to Android graphics" title="Direct link to Android graphics">​</a></h2><p>two core pieces:</p><ul><li>SurfaceFlinger</li><li>Skia</li></ul><p><a href="https://source.android.com/devices/graphics" target="_blank" rel="noopener noreferrer">Graphics &nbsp;|&nbsp; Android Open Source Project</a>
<a href="https://stackoverflow.com/questions/4579573/android-graphics-internals" target="_blank" rel="noopener noreferrer">Android Graphics Internals - Stack Overflow</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="wayland">WayLand<a href="#wayland" class="hash-link" aria-label="Direct link to WayLand" title="Direct link to WayLand">​</a></h2><p><a href="https://bugaevc.gitbooks.io/writing-wayland-clients/content/about-this-book/what-is-wayland.html" target="_blank" rel="noopener noreferrer">What is Wayland? · Writing Wayland clients</a></p><p><a href="https://hdante.wordpress.com/2014/07/08/the-hello-wayland-tutorial/" target="_blank" rel="noopener noreferrer">The Hello Wayland Tutorial | FLOSS &amp; Cia</a></p><p><a href="https://medium.com/@bugaevc/how-to-use-wayland-with-c-to-make-a-linux-app-c2673a35ce05" target="_blank" rel="noopener noreferrer">How to use Wayland with C to make a Linux app | by Sergey Bugaev | Medium</a></p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[IoC]]></title>
        <id>https://liviaerxin.github.io/blog/ioc</id>
        <link href="https://liviaerxin.github.io/blog/ioc"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <summary type="html"><![CDATA[Introduction IoC, DIP, DI and IoC Container]]></summary>
        <content type="html"><![CDATA[<p><a href="https://www.tutorialsteacher.com/ioc/introduction" target="_blank" rel="noopener noreferrer">Introduction IoC, DIP, DI and IoC Container</a></p><p><a href="https://thomaslevesque.com/2020/03/18/lazily-resolving-services-to-fix-circular-dependencies-in-net-core/" target="_blank" rel="noopener noreferrer">Lazily resolving services to fix <code>circular dependencies</code> in .NET Core - Thomas Levesque's .NET Blog</a></p><p><a href="https://dotnetcoretutorials.com/2020/09/14/dealing-with-circular-dependency-injection-references/" target="_blank" rel="noopener noreferrer">Dealing With <code>Circular Dependency</code> Injection References - .NET Core Tutorials</a></p>]]></content>
        <category label="circular-dependencies" term="circular-dependencies"/>
        <category label="inversion-of-control" term="inversion-of-control"/>
        <category label="dependency-injection" term="dependency-injection"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[LevelDB]]></title>
        <id>https://liviaerxin.github.io/blog/leveldb</id>
        <link href="https://liviaerxin.github.io/blog/leveldb"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <summary type="html"><![CDATA[Principle and use of leveldb - Birost]]></summary>
        <content type="html"><![CDATA[<p><a href="https://blog.birost.com/a?ID=00650-1d5c18b6-1dac-46da-bbf8-80a5257e7bdd" target="_blank" rel="noopener noreferrer">Principle and use of leveldb - Birost</a></p><p><a href="https://www.igvita.com/2012/02/06/sstable-and-log-structured-storage-leveldb/" target="_blank" rel="noopener noreferrer">SSTable and Log Structured Storage: LevelDB - igvita.com</a></p><p><a href="http://www.lmdb.tech/bench/microbench/benchmark.html" target="_blank" rel="noopener noreferrer">LevelDB Benchmarks</a></p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Your markdown including PlantUML code block]]></title>
        <id>https://liviaerxin.github.io/blog/markdown-plantuml</id>
        <link href="https://liviaerxin.github.io/blog/markdown-plantuml"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <content type="html"><![CDATA[<div class="language-plantumlcode codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plantumlcode codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@startuml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:User: --&gt; (Use)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">"Main Admin" as Admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">"Use the application" as (Use)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Admin --&gt; (Admin the application)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@enduml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><img loading="lazy" src="https://www.plantuml.com/plantuml/png/XSpH2O0W403GVwUu1Mw124b7Q0Ep0mMzgppt3wgl2Ff_lAbfEBJNObp9aG0jU5a6S5qJiUOOD0l3J7kdfiRB0eWMBloXsYRSoBmp5arqGFXERpmY_kWdduZNNii9" class="img_ev3q"><img loading="lazy" src="https://www.plantuml.com/plantuml/png/ROtBIWD144Nt_HKtGo0A0-8-X4IJh1m796Gb36LtZMbItJNq8-ZVYt6JXRiBvt3kEXTAfGOnCn-jLCTO1YgSFCc3rH0qhim21uKFawQ2ScBaAVd26BqmlhLYsxyk3eZC3aKn2La6OKey-g_PV-5HnN4QWbvuPKot6VRzotRtDdJzSNVt96JFBHvRE9zQ9BQ5ugTmYsO3eG-MvjwOwtcJjIRBiEhuFIxdWORRT0FAL_PdFtTqvj-LpPgZgq5-0000" class="img_ev3q"><img loading="lazy" src="https://www.plantuml.com/plantuml/png/VT5DYy8m40RW-_oAiNXOeIZUHMohHn7Qqx986PDnjpHf9H_W8lxtfRf-b5rpo-IT9vcGXNLadDSA1bKZb9UCCqsEJKLg8bgjssR-VoIvt1aIR5_dP0nzXtdDBd30WGmtxejjw1P7dtOEi4xARBDSbMcUPAlYBLKawXYdCThM6y4nxYl5CKR5fSIibHoDxYh9y-Jz2GbDzSDaQwgvMzknExe0wwaR2lNRdQ-KV90YxUfeX2Su0tIxU1tu0vu6XzbGKzdxW-rlT-zzU094n6lmnqHmXWKtqclr0m00" class="img_ev3q">]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Network Diagnosis]]></title>
        <id>https://liviaerxin.github.io/blog/network-diagnosis</id>
        <link href="https://liviaerxin.github.io/blog/network-diagnosis"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <summary type="html"><![CDATA[Understanding Routing Table Entry | Baeldung on Computer Science]]></summary>
        <content type="html"><![CDATA[<p><a href="https://www.baeldung.com/cs/routing-table-entry" target="_blank" rel="noopener noreferrer">Understanding Routing Table Entry | Baeldung on Computer Science</a></p><blockquote><p>the packs go through the gateway of interface. the same interface can have multiple gateways and different interfaces can have the same gateway.</p></blockquote><p><a href="https://forums.developer.nvidia.com/t/ssh-enabled-only-if-connected-through-microusb/192708/12" target="_blank" rel="noopener noreferrer">route diagnosis</a></p><p><a href="https://www.tecmint.com/find-out-which-process-listening-on-a-particular-port/" target="_blank" rel="noopener noreferrer">3 Ways to Find Which Linux Process Listening on a Port</a></p><p><a href="https://docs.oracle.com/cd/E18752_01/html/816-4554/ipconfig-142.html" target="_blank" rel="noopener noreferrer">Monitoring Network Status With the netstat Command - System Administration Guide: IP Services</a></p><blockquote><p>System Administration Guide</p></blockquote><p><a href="https://www.xmodulo.com/geographic-location-ip-address-command-line.html" target="_blank" rel="noopener noreferrer">How to look up the geographic location of an IP address from the command line</a></p><blockquote><p>#geolocation-of-ip</p></blockquote><p><a href="https://danielmiessler.com/study/tcpdump/" target="_blank" rel="noopener noreferrer">A tcpdump Tutorial with Examples — 50 Ways to Isolate Traffic - Daniel Miesslersearchmailmailmail</a></p><p><a href="https://resource.nvidia.com/cheatsheets/linux-networking-cheatsheet-tcpdump" target="_blank" rel="noopener noreferrer">TCPDump cheatsheet</a></p><p><a href="https://opensource.com/article/18/10/introduction-tcpdump" target="_blank" rel="noopener noreferrer">An introduction to using tcpdump at the Linux command line | Opensource.com</a></p><p>Knowing <code>simultaneously</code> these three things for failing and working circumstances would be quite useful.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="show-ip-address">Show IP Address<a href="#show-ip-address" class="hash-link" aria-label="Direct link to Show IP Address" title="Direct link to Show IP Address">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ifconfig</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="show-routing-table">Show Routing Table<a href="#show-routing-table" class="hash-link" aria-label="Direct link to Show Routing Table" title="Direct link to Show Routing Table">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># linux</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">route</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># osx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">netstat</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-rn</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>-r</code> flag means to show routes.</p><p>The <code>-n</code> flag means to not resolve IPs to hostnames.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="find-gateway-used-for-routing">Find Gateway Used for Routing<a href="#find-gateway-used-for-routing" class="hash-link" aria-label="Direct link to Find Gateway Used for Routing" title="Direct link to Find Gateway Used for Routing">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># linux</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> route get </span><span class="token number" style="color:#36acaa">8.8</span><span class="token plain">.8.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># osx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">route get </span><span class="token number" style="color:#36acaa">8.8</span><span class="token plain">.8.8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="show-routes-across-network">Show Routes across Network<a href="#show-routes-across-network" class="hash-link" aria-label="Direct link to Show Routes across Network" title="Direct link to Show Routes across Network">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">traceroute</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># en0 interface</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">traceroute</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> en0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ping-through-specific-interface">Ping Through Specific Interface<a href="#ping-through-specific-interface" class="hash-link" aria-label="Direct link to Ping Through Specific Interface" title="Direct link to Ping Through Specific Interface">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># linux</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ping</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-I</span><span class="token plain"> en0 sslvpn.astri.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># osx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ping</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-b</span><span class="token plain"> en0 sslvpn.astri.org</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="find-out-address-used-by-which-process">Find Out Address Used by Which Process<a href="#find-out-address-used-by-which-process" class="hash-link" aria-label="Direct link to Find Out Address Used by Which Process" title="Direct link to Find Out Address Used by Which Process">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># osx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">netstat</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-avn</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> tcp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="add-a-route">Add a Route<a href="#add-a-route" class="hash-link" aria-label="Direct link to Add a Route" title="Direct link to Add a Route">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># osx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">route </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10.0</span><span class="token plain">.0.0/24 </span><span class="token number" style="color:#36acaa">10.0</span><span class="token plain">.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># linux</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">route </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-net</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10.0</span><span class="token plain">.0.0/24 gw </span><span class="token number" style="color:#36acaa">10.0</span><span class="token plain">.0.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="firewall-rule">FireWall Rule<a href="#firewall-rule" class="hash-link" aria-label="Direct link to FireWall Rule" title="Direct link to FireWall Rule">​</a></h2><p>osx:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># show all information/stats</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> pfctl </span><span class="token parameter variable" style="color:#36acaa">-sa</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># show rules</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> pfctl </span><span class="token parameter variable" style="color:#36acaa">-sr</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># sanity check edited configuration file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> pfctl </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> /etc/pf.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># load pf with new rules</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> pfctl </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> /etc/pf.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># enable pf</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> pfctl </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># disable pf</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> pfctl </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># add information on the fly</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> pfctl </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> localsub </span><span class="token parameter variable" style="color:#36acaa">-T</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.0/24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># flush added rules later</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> pfctl </span><span class="token parameter variable" style="color:#36acaa">-Fa</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> /etc/pf.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> pfctl </span><span class="token parameter variable" style="color:#36acaa">-si</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> pfctl </span><span class="token parameter variable" style="color:#36acaa">-q</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="get-geolocation-of-ip-address">Get Geolocation of IP Address<a href="#get-geolocation-of-ip-address" class="hash-link" aria-label="Direct link to Get Geolocation of IP Address" title="Direct link to Get Geolocation of IP Address">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> ipinfo.io/103.216.223.161</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="packet-analyzer">Packet Analyzer<a href="#packet-analyzer" class="hash-link" aria-label="Direct link to Packet Analyzer" title="Direct link to Packet Analyzer">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># list which interfaces are available for capture</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcpdump --list-interfaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># capture all packets in any interface</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> tcpdump </span><span class="token parameter variable" style="color:#36acaa">--interface</span><span class="token plain"> any</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># limit the number of packets captured then stop `-c number`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> tcpdump </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> any </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># disable name resolution with using `-n` and port resolution with `-nn` </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> tcpdump </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> any </span><span class="token parameter variable" style="color:#36acaa">-c5</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-nn</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># filter packets by protocol, only capture `ICMP` packets</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> tcpdump </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> any </span><span class="token parameter variable" style="color:#36acaa">-c5</span><span class="token plain"> icmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># capture packets related with host `8.8.8.8`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> tcpdump </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> any </span><span class="token parameter variable" style="color:#36acaa">-c5</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-nn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8.8</span><span class="token plain">.8.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># capture packets related with port `80`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> tcpdump </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> any </span><span class="token parameter variable" style="color:#36acaa">-c5</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-nn</span><span class="token plain"> port </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># capture packets with source address 192.168.0.1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> tcpdump </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> any </span><span class="token parameter variable" style="color:#36acaa">-c5</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-nn</span><span class="token plain"> src </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># capture packets with destination address 8.8.8.8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> tcpdump </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> any </span><span class="token parameter variable" style="color:#36acaa">-c5</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-nn</span><span class="token plain"> dst </span><span class="token number" style="color:#36acaa">8.8</span><span class="token plain">.8.8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="usb-virtual-ethernet">USB Virtual Ethernet<a href="#usb-virtual-ethernet" class="hash-link" aria-label="Direct link to USB Virtual Ethernet" title="Direct link to USB Virtual Ethernet">​</a></h2><p><a href="https://forums.developer.nvidia.com/t/provide-internet-through-micro-usb-while-doing-ssh/111326/14" target="_blank" rel="noopener noreferrer">An explanation on the USB virtual ethernet</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="access-wsl-2-from-local-area-networklan">Access WSL 2 from local area network(LAN)<a href="#access-wsl-2-from-local-area-networklan" class="hash-link" aria-label="Direct link to Access WSL 2 from local area network(LAN)" title="Direct link to Access WSL 2 from local area network(LAN)">​</a></h2><p>After enabling <a href="https://devblogs.microsoft.com/commandline/systemd-support-is-now-available-in-wsl/" target="_blank" rel="noopener noreferrer">systemd</a> in WSL 2, I have to forward the Windows host port to the WSL 2 distribution.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="find-wsl-2-ip-address-that-can-be-reached-from-windows-host">Find WSL 2 IP address that can be reached from Windows host<a href="#find-wsl-2-ip-address-that-can-be-reached-from-windows-host" class="hash-link" aria-label="Direct link to Find WSL 2 IP address that can be reached from Windows host" title="Direct link to Find WSL 2 IP address that can be reached from Windows host">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> addr show eth0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2</span><span class="token plain">: eth0: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">BROADCAST,MULTICAST,UP,LOWER_UP</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mtu </span><span class="token number" style="color:#36acaa">1420</span><span class="token plain"> qdisc mq state UP group default qlen </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link/ether 00:15:5d:98:b5:99 brd ff:ff:ff:ff:ff:ff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inet </span><span class="token number" style="color:#36acaa">172.29</span><span class="token plain">.6.23/20 brd </span><span class="token number" style="color:#36acaa">172.29</span><span class="token plain">.15.255 scope global eth0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       valid_lft forever preferred_lft forever</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inet6 fe80::215:5dff:fe98:b599/64 scope </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       valid_lft forever preferred_lft forever</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="add-proxy">Add proxy<a href="#add-proxy" class="hash-link" aria-label="Direct link to Add proxy" title="Direct link to Add proxy">​</a></h3><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">netsh interface portproxy add v4tov4 listenport=8082 connectport=8082 connectaddress=172</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">29</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">6</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">23</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">127</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">0</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">0</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="optional-add-firewall-rule">[Optional]<!-- --> Add firewall rule<a href="#optional-add-firewall-rule" class="hash-link" aria-label="Direct link to optional-add-firewall-rule" title="Direct link to optional-add-firewall-rule">​</a></h3><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">netsh advfirewall firewall add rule name= </span><span class="token string" style="color:#e3116c">"Open Port 8082"</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">dir</span><span class="token plain">=in action=allow protocol=TCP localport=8082</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="check-current-proxy">Check current proxy<a href="#check-current-proxy" class="hash-link" aria-label="Direct link to Check current proxy" title="Direct link to Check current proxy">​</a></h3><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">netsh interface portproxy show all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="clean-up">Clean up<a href="#clean-up" class="hash-link" aria-label="Direct link to Clean up" title="Direct link to Clean up">​</a></h3><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">netsh interface portproxy delete v4tov4 listenport=8082</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">netsh advfirewall firewall delete rule name=</span><span class="token string" style="color:#e3116c">"Open port 8082"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <category label="network" term="network"/>
        <category label="network/diagnosis" term="network/diagnosis"/>
        <category label="netstat" term="netstat"/>
        <category label="route" term="route"/>
        <category label="traceroute" term="traceroute"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[OpenCV tips]]></title>
        <id>https://liviaerxin.github.io/blog/opencv-tips</id>
        <link href="https://liviaerxin.github.io/blog/opencv-tips"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <summary type="html"><![CDATA[Q: Whether the image/frame from VideoCapture is in BGR or YUV pixels format?]]></summary>
        <content type="html"><![CDATA[<p>Q: Whether the image/frame from VideoCapture is in <code>BGR</code> or <code>YUV</code> pixels format?
A:
VideoCapture will convert the image automatically to BGR colorspace.
you can disable this conversion (and receive YUV) by setting the CAP_PROP_CONVERT_RGB property to false.</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Python Benchmark]]></title>
        <id>https://liviaerxin.github.io/blog/python-benchmark</id>
        <link href="https://liviaerxin.github.io/blog/python-benchmark"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <summary type="html"><![CDATA[Ok, here is the cost of acquiring and releasing an uncontended lock]]></summary>
        <content type="html"><![CDATA[<p>Ok, here is the cost of acquiring and releasing an uncontended lock
under Linux, with Python 3.2:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./python </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> timeit </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"from threading import Lock; l=Lock(); a=l.acquire; r=l.release"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">"a(); r()"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">10000000</span><span class="token plain"> loops, best of </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">: </span><span class="token number" style="color:#36acaa">0.127</span><span class="token plain"> usec per loop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And here is the cost of calling a dummy Python function:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./python </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> timeit </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"def a(): pass"</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"a(); a()"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1000000</span><span class="token plain"> loops, best of </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">: </span><span class="token number" style="color:#36acaa">0.221</span><span class="token plain"> usec per loop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And here is the cost of calling a trivial C function (which returns the
False singleton):</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./python </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> timeit </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"a=bool"</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"a(); a()"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">10000000</span><span class="token plain"> loops, best of </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">: </span><span class="token number" style="color:#36acaa">0.164</span><span class="token plain"> usec per loop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Also, note that using the lock as a context manager is actually slower,
not faster as you might imagine:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./python </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> timeit </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"from threading import Lock; l=Lock()"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">"with l: pass"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1000000</span><span class="token plain"> loops, best of </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">: </span><span class="token number" style="color:#36acaa">0.242</span><span class="token plain"> usec per loop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>At least under Linux, there doesn't seem to be a lot of room for
improvement in lock performance, to say the least.</p><p>PS: RLock is now as fast as Lock:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./python </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> timeit </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"from threading import RLock; l=RLock(); a=l.acquire; r=l.release"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">"a(); r()"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">10000000</span><span class="token plain"> loops, best of </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">: </span><span class="token number" style="color:#36acaa">0.114</span><span class="token plain"> usec per loop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Python Module]]></title>
        <id>https://liviaerxin.github.io/blog/python-module</id>
        <link href="https://liviaerxin.github.io/blog/python-module"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <summary type="html"><![CDATA[Python Module Search Path]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="python-module-search-path">Python Module Search Path<a href="#python-module-search-path" class="hash-link" aria-label="Direct link to Python Module Search Path" title="Direct link to Python Module Search Path">​</a></h2><p><a href="https://docs.python.org/3/tutorial/modules.html#the-module-search-path" target="_blank" rel="noopener noreferrer">The Module Search Path</a></p><p><a href="https://www.pythontutorial.net/python-basics/python-module-search-path/" target="_blank" rel="noopener noreferrer">Introduction to Python module search path</a></p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[RPC vs MQ]]></title>
        <id>https://liviaerxin.github.io/blog/rpc_vs_mq</id>
        <link href="https://liviaerxin.github.io/blog/rpc_vs_mq"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <summary type="html"><![CDATA[RPC: synchronous, client needs to preserve the request until the client receives response.]]></summary>
        <content type="html"><![CDATA[<p>RPC: synchronous, client needs to preserve the request until the client receives response.
MQ(Message Queue): asynchronous, there is no need for client to wait for the response.</p><p><a href="https://particular.net/blog/rpc-vs-messaging-which-is-faster" target="_blank" rel="noopener noreferrer">RPC vs. Messaging – which is faster?</a></p><p><a href="https://stackoverflow.com/questions/54091672/low-latency-communication-of-micro-services-in-remote-ipc-and-threading-scenari" target="_blank" rel="noopener noreferrer">Low-latency communication of micro-services in remote, IPC and threading scenarios</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="rpc">RPC<a href="#rpc" class="hash-link" aria-label="Direct link to RPC" title="Direct link to RPC">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ipc">IPC<a href="#ipc" class="hash-link" aria-label="Direct link to IPC" title="Direct link to IPC">​</a></h2><p>IPC: (local)Inter-Process Communication</p><p><a href="https://www.mpi-hd.mpg.de/personalhomes/fwerner/research/2021/09/grpc-for-ipc/" target="_blank" rel="noopener noreferrer">Using gRPC for (local) inter-process communication</a></p><p><a href="https://github.com/goldsborough/ipc-bench" target="_blank" rel="noopener noreferrer">IPC Benchmark</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mq">MQ<a href="#mq" class="hash-link" aria-label="Direct link to MQ" title="Direct link to MQ">​</a></h2>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Serialization]]></title>
        <id>https://liviaerxin.github.io/blog/serialization</id>
        <link href="https://liviaerxin.github.io/blog/serialization"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <summary type="html"><![CDATA[Serialization]]></summary>
        <content type="html"><![CDATA[<p><a href="https://en.wikipedia.org/wiki/Serialization" target="_blank" rel="noopener noreferrer">Serialization</a></p><p><a href="https://medium.com/@hugovs/the-need-for-speed-experimenting-with-message-serialization-93d7562b16e4" target="_blank" rel="noopener noreferrer">The need for speed — Experimenting with message serialization</a></p><p><a href="https://github.com/neuecc/MessagePack-CSharp/issues/819#issuecomment-586125191" target="_blank" rel="noopener noreferrer">MessagePack, Json, Protobuf</a></p><p>In computing, <code>serialization</code> is the process of translating a data structure or object into a format that can be stored(for example, in a file or memory buffer) or transmitted(for example, over a computer network) and reconstructed later (possibly in a different computer environment).</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="json">Json<a href="#json" class="hash-link" aria-label="Direct link to Json" title="Direct link to Json">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="messagepack">MessagePack<a href="#messagepack" class="hash-link" aria-label="Direct link to MessagePack" title="Direct link to MessagePack">​</a></h2><p><a href="https://github.com/msgpack/msgpack" target="_blank" rel="noopener noreferrer">msgpack GitHub</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="protocol-buffers">Protocol Buffers<a href="#protocol-buffers" class="hash-link" aria-label="Direct link to Protocol Buffers" title="Direct link to Protocol Buffers">​</a></h2><p><a href="https://developers.google.com/protocol-buffers" target="_blank" rel="noopener noreferrer">Protocol Buffers</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="supported-features">Supported Features<a href="#supported-features" class="hash-link" aria-label="Direct link to Supported Features" title="Direct link to Supported Features">​</a></h2><table><thead><tr><th>Protocol</th><th align="center">Discriminator Property &amp; Polymorphism</th></tr></thead><tbody><tr><td>Json</td><td align="center">✔️</td></tr><tr><td>MessagePack</td><td align="center">✔️</td></tr><tr><td>Protobuf</td><td align="center">✖️</td></tr></tbody></table>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki Skia]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-skia</id>
        <link href="https://liviaerxin.github.io/blog/wiki-skia"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <summary type="html"><![CDATA[What the difference between SkImage/SkPicture/SkCanvas/SkSurface?]]></summary>
        <content type="html"><![CDATA[<p><a href="https://groups.google.com/g/skia-discuss/c/rNWV-oYtps" target="_blank" rel="noopener noreferrer">What the difference between SkImage/SkPicture/SkCanvas/SkSurface?</a></p><p><a href="https://groups.google.com/g/skia-discuss/c/zatUu89s5_I" target="_blank" rel="noopener noreferrer">SkBitmap based SkCanvas very slow... How to improve draw speeds?</a></p><p><a href="https://groups.google.com/g/skia-discuss/c/M6G_bQd8Vf8" target="_blank" rel="noopener noreferrer">How to move SkImage from CPU to GPU?</a></p><p><a href="https://groups.google.com/g/skia-discuss/c/EqvExXnEUbI" target="_blank" rel="noopener noreferrer">How to control the SkImage GPU back cache size?</a></p><p>As far as I understand when I load SkImage from file or SkBitmap the SkImage lives in CPU side memory. Then the moment I draw this SkImage on a GPU backed canvas it will make a copy of the CPU data into a GPU backed texture. So now we technically have two copies available on the SkImage. Then each time I draw that SkImage it will do it quickly cause it's already in the GPU side.</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki VPN]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-vpn</id>
        <link href="https://liviaerxin.github.io/blog/wiki-vpn"/>
        <updated>2023-12-21T10:15:12.000Z</updated>
        <summary type="html"><![CDATA[OpenVPN: how secure virtual private networks really work]]></summary>
        <content type="html"><![CDATA[<p><a href="https://cloudacademy.com/blog/openvpn-how-secure-virtual-private-networks-really-work/" target="_blank" rel="noopener noreferrer">OpenVPN: how secure virtual private networks really work</a></p><blockquote><p>!!!Favorite explanation</p></blockquote><p><a href="https://networkengineering.stackexchange.com/questions/51159/how-do-vpns-forward-network-traffic-layer-3" target="_blank" rel="noopener noreferrer">ip - How do VPN's forward network traffic? (Layer 3) - Network Engineering Stack Exchange</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="routers-support-for-vpnopenvpn-client">Routers Support for VPN(OpenVPN) Client<a href="#routers-support-for-vpnopenvpn-client" class="hash-link" aria-label="Direct link to Routers Support for VPN(OpenVPN) Client" title="Direct link to Routers Support for VPN(OpenVPN) Client">​</a></h2><p><a href="https://support.surfshark.com/hc/en-us/articles/360003103833-How-to-set-up-a-router-with-Surfshark-" target="_blank" rel="noopener noreferrer">How to set up a router with Surfshark? – Surfshark Customer Support</a></p><p><a href="https://community.tp-link.com/en/home/forum/topic/272492" target="_blank" rel="noopener noreferrer">Routers Supporting VPN Client - Home Network Community</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="kill-switch">Kill Switch<a href="#kill-switch" class="hash-link" aria-label="Direct link to Kill Switch" title="Direct link to Kill Switch">​</a></h2><p>KillSwitch could be used to block outgoing traffic when the VPN connection drops and crashes.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pfpacket-filter-macos">PF(packet filter) MacOS<a href="#pfpacket-filter-macos" class="hash-link" aria-label="Direct link to PF(packet filter) MacOS" title="Direct link to PF(packet filter) MacOS">​</a></h2><p><a href="https://iyanmv.medium.com/setting-up-correctly-packet-filter-pf-firewall-on-any-macos-from-sierra-to-big-sur-47e70e062a0e" target="_blank" rel="noopener noreferrer">Setting up correctly Packet Filter (pf) firewall on any macOS</a></p><p><a href="https://superuser.com/questions/468919/prevent-outgoing-traffic-unless-openvpn-connection-is-active-using-pf-conf-on-ma" target="_blank" rel="noopener noreferrer">Prevent outgoing traffic unless OpenVPN connection is active using pf.conf on Mac OS X</a></p><p><a href="https://blog.neilsabol.site/post/quickly-easily-adding-pf-packet-filter-firewall-rules-macos-osx/" target="_blank" rel="noopener noreferrer">Quick and easy pf (packet filter) firewall rules on macOS</a></p><p><a href="https://krypted.com/mac-security/a-cheat-sheet-for-using-pf-in-os-x-lion-and-up/" target="_blank" rel="noopener noreferrer">A Cheat Sheet For Using pf in OS X Lion and Up</a></p><p><a href="https://murusfirewall.com/Documentation/OS%20X%20PF%20Manual.pdf" target="_blank" rel="noopener noreferrer">OS X PF Manual</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set-up-firewall-to-allow-access-only-via-vpnkillswitch">Set Up Firewall to Allow Access Only via VPN(KillSwitch)<a href="#set-up-firewall-to-allow-access-only-via-vpnkillswitch" class="hash-link" aria-label="Direct link to Set Up Firewall to Allow Access Only via VPN(KillSwitch)" title="Direct link to Set Up Firewall to Allow Access Only via VPN(KillSwitch)">​</a></h2><p><a href="https://zorrovpn.com/articles/windows-firewall-vpn-only?lang=en" target="_blank" rel="noopener noreferrer">ENABLING VPN-ONLY ACCESS TO THE INTERNET WITH WINDOWS FIREWALL</a></p><p><a href="https://github.com/vpn-kill-switch/killswitch" target="_blank" rel="noopener noreferrer">KillSwitch for macOS</a></p><p><a href="https://superuser.com/questions/468919/prevent-outgoing-traffic-unless-openvpn-connection-is-active-using-pf-conf-on-ma" target="_blank" rel="noopener noreferrer">Prevent outgoing traffic unless OpenVPN connection is active using pf.conf on Mac OS X</a></p>]]></content>
        <category label="network" term="network"/>
        <category label="network/vpn" term="network/vpn"/>
        <category label="network/router" term="network/router"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Python Celery]]></title>
        <id>https://liviaerxin.github.io/blog/python-celery-workflow</id>
        <link href="https://liviaerxin.github.io/blog/python-celery-workflow"/>
        <updated>2023-12-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Python Celery]]></summary>
        <content type="html"><![CDATA[<p>What's <strong>workflow</strong> in Celery?</p><p>In <strong>Celery</strong>, <strong>workflow</strong> is composed of multiple <strong>tasks</strong>, and a <strong>task</strong> is deemed to be a universal unit of the <strong>workflow</strong>, as a function in the program. In <strong>Celery</strong>, it's recommended to divide a long-running task into multiple short-running tasks. <strong>workflow</strong> comes out to help ease the orchestrations of the work, such as <code>chain()</code> three tasks.</p><p><a href="https://github.com/liviaerxin/fastapi-celery-ml/blob/main/app/examples/celery_workflow.py" target="_blank" rel="noopener noreferrer">A demo workflow</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2><p><a href="https://blog.det.life/replacing-celery-tasks-inside-a-chain-b1328923fb02" target="_blank" rel="noopener noreferrer">https://blog.det.life/replacing-celery-tasks-inside-a-chain-b1328923fb02</a></p><p><a href="https://dev.to/akarshan/the-curious-case-of-celery-work-flows-39f7" target="_blank" rel="noopener noreferrer">https://dev.to/akarshan/the-curious-case-of-celery-work-flows-39f7</a></p><p><a href="https://engineering.instawork.com/celery-eta-tasks-demystified-424b836e4e94" target="_blank" rel="noopener noreferrer">https://engineering.instawork.com/celery-eta-tasks-demystified-424b836e4e94</a></p><p><a href="https://docs.celeryq.dev/en/stable/userguide/canvas.html" target="_blank" rel="noopener noreferrer">https://docs.celeryq.dev/en/stable/userguide/canvas.html</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="Python Celery" term="Python Celery"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Python C Library]]></title>
        <id>https://liviaerxin.github.io/blog/python-c-library</id>
        <link href="https://liviaerxin.github.io/blog/python-c-library"/>
        <updated>2023-12-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Python C]]></summary>
        <content type="html"><![CDATA[<p>How many ways Python can interact with C libraries?</p><p>Two. There are two different modes totally.</p><ol><li><code>ctypes</code> to load any dynamic library from a C libraries</li><li><code>import module</code> to import a dynamic library written using the Python C API</li></ol><p>Let's clarify the terminology a bit:</p><ol><li><code>ctypes</code> to Load Dynamic Libraries (including any C library):</li></ol><ul><li><code>ctypes</code> is a foreign function interface (FFI) library in Python that allows you to call functions from dynamic/shared libraries written in languages like C.</li><li>It can be used to load and call functions from C libraries (or any dynamic/shared libraries), and it's a more manual, low-level approach to interfacing with C code.</li><li>Example with <code>ctypes</code>:<div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><ol start="2"><li><code>import module</code> for Dynamic Libraries written in Python C API:<ul><li>If a C library is written using the Python C API and compiled as a Python extension module (<code>.pyd</code> on Windows or <code>.so</code> on Unix-like systems), you can use the import statement to <code>import</code> and use it in Python.</li><li>This <code>Pythonic</code> approach typically provides a more seamless integration as it allows the C code to be treated as a native Python module.</li><li>Example with <code>import module</code>:</li></ul></li></ol><p>What's the file's name that Python look for when using <code>import module</code> to import C API libraries?</p><p>Python will look for a shared library with a suitable name, as determined by the platform conventions.
The shared library could be named something like <code>libexample.so</code> on Unix-like systems or <code>example.dll</code> on Windows. The <code>PyInit_example</code> function initializes the module.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="python-int-object">Python <code>int</code> object<a href="#python-int-object" class="hash-link" aria-label="Direct link to python-int-object" title="Direct link to python-int-object">​</a></h2><p>Python uses a variable-size integer representation,</p><ul><li><code>Overhead size</code>: 24 bytes, including Python header object</li><li><code>Data size</code>: 4 or 8 bytes, storing smaller <code>int</code> using 4 bytes and bigger <code>int</code> using 8 bytes.</li></ul><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getsizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0x560f7ab1e1c0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getsizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0xc0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">28</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="Python" term="Python"/>
        <category label="C" term="C"/>
        <category label="Shared library" term="Shared library"/>
        <category label="Dynamic library" term="Dynamic library"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Python Unicode String]]></title>
        <id>https://liviaerxin.github.io/blog/python-unicode-string</id>
        <link href="https://liviaerxin.github.io/blog/python-unicode-string"/>
        <updated>2023-12-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Python Unicode]]></summary>
        <content type="html"><![CDATA[<p>Python string use <code>unicodeobject</code> which is implemented in <code>C</code> in CPython:</p><ul><li><a href="https://github.com/python/cpython/blob/main/Objects/unicodeobject.c" target="_blank" rel="noopener noreferrer">unicodeobject.c</a></li><li><a href="https://github.com/python/cpython/blob/main/Include/cpython/unicodeobject.h" target="_blank" rel="noopener noreferrer">unicodeobject.h</a></li></ul><p>Python chooses one of these three kinds of data type to internally represent for a Unicode-characters string, so every Unicode character of the string has the same fixed-length: 1, 2 or 4,</p><ul><li><strong>UCS-1</strong>(1 byte), for ASCII characters between U+0000 and U+00FF</li><li><strong>UCS-2</strong>(2 bytes), for Unicode characters between U+00FF and U+FFFF</li><li><strong>UCS-4</strong>(4 bytes), for Unicode characters between U+00FFFF and U+10FFFF</li></ul><p>There are 4 forms of Unicode strings:</p><ul><li>compact ascii</li><li>compact</li><li>legacy string</li><li>legacy string ready</li></ul><p>The <code>legacy string</code> as I see is already deprecated after Python3 and the official says: "it will be removed after Python 4".</p><p>The <code>compact</code> make the <code>characters</code> data start just after the <code>PyASCIIObject</code> or <code>PyCompactUnicodeObject</code> structure, using just one block, whereas <code>legacy strings</code> use one block for the structure and one block for <code>characters</code>.</p><p>The <code>characters</code> data are 1-byte, 2-byte or 4-byte <code>code point</code>. The UnicodeObject will use the maximum length in fixed-size for each.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="why-python-doesnt-use-utf-8-encoding-variable-length-bytes-in-memory-directly-why-it-will-convert-them-to-ucs-2-or-ucs-4-data">Why Python doesn't use UTF-8 encoding variable-length bytes in memory directly, why it will convert them to <strong>UCS-2</strong> or <strong>UCS-4</strong> data?<a href="#why-python-doesnt-use-utf-8-encoding-variable-length-bytes-in-memory-directly-why-it-will-convert-them-to-ucs-2-or-ucs-4-data" class="hash-link" aria-label="Direct link to why-python-doesnt-use-utf-8-encoding-variable-length-bytes-in-memory-directly-why-it-will-convert-them-to-ucs-2-or-ucs-4-data" title="Direct link to why-python-doesnt-use-utf-8-encoding-variable-length-bytes-in-memory-directly-why-it-will-convert-them-to-ucs-2-or-ucs-4-data">​</a></h3><p>Keep each character in a string in the same width in the data memory.</p><p>What's the purpose?</p><ol><li>Indexing into strings in Python is operated in a constant time, as it's based on the fixed-length encodings.</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-do-other-programming-languages-access-character-in-a-string-by-index">How do other programming languages access character in a string by index?<a href="#how-do-other-programming-languages-access-character-in-a-string-by-index" class="hash-link" aria-label="Direct link to How do other programming languages access character in a string by index?" title="Direct link to How do other programming languages access character in a string by index?">​</a></h3><ul><li>Go<ul><li>Iterating yields Unicode code point</li><li>Indexing yields a byte</li></ul></li><li>Rust<ul><li>Iteration yields Unicode code point(<code>method.chars()</code>) or byte(<code>method.bytes</code>)</li><li>Indexing not supported</li></ul></li><li>Python<ul><li>Iterating yields Unicode code point</li><li>Indexing yields Unicode code point</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-a-string-in-python-is-printed-on-the-screen">How a string in Python is printed on the screen?<a href="#how-a-string-in-python-is-printed-on-the-screen" class="hash-link" aria-label="Direct link to How a string in Python is printed on the screen?" title="Direct link to How a string in Python is printed on the screen?">​</a></h3><p>You may wonder why they have the same result on the terminal from Python output, assuming that the terminal is using the UTF-8 encoding.</p><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"\xe9"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">'é'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"\u00e9"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">'é'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'é'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">'é'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When Python prints string, here the <code>print()</code> is used in default in Python IDE.</p><ol><li>create <code>PyObject</code>. When the string is <code>\xe9</code> or <code>\u00e9</code>, the Python interpret they as the <strong>code point</strong> of which <code>0xe9</code> is <code>233</code> in decimal. And convert it in <code>PyUnicodeObject</code> of which  stores data use <code>UCS-1</code> as <code>0xe9</code> is one byte.  </li><li>print the <code>PyUnicodeObject</code>. As the system locale uses UTF-8 Encoding, Python will convert <code>UCS-1</code> data to utf-8 encoding bytes, which is <code>b'\xc3\xa9'</code>.<div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'é'</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">b'\xc3\xa9'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>send bytes to the terminal emulator. <code>b'\xc3\xa9'</code> is sent to the terminal which uses the UTF-8 encoding. <code>b'\xc3\xa9'</code> in utf-8 is decode as code point <code>\u00e9</code> which represent the character <code>é</code>. </li><li>draw character. The terminal emulator draw the glyph <code>é</code> on the screen as you see.</li></ol><p>If the terminal using <code>latin-1</code>, <code>"\xe9"</code> will be show as <code>Ã©</code> in the terminal.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-to-write-raw-bytes-to-the-terminal-from-python">How to write raw bytes to the terminal from Python?<a href="#how-to-write-raw-bytes-to-the-terminal-from-python" class="hash-link" aria-label="Direct link to How to write raw bytes to the terminal from Python?" title="Direct link to How to write raw bytes to the terminal from Python?">​</a></h3><p>As you see above, Python print strings:</p><ol><li>firstly strings are encoded to utf-8 bytes.</li><li>secondly these bytes are sent to the terminal.</li></ol><p>Sometimes, you may want to write raw bytes in the terminal directly to see how the terminal represents these bytes on the screen.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">➜  ~ python3 </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'import sys; sys.stdout.buffer.write(b"\xc3\xa9")'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">é</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>UTF-8 terminal represent bytes <code>b"\xc3\xa9"</code> to character <code>é</code>.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">➜  ~ python3 </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'import sys; sys.stdout.buffer.write(b"\xe9")'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">�</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>UTF-8 terminal can not represent bytes <code>b"\xe9"</code> to any known character, as <code>b"\xe9"</code> is not a valid utf-8 encoding bytes.</p><p><a href="https://stackoverflow.com/questions/42179786/python3-print-raw-byte" target="_blank" rel="noopener noreferrer">python - Python3 print raw byte - Stack Overflow</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="an-outline-of-the-pyunicodeobject">An outline of the <code>PyUnicodeObject</code><a href="#an-outline-of-the-pyunicodeobject" class="hash-link" aria-label="Direct link to an-outline-of-the-pyunicodeobject" title="Direct link to an-outline-of-the-pyunicodeobject">​</a></h2><p>References are mainly from:</p><ul><li><a href="https://docs.python.org/3/library/ctypes.html" target="_blank" rel="noopener noreferrer">ctypes — A foreign function library for Python — Python 3.12.1 documentation</a></li><li><a href="https://github.com/python/cpython/blob/3.10/Include/cpython/unicodeobject.h#L85-L244" target="_blank" rel="noopener noreferrer">unicodeobject.h</a></li><li><a href="https://github.com/python/cpython/blob/3.10/Objects/unicodeobject.c" target="_blank" rel="noopener noreferrer">unicodeobject.c</a></li></ul><p>A brief <code>PyUnicodeObject</code> structure defined from <a href="https://github.com/python/cpython/blob/3.10/Include/cpython/unicodeobject.h#L85-L244" target="_blank" rel="noopener noreferrer">unicodeobject.h</a>:</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">cpython/Include/cpython/unicodeobject.h</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Py_ssize_t ob_refcnt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PyTypeObject </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">ob_type</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> PyObject</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* --- Unicode Type ------------------------------------------------------- */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/* There are 4 forms of Unicode strings:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">       - compact ascii:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * structure = PyASCIIObject</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * test: PyUnicode_IS_COMPACT_ASCII(op)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * kind = PyUnicode_1BYTE_KIND</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * compact = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * ascii = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * ready = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * (length is the length of the utf8 and wstr strings)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * (data starts just after the structure)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * (since ASCII is decoded from UTF-8, the utf8 string are the data)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">       - compact:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * structure = PyCompactUnicodeObject</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * test: PyUnicode_IS_COMPACT(op) &amp;&amp; !PyUnicode_IS_ASCII(op)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * kind = PyUnicode_1BYTE_KIND, PyUnicode_2BYTE_KIND or</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           PyUnicode_4BYTE_KIND</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * compact = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * ready = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * ascii = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * utf8 is not shared with data</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * utf8_length = 0 if utf8 is NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * wstr is shared with data and wstr_length=length</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           if kind=PyUnicode_2BYTE_KIND and sizeof(wchar_t)=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           or if kind=PyUnicode_4BYTE_KIND and sizeof(wchar_t)=4</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * wstr_length = 0 if wstr is NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * (data starts just after the structure)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">       - legacy string, not ready:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * structure = PyUnicodeObject</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * test: kind == PyUnicode_WCHAR_KIND</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * length = 0 (use wstr_length)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * hash = -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * kind = PyUnicode_WCHAR_KIND</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * compact = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * ascii = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * ready = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * interned = SSTATE_NOT_INTERNED</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * wstr is not NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * data.any is NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * utf8 is NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * utf8_length = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">       - legacy string, ready:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * structure = PyUnicodeObject structure</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * test: !PyUnicode_IS_COMPACT(op) &amp;&amp; kind != PyUnicode_WCHAR_KIND</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * kind = PyUnicode_1BYTE_KIND, PyUnicode_2BYTE_KIND or</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           PyUnicode_4BYTE_KIND</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * compact = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * ready = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * data.any is not NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * utf8 is shared and utf8_length = length with data.any if ascii = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * utf8_length = 0 if utf8 is NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * wstr is shared with data.any and wstr_length = length</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           if kind=PyUnicode_2BYTE_KIND and sizeof(wchar_t)=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           or if kind=PyUnicode_4BYTE_KIND and sizeof(wchar_4)=4</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         * wstr_length = 0 if wstr is NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">       Compact strings use only one memory block (structure + characters),</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">       whereas legacy strings use one block for the structure and one block</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">       for characters.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">       Legacy strings are created by PyUnicode_FromUnicode() and</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">       PyUnicode_FromStringAndSize(NULL, size) functions. They become ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">       when PyUnicode_READY() is called.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">       See also _PyUnicode_CheckConsistency().</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PyObject_HEAD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Py_ssize_t length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">/* Number of code points in the string */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Py_hash_t hash</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">/* Hash value; -1 if not set */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           SSTATE_NOT_INTERNED (0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           SSTATE_INTERNED_MORTAL (1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           SSTATE_INTERNED_IMMORTAL (2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           If interned != SSTATE_NOT_INTERNED, the two references from the</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           dictionary to this object are *not* counted in ob_refcnt.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> interned</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Character size:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           - PyUnicode_WCHAR_KIND (0):</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">             * character type = wchar_t (16 or 32 bits, depending on the</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">               platform)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           - PyUnicode_1BYTE_KIND (1):</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">             * character type = Py_UCS1 (8 bits, unsigned)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">             * all characters are in the range U+0000-U+00FF (latin1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">             * if ascii is set, all characters are in the range U+0000-U+007F</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">               (ASCII), otherwise at least one character is in the range</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">               U+0080-U+00FF</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           - PyUnicode_2BYTE_KIND (2):</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">             * character type = Py_UCS2 (16 bits, unsigned)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">             * all characters are in the range U+0000-U+FFFF (BMP)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">             * at least one character is in the range U+0100-U+FFFF</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           - PyUnicode_4BYTE_KIND (4):</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">             * character type = Py_UCS4 (32 bits, unsigned)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">             * all characters are in the range U+0000-U+10FFFF</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">             * at least one character is in the range U+10000-U+10FFFF</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">         */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> kind</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Compact is with respect to the allocation scheme. Compact unicode</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           objects only require one memory block while non-compact objects use</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           one block for the PyUnicodeObject struct and another for its data</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           buffer. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> compact</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* The string only contains characters in the range U+0000-U+007F (ASCII)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           and the kind is PyUnicode_1BYTE_KIND. If ascii is set and compact is</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           set, use the PyASCIIObject structure. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> ascii</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* The ready flag indicates whether the object layout is initialized</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           completely. This means that this is either a compact object, or</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           the data pointer is filled out. The bit is redundant, and helps</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           to minimize the test in PyUnicode_IS_READY(). */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> ready</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Padding to ensure that PyUnicode_DATA() is always aligned to</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">           4 bytes (see issue #19537 on m68k). */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">24</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">wchar_t</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">wstr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">/* wchar_t representation (null-terminated) */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> PyASCIIObject</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* Non-ASCII strings allocated through PyUnicode_New use the</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   PyCompactUnicodeObject structure. state.compact is set, and the data</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   immediately follow the structure. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PyASCIIObject _base</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Py_ssize_t utf8_length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">/* Number of bytes in utf8, excluding the</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                                 * terminating \0. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">utf8</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">/* UTF-8 representation (null-terminated) */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Py_ssize_t wstr_length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">/* Number of code points in wstr, possible</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                                 * surrogates count as two code points. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> PyCompactUnicodeObject</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* Strings allocated through PyUnicode_FromUnicode(NULL, len) use the</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   PyUnicodeObject structure. The actual string data is initially in the wstr</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   block, and copied into the data block using _PyUnicode_Ready. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PyCompactUnicodeObject _base</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">union</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">any</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Py_UCS1 </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">latin1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Py_UCS2 </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">ucs2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Py_UCS4 </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">ucs4</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                     </span><span class="token comment" style="color:#999988;font-style:italic">/* Canonical, smallest-form Unicode buffer */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> PyUnicodeObject</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As it's known that each Unicode character in string is represented by a Unicode code point. In <code>PyUnicodeObject</code>, these code points are the encoding saved in the <code>data</code>, so <code>PyUnicodeObject</code> does not use the <code>UTF-8</code> encoding in the <code>data</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-a-unicode-string-object-is-created">How a Unicode string object is created?<a href="#how-a-unicode-string-object-is-created" class="hash-link" aria-label="Direct link to How a Unicode string object is created?" title="Direct link to How a Unicode string object is created?">​</a></h2><p>Invokes several internal C functions in such a sequence generally,</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PyObject </span><span class="token operator" style="color:#393A34">*</span><span class="token function" style="color:#d73a49">PyUnicode_FromStringAndSize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Py_ssize_t size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PyObject </span><span class="token operator" style="color:#393A34">*</span><span class="token function" style="color:#d73a49">PyUnicode_DecodeUTF8Stateful</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Py_ssize_t size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">errors</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Py_ssize_t </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">consumed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> PyObject </span><span class="token operator" style="color:#393A34">*</span><span class="token function" style="color:#d73a49">unicode_decode_utf8</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Py_ssize_t size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _Py_error_handler error_handler</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">errors</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Py_ssize_t </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">consumed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PyObject </span><span class="token operator" style="color:#393A34">*</span><span class="token function" style="color:#d73a49">PyUnicode_New</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Py_ssize_t size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Py_UCS4 maxchar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> Py_ssize_t </span><span class="token function" style="color:#d73a49">ascii_decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">start</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">end</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Py_UCS1 </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">dest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ch </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ucs2lib_utf8_decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> end</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> writer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">writer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pos</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ucs2lib.h</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name function" style="color:#d73a49">STRINGLIB</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">F</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa">             ucs2lib_</span><span class="token macro property punctuation" style="color:#393A34">##</span><span class="token macro property expression" style="color:#36acaa">F</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">STRINGLIB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">utf8_decode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">inptr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">end</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       STRINGLIB_CHAR </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">dest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       Py_ssize_t </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">outpos</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="inspect-unicode-string-object-in-python-3">Inspect Unicode string object in Python 3<a href="#inspect-unicode-string-object-in-python-3" class="hash-link" aria-label="Direct link to Inspect Unicode string object in Python 3" title="Direct link to Inspect Unicode string object in Python 3">​</a></h2><p>Let's examine the internal data struct of a string object in modern Python 3.</p><p>:::NOTE
You keep the character being referred otherwise the <code>GC</code> may release that memory,</p><p>Define the layout mapping <code>unicodeobject</code>,</p><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> ctypes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># It's recommended to go to see [python 3.10 unicodeobject.h](https://github.com/python/cpython/blob/3.10/Include/cpython/unicodeobject.h#L85-L244)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PyASCIIObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Structure</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># internal fields of the string object</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _fields_ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"ob_refcnt"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_long</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"ob_type"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_void_p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"length"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_ssize_t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"hash"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_ssize_t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"interned"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_uint</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"kind"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_uint</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"compact"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_uint</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"ascii"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_uint</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"ready"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_uint</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"_padding"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_uint</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">24</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"wstr"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">POINTER</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_wchar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__repr__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f"ob_refcnt[</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">ob_refcnt</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">], length[</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">length</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">], interned[</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">interned</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">], kind[</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">kind</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">], compact[</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">compact</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">], ascii[</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation builtin">ascii</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">], ready[</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">ready</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PyCompactUnicodeObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PyASCIIObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># internal fields of the string object</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _fields_ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"utf8_length"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_ssize_t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"utf8"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">POINTER</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_char</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"wstr_length"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_ssize_t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__repr__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__repr__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f" utf8_length[</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">utf8_length</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">], utf8[</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">utf8</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">], wstr_length[</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">wstr_length</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PyUnicodeObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PyCompactUnicodeObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">_Data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Union</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _fields_ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"any"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_void_p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"latin1"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">POINTER</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_uint8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"ucs2"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">POINTER</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_uint16</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"ucs4"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">POINTER</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _fields_ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"data"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _Data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>Type: compact ascii. Key fields: kind<!-- -->[1]<!-- -->, compact<!-- -->[1]<!-- -->, ascii<!-- -->[1]<!-- -->, ready<!-- -->[1]</li></ol><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> string_obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Hello, ctypes!"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> addr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string_obj</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> ascii_obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PyASCIIObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_address</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ascii_obj</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ob_refcnt</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> interned</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> compact</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">ascii</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ready</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># compact ascii: data starts just after the structure</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> data_addr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> addr </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PyASCIIObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cast</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_addr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_char_p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"data: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">value</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">b'Hello, ctypes!'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Type: compact <code>UCS-2</code>. Key fields: kind<!-- -->[1]<!-- -->, compact<!-- -->[1]<!-- -->, ascii<!-- -->[1]<!-- -->, ready<!-- -->[1]</li></ol><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> string_obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"你好!"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> addr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string_obj</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> ascii_obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PyASCIIObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_address</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ascii_obj</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ob_refcnt</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> interned</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> compact</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">ascii</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ready</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> compact_obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PyCompactUnicodeObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_address</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">compact_obj</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ob_refcnt</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> interned</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> compact</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">ascii</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ready</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> utf8_length</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> utf8</span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">LP_c_char </span><span class="token builtin">object</span><span class="token plain"> at </span><span class="token number" style="color:#36acaa">0x7f0c29297ac</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">0</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> wstr_length</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># compact: data starts just after the structure</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> data_addr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> addr </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PyCompactUnicodeObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cast</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_addr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">POINTER</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_uint16</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"data: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">0</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">0</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">#06x</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation builtin">chr</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">0</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20320</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x4f60</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 你</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"data: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">1</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">1</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">#06x</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation builtin">chr</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">1</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22909</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x597d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 好</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"data: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">2</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">2</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">#06x</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation builtin">chr</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">2</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">33</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x0021</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> !</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"data: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">3</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">3</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">#06x</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation builtin">chr</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">3</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x0000</span><span class="token punctuation" style="color:#393A34">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Type: compact <code>UCS-4</code>. Key fields: kind<!-- -->[4]<!-- -->, compact<!-- -->[1]<!-- -->, ascii<!-- -->[1]<!-- -->, ready<!-- -->[1]</li></ol><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> string_obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"你好🤨"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> addr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string_obj</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> ascii_obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PyASCIIObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_address</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ascii_obj</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ob_refcnt</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> interned</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> compact</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">ascii</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ready</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> compact_obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PyCompactUnicodeObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_address</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">compact_obj</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ob_refcnt</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> interned</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> compact</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">ascii</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ready</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> utf8_length</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> utf8</span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">LP_c_char </span><span class="token builtin">object</span><span class="token plain"> at </span><span class="token number" style="color:#36acaa">0x7f0c292b1ac</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">0</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> wstr_length</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># compact: data starts just after the structure</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> data_addr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> addr </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PyCompactUnicodeObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cast</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_addr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">POINTER</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c_uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"data: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">0</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">0</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">#010x</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation builtin">chr</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">0</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20320</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x00004f60</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 你</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"data: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">1</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">1</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">#010x</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation builtin">chr</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">1</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22909</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x0000597d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 好</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"data: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">2</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">2</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">#010x</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation builtin">chr</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">2</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">129320</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x0001f928</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 🤨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"data: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">3</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">3</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">#010x</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation builtin">chr</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation number" style="color:#36acaa">3</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x00000000</span><span class="token punctuation" style="color:#393A34">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>Type: legacy string. Key fields: kind<!-- -->[2]<!-- -->, compact<!-- -->[0]<!-- -->, ascii<!-- -->[0]</li></ol><p>I can't produce it in Python3.10, maybe you can try python2.7. </p><p>All codes are at <a target="_blank" href="/assets/files/UnicodeObject-c8a7f2462d8215115c04a01a2eb1a831.py">object layout</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2><p><a href="https://rushter.com/blog/python-strings-and-memory/" target="_blank" rel="noopener noreferrer">How Python saves memory when storing strings | Artem Golubin</a></p><p><a href="https://tenthousandmeters.com/blog/python-behind-the-scenes-9-how-python-strings-work/" target="_blank" rel="noopener noreferrer">Python behind the scenes #9: how Python strings work</a></p><p><a href="https://nedbatchelder.com/text/unipain.html" target="_blank" rel="noopener noreferrer">https://nedbatchelder.com/text/unipain.html</a></p><p><a href="https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/" target="_blank" rel="noopener noreferrer">https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="Python" term="Python"/>
        <category label="Unicode" term="Unicode"/>
        <category label="ctypes" term="ctypes"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki Cryptography]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-cryptography</id>
        <link href="https://liviaerxin.github.io/blog/wiki-cryptography"/>
        <updated>2023-12-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Wiki Cryptography]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="asymmetric-cryptography">Asymmetric cryptography<a href="#asymmetric-cryptography" class="hash-link" aria-label="Direct link to Asymmetric cryptography" title="Direct link to Asymmetric cryptography">​</a></h2><p>Also known as public-key cryptography</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="symmetric-cryptography">Symmetric cryptography<a href="#symmetric-cryptography" class="hash-link" aria-label="Direct link to Symmetric cryptography" title="Direct link to Symmetric cryptography">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="aes-128">AES-128<a href="#aes-128" class="hash-link" aria-label="Direct link to AES-128" title="Direct link to AES-128">​</a></h3><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="wiki" term="wiki"/>
        <category label="cryptography" term="cryptography"/>
        <category label="aes" term="aes"/>
        <category label="symmetric" term="symmetric"/>
        <category label="asymmetric" term="asymmetric"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki Unicode]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-unicode</id>
        <link href="https://liviaerxin.github.io/blog/wiki-unicode"/>
        <updated>2023-12-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Wiki UTF8]]></summary>
        <content type="html"><![CDATA[<p>The smallest unit of all texts we see on the screen is one character. But you may wonder about:</p><ol><li>How one character is displayed on the screen?</li><li>How one character is kept in memory or disk in binary format(0 or 1)?</li></ol><p>Let's dive into the <strong>Unicode</strong> to solve these questions.</p><p>In Unicode, a character maps to something called code point which is a magic number written as hex like: <code>U+20AC</code> and is still just a abstract layer.</p><table><thead><tr><th>Layer</th><th>Representation</th></tr></thead><tbody><tr><td>screen</td><td>glyph</td></tr><tr><td>abstraction</td><td>unicode character</td></tr><tr><td>abstraction</td><td>unicode code point</td></tr><tr><td>disk</td><td>variable-length bytes(1 to 4 bytes)</td></tr></tbody></table><p>How that code point is represented in memory or on disk?</p><p><code>UTF-8</code>, <code>UTF-16</code>, and <code>UTF-32</code> help translate unicode code point into binary data in 8-bit bytes which can be saved in disk or be transported in network.</p><p><code>UTF-8</code> is character-to-bytes(1 to 4 bytes) encoding standard across almost all system and application.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-a-character-is-displayed-on-the-screen">How a character is displayed on the screen?<a href="#how-a-character-is-displayed-on-the-screen" class="hash-link" aria-label="Direct link to How a character is displayed on the screen?" title="Direct link to How a character is displayed on the screen?">​</a></h3><p>software maps each character to its glyph(a grid of pixels), draw these pixels onto the screen.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-to-find-out-whether-the-file-uses-utf-8-or-ascii-or-other-encoding-schemas">How to find out whether the file uses UTF-8 or ASCII or other encoding schemas?<a href="#how-to-find-out-whether-the-file-uses-utf-8-or-ascii-or-other-encoding-schemas" class="hash-link" aria-label="Direct link to How to find out whether the file uses UTF-8 or ASCII or other encoding schemas?" title="Direct link to How to find out whether the file uses UTF-8 or ASCII or other encoding schemas?">​</a></h3><p>It's not always foolproof because there is no universal mandate or requirement that all files must specify their encoding. But it's a good practice to add BOM(Byte Order Mark) at the beginning of a UTF-8 encoded file.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="can-i-set-utf-16-as-locale-in-linux">Can I set UTF-16 as locale in Linux?<a href="#can-i-set-utf-16-as-locale-in-linux" class="hash-link" aria-label="Direct link to Can I set UTF-16 as locale in Linux?" title="Direct link to Can I set UTF-16 as locale in Linux?">​</a></h3><p>No, you cannot. Linux use <code>UTF-8</code> encoding which is compatible with <code>ASCII</code>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-happens-when-printing-a-utf-16-file-in-linux">What happens when printing a UTF-16 file in Linux?<a href="#what-happens-when-printing-a-utf-16-file-in-linux" class="hash-link" aria-label="Direct link to What happens when printing a UTF-16 file in Linux?" title="Direct link to What happens when printing a UTF-16 file in Linux?">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># &gt;&gt;&gt; '€'.encode("utf16") -&gt; b'\xff\xfe\xac '</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">xff</span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">xfe</span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">xac</span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">x20 </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> a.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ hexdump </span><span class="token parameter variable" style="color:#36acaa">-C</span><span class="token plain"> a.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000000  ff fe ac </span><span class="token number" style="color:#36acaa">20</span><span class="token plain">                                       </span><span class="token operator" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000004</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> a.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a.txt: Unicode text, UTF-16, little-endian text, with no line terminators</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> a.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">���</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">iconv</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> UTF-16LE </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> UTF-8 a.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">€</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-can-i-check-a-utf-8-file-has-a-bom">How can I check a UTF-8 file has a <code>BOM</code>?<a href="#how-can-i-check-a-utf-8-file-has-a-bom" class="hash-link" aria-label="Direct link to how-can-i-check-a-utf-8-file-has-a-bom" title="Direct link to how-can-i-check-a-utf-8-file-has-a-bom">​</a></h3><p>Create a file without <code>BOM</code>,</p><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">flush</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">b'\xe2\x82\xac'</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">'€'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'€'</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">b'\xe2\x82\xac'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> bom</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">b"\xef\xbb\xbf"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> f</span><span class="token operator" style="color:#393A34">=</span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a.txt"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"wb+"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">b'\xe2\x82\xac'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">flush</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> a.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a.txt: Unicode text, UTF-8 text, with no line terminators</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create a <code>BOM</code> adhere file,</p><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">seek</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">truncate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">b'\xef\xbb\xbf\xe2\x82\xac'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">flush</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> a.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a.txt: Unicode text, UTF-8 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">with BOM</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> text, with no line terminators</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ hexdump </span><span class="token parameter variable" style="color:#36acaa">-C</span><span class="token plain"> a.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000000  ef bb bf e2 </span><span class="token number" style="color:#36acaa">82</span><span class="token plain"> ac                                 </span><span class="token operator" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000006</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="why-we-can-copy-and-paste-the-unicode-characters-into-a-shell">Why we can copy and paste the unicode characters into a shell?<a href="#why-we-can-copy-and-paste-the-unicode-characters-into-a-shell" class="hash-link" aria-label="Direct link to Why we can copy and paste the unicode characters into a shell?" title="Direct link to Why we can copy and paste the unicode characters into a shell?">​</a></h3><p>When we do copying on the screen, we're copying the character's UTF8 encoded <strong>bytes</strong> which is in the memory, not the <strong>code point</strong>.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># b'\xe2\x82\xac'.decode() -&gt; '€'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">xe2</span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">x82</span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">xac </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> xclip </span><span class="token parameter variable" style="color:#36acaa">-selection</span><span class="token plain"> clipboard</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then you can use your mouse right click to copy to the shell and you will see <code>€</code>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-a-string-is-stored-in-memory-when-python-running">How a string is stored in memory when Python running?<a href="#how-a-string-is-stored-in-memory-when-python-running" class="hash-link" aria-label="Direct link to How a string is stored in memory when Python running?" title="Direct link to How a string is stored in memory when Python running?">​</a></h3><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unicode-in-json">Unicode in JSON<a href="#unicode-in-json" class="hash-link" aria-label="Direct link to Unicode in JSON" title="Direct link to Unicode in JSON">​</a></h2><p>JSON(natively a text format) support the unicode character to be escaped or not. When <strong>being escaped</strong>, the character will be replaced with the unicode code point, then which will be represented in 6 or 8 ascii characters occupying 6 or 8 bytes. When <strong>not being escaped</strong>, the character will be represented as just one unicode character as itself occupying 1 to 4 bytes if using UTF-8.</p><p>Escaping will cost more storage but will be compatible in ASCII-only environments, as escaping force all characters to be ASCII characters.</p><p>Case 1: Characters escaped,</p><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> b</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">b'{"text": "\u4f60\u597d"}'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">'text'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'你好'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">jsn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">'{"text": "\\u4f60\\u597d"}'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ensure_ascii</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">'{"text": "你好"}'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> f</span><span class="token operator" style="color:#393A34">=</span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a.txt"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"w+"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">24</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">flush</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> a.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"text"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"</span><span class="token string entity" style="color:#36acaa">\u4f60</span><span class="token string entity" style="color:#36acaa">\u597d</span><span class="token string" style="color:#e3116c">"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$  hexdump </span><span class="token parameter variable" style="color:#36acaa">-C</span><span class="token plain"> a.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000000  7b </span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">74</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">65</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">78</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">74</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> 3a  </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> 5c </span><span class="token number" style="color:#36acaa">75</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">34</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">66</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">36</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"text"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"</span><span class="token string entity" style="color:#36acaa">\u4f60</span><span class="token string" style="color:#e3116c">|</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">00000010  5c 75 35 39 37 64 22 7d                           |</span><span class="token string entity" style="color:#36acaa">\u597d</span><span class="token string" style="color:#e3116c">"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000018</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Case 2: Characters not escaped,</p><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">seek</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">truncate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ensure_ascii</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">14</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">flush</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> a.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"text"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"你好"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ hexdump </span><span class="token parameter variable" style="color:#36acaa">-C</span><span class="token plain"> a.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000000  7b </span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">74</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">65</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">78</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">74</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> 3a  </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> e4 bd a0 e5 a5 bd  </span><span class="token operator" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"text"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"......|</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">00000010  22 7d                                             |"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000012</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="base64">Base64<a href="#base64" class="hash-link" aria-label="Direct link to Base64" title="Direct link to Base64">​</a></h2><p>Base64 is binary-to-text encoding schema which make bytes data to be represented in ASCII characters to be human readable.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="python">Python<a href="#python" class="hash-link" aria-label="Direct link to Python" title="Direct link to Python">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="c-application">C application<a href="#c-application" class="hash-link" aria-label="Direct link to C application" title="Direct link to C application">​</a></h2><p>Let's have a look at how the <strong>Unicode</strong> is represented in a <code>C</code> executable file.</p><ol><li><code>char</code></li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> unicode.c </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOL</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">#include &lt;stdio.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">int main(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    printf("Hello, World 你好🤨!</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">");</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOL</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc unicode.c </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token plain"> unicode.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@112b172acfff:/workspaces/liviaerxin.github.io/</span><span class="token comment" style="color:#999988;font-style:italic"># hexdump -C unicode.out | grep -A3 "Hello, World"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00002000  01 00 02 00 </span><span class="token number" style="color:#36acaa">48</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">65</span><span class="token plain"> 6c 6c  6f 2c </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">57</span><span class="token plain"> 6f </span><span class="token number" style="color:#36acaa">72</span><span class="token plain"> 6c </span><span class="token number" style="color:#36acaa">64</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">Hello, World</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00002010  </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"> e4 bd a0 e5 a5 bd f0  9f a4 a8 </span><span class="token number" style="color:#36acaa">21</span><span class="token plain"> 00 00 00 00  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00002020  01 1b 03 3b </span><span class="token number" style="color:#36acaa">34</span><span class="token plain"> 00 00 00  05 00 00 00 00 f0 ff ff  </span><span class="token operator" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">;</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00002030  </span><span class="token number" style="color:#36acaa">68</span><span class="token plain"> 00 00 00 </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"> f0 ff ff  </span><span class="token number" style="color:#36acaa">90</span><span class="token plain"> 00 00 00 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> f0 ff ff  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">h</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. </span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.0</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token operator" style="color:#393A34">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>View each character's <strong>UTF8</strong> encoding respectively,</p><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># utf-8 encoding bytes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"你"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">b'\xe4\xbd\xa0'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"好"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">b'\xe5\xa5\xbd'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"🤨"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">b'\xf0\x9f\xa4\xa8'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So  <code>char</code> in the C output file stores the UTF8 encoding <strong>bytes</strong>, not the code points.</p><ol start="2"><li><code>wide char</code>,</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> unicode.c </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOL</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">#include &lt;stdio.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">#include &lt;wchar.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">#include &lt;locale.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">int main(int argc, char *argv[])</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    setlocale(LC_ALL, "C.UTF-8");</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    wchar_t* msg = L"Hello, World 你好🤨!";</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    printf("%ls</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">", msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOL</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@112b172acfff:/workspaces/liviaerxin.github.io/</span><span class="token comment" style="color:#999988;font-style:italic"># hexdump -C unicode.out</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00002000  01 00 02 00 00 00 00 00  </span><span class="token number" style="color:#36acaa">43</span><span class="token plain"> 2e </span><span class="token number" style="color:#36acaa">55</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">54</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">46</span><span class="token plain"> 2d </span><span class="token number" style="color:#36acaa">38</span><span class="token plain"> 00  </span><span class="token operator" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">C.UTF-8.</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00002010  </span><span class="token number" style="color:#36acaa">48</span><span class="token plain"> 00 00 00 </span><span class="token number" style="color:#36acaa">65</span><span class="token plain"> 00 00 00  6c 00 00 00 6c 00 00 00  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.e</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.l</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.l</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00002020  6f 00 00 00 2c 00 00 00  </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"> 00 00 00 </span><span class="token number" style="color:#36acaa">57</span><span class="token plain"> 00 00 00  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.,</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.W</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00002030  6f 00 00 00 </span><span class="token number" style="color:#36acaa">72</span><span class="token plain"> 00 00 00  6c 00 00 00 </span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> 00 00 00  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.r</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.l</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.d</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00002040  </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"> 00 00 00 </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> 4f 00 00  7d </span><span class="token number" style="color:#36acaa">59</span><span class="token plain"> 00 00 </span><span class="token number" style="color:#36acaa">28</span><span class="token plain"> f9 01 00  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.`O</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">Y</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token operator" style="color:#393A34">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># unicode code point</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">hex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">ord</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"H"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">'0x48'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">hex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">ord</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"你"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">'0x4f60'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">hex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">ord</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"好"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">'0x597d'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">hex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">ord</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"🤨"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">'0x1f928'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>wchar</code> in the C output file stores the <strong>code point</strong>(also in <strong>little endian</strong>), not the UTF8 encoding <strong>bytes</strong>.</p><p>In conclusion, <code>char</code> and <code>wchar</code> lead different encoding in <strong>C</strong>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2><p><a href="https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/" target="_blank" rel="noopener noreferrer">The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!) – Joel on Software</a></p><p><a href="https://nedbatchelder.com/text/unipain.html" target="_blank" rel="noopener noreferrer">Pragmatic Unicode | Ned Batchelder</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="wiki" term="wiki"/>
        <category label="utf-8" term="utf-8"/>
        <category label="encode" term="encode"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki Development Environment]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-dev-environment</id>
        <link href="https://liviaerxin.github.io/blog/wiki-dev-environment"/>
        <updated>2023-12-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Wiki Dev Environment]]></summary>
        <content type="html"><![CDATA[<p>Here are some experiences that I have gotten to prepare a best-practice development environment for projects. I would like to update to keep up with the latest tech stacks.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="vs-code">VS Code<a href="#vs-code" class="hash-link" aria-label="Direct link to VS Code" title="Direct link to VS Code">​</a></h2><p>As of now, the <code>VS Code</code> is the most popular IDE among developers. Absolutely, for me, it's my first choice and favorite developing tool.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="dev-container">Dev Container<a href="#dev-container" class="hash-link" aria-label="Direct link to Dev Container" title="Direct link to Dev Container">​</a></h3><p><a href="https://code.visualstudio.com/docs/devcontainers/containers" target="_blank" rel="noopener noreferrer">Developing inside a Container using Visual Studio Code Remote Development</a></p><p>What is Dev Container?</p><p>A "Dev Container" typically refers to a development environment that is containerized. Containers are lightweight, portable, and consistent environments that encapsulate an application and its dependencies. They provide a standardized way to package and run software across different environments, ensuring that the application behaves consistently regardless of where it is deployed.</p><p>The benefits of using Dev Containers include:</p><ol><li>Consistency: Developers work in the same environment, reducing the chances of environment-related issues.</li><li>Isolation: Dev Containers are isolated from the host system, preventing conflicts with other software installed on the developer's machine.</li><li>Reproducibility: The development environment can be easily recreated by anyone using the container specifications.</li><li>Portability: Dev Containers can be easily shared, allowing developers to work on the same project with minimal setup.</li></ol><p>Best ways to customize the environment in Dev containers?</p><ul><li><a href="https://containers.dev/guide/dockerfile" target="_blank" rel="noopener noreferrer">Using Images, Dockerfile, and Docker Compose</a>:love_you_gesture:</li><li><a href="https://containers.dev/features" target="_blank" rel="noopener noreferrer">Using Features</a></li><li><a href="https://containers.dev/implementors/json_reference/#lifecycle-scripts" target="_blank" rel="noopener noreferrer">Using lifecycle scripts</a></li></ul><p>How to Write Dockerfile for Dev containers?</p><p>You can refer to this repo <a href="https://github.com/devcontainers/images" target="_blank" rel="noopener noreferrer">GitHub - devcontainers/images: Repository for pre-built dev container images published under mcr.microsoft.com/devcontainers</a></p><p>What magics does the <code>Dev Containers</code> extension do when starting?</p><ol><li>Hook a default startup command <code>while sleep 1000; do :; done</code> to keep the container not exit. Disable this behavior by setting <code>overrideCommand: false</code>.</li></ol><p>How to run a container inside of Dev containers?</p><ul><li><a href="https://github.com/microsoft/vscode-dev-containers/tree/main/containers/docker-in-docker" target="_blank" rel="noopener noreferrer">Docker-in-Docker</a></li><li><a href="https://github.com/microsoft/vscode-dev-containers/tree/main/containers/docker-from-docker" target="_blank" rel="noopener noreferrer">Docker-from-Docker</a></li></ul><p>For instance, I use the <strong>Docker-in-Docker</strong> method to always test/run Docker containers inside of Dev containers.  </p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cc">C/C++<a href="#cc" class="hash-link" aria-label="Direct link to C/C++" title="Direct link to C/C++">​</a></h3><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="wiki" term="wiki"/>
        <category label="dev-environment" term="dev-environment"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki Network]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-network</id>
        <link href="https://liviaerxin.github.io/blog/wiki-network"/>
        <updated>2023-11-29T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Wiki Proxy]]></summary>
        <content type="html"><![CDATA[<p>How does <strong>Wireshark</strong> sniff the network traffic on OSX?</p><p>On OSX, <strong>Wireshark</strong> use <code>/dev/bpf*</code> which is the OSX system's packet capture devices.
On Linux, <strong>Wireshark</strong> use <code>socket</code> to capture the network interface such as <code>eth0</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tcp-handshake">TCP handshake<a href="#tcp-handshake" class="hash-link" aria-label="Direct link to TCP handshake" title="Direct link to TCP handshake">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tls-handshake">TLS handshake<a href="#tls-handshake" class="hash-link" aria-label="Direct link to TLS handshake" title="Direct link to TLS handshake">​</a></h2><p><a href="https://www.cloudflare.com/learning/ssl/what-happens-in-a-tls-handshake/" target="_blank" rel="noopener noreferrer">https://www.cloudflare.com/learning/ssl/what-happens-in-a-tls-handshake/</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="man-in-the-middlemitm-or-proxy">Man-in-the-middle(MitM) or Proxy<a href="#man-in-the-middlemitm-or-proxy" class="hash-link" aria-label="Direct link to Man-in-the-middle(MitM) or Proxy" title="Direct link to Man-in-the-middle(MitM) or Proxy">​</a></h2><p><a href="https://httptoolkit.com/docs/guides/android/" target="_blank" rel="noopener noreferrer">https://httptoolkit.com/docs/guides/android/</a></p><p><a href="https://docs.mitmproxy.org/stable/concepts-howmitmproxyworks/" target="_blank" rel="noopener noreferrer">https://docs.mitmproxy.org/stable/concepts-howmitmproxyworks/</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="https-proxy">HTTPS proxy<a href="#https-proxy" class="hash-link" aria-label="Direct link to HTTPS proxy" title="Direct link to HTTPS proxy">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http-proxy">HTTP proxy<a href="#http-proxy" class="hash-link" aria-label="Direct link to HTTP proxy" title="Direct link to HTTP proxy">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="socks-proxy">SOCKS proxy<a href="#socks-proxy" class="hash-link" aria-label="Direct link to SOCKS proxy" title="Direct link to SOCKS proxy">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="wiki" term="wiki"/>
        <category label="network" term="network"/>
        <category label="proxy" term="proxy"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki Assembly]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-assembly</id>
        <link href="https://liviaerxin.github.io/blog/wiki-assembly"/>
        <updated>2023-11-22T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Wiki Assembly]]></summary>
        <content type="html"><![CDATA[<p>Foam includes note templates!
This allows you to easily create notes that have similar structure without having to use copy/paste :)</p><p>Templates support the <a href="https://code.visualstudio.com/docs/editor/userdefinedsnippets#_snippet-syntax" target="_blank" rel="noopener noreferrer">VS Code's Snippet Syntax</a>, which means you can:</p><ul><li>add variables to the newly created note</li><li>add tabstop to automatically navigate to the key parts of the note, just like a form
Below you can see an example showing a todo list and a timestamp.</li></ul><div class="language-asm codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">print.asm</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-asm codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">; print.asm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; nasm -f elf64 print.asm &amp;&amp; ld print.o &amp;&amp; ./a.out ; echo $?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; objdump -d a.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">section .data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message db, "Welcome,   to, Segmentation, Faults!, "</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">section .text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">global _start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_printMessage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov rax, 4       ; System call number for sys_write</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov rbx, 1       ; File descriptor 1 is stdout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov rcx, message ; Pointer to the message string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov rdx, 32      ; Length of the message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int 0x80         ; Call kernel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ret ; Return from the function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_exit:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov rax, 1 ; System call number for sys_exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov rbx, 0 ; Exit code 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int 0x80   ; Call kernel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_start:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    call _printMessage ; Call the print message function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov  rax, 1        ; System call number for sys_exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov  rbx, 1        ; Exit code 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int  0x80          ; Call kernel</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-asm codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">sum.asm</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-asm codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">; sum.asm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; nasm -f elf64 sum.asm &amp;&amp; ld sum.o &amp;&amp; ./a.out ; echo $?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; objdump -d a.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">section .text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">global _start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; Function to calculate the sum of two integers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sum:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov rax, rdi   ; Move the first argument (a) to rax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add rax, rsi   ; Add the second argument (b) to rax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ret            ; Return with the result in rax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_start:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ; Example usage of the sum function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov rdi, 5     ; First argument: a = 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov rsi, 7     ; Second argument: b = 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    call sum       ; Call the sum function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ; The result is now in rax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ; It can be used or printed, depending on the context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov rdi, rax   ; Exit code 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ; Exit the program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov rax, 60    ; System call number for sys_exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    syscall        ; Make the system call</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2><p><a href="https://cs.lmu.edu/~ray/notes/nasmtutorial/" target="_blank" rel="noopener noreferrer">https://cs.lmu.edu/~ray/notes/nasmtutorial/</a></p><p><a href="https://cs.brown.edu/courses/cs033/docs/guides/x64_cheatsheet.pdf" target="_blank" rel="noopener noreferrer">https://cs.brown.edu/courses/cs033/docs/guides/x64_cheatsheet.pdf</a></p><p><a href="http://6.s081.scripts.mit.edu/sp18/x86-64-architecture-guide.html" target="_blank" rel="noopener noreferrer">http://6.s081.scripts.mit.edu/sp18/x86-64-architecture-guide.html</a></p><p><a href="https://cs61.seas.harvard.edu/site/2018/Asm1/" target="_blank" rel="noopener noreferrer">https://cs61.seas.harvard.edu/site/2018/Asm1/</a></p><p><a href="https://web.stanford.edu/class/cs107/guide/x86-64.html" target="_blank" rel="noopener noreferrer">https://web.stanford.edu/class/cs107/guide/x86-64.html</a></p><p><a href="https://www.cs.virginia.edu/~evans/cs216/guides/x86.html" target="_blank" rel="noopener noreferrer">https://www.cs.virginia.edu/~evans/cs216/guides/x86.html</a></p><p><a href="https://www.cs.uaf.edu/2016/fall/cs301/lecture/09_28_machinecode.html" target="_blank" rel="noopener noreferrer">https://www.cs.uaf.edu/2016/fall/cs301/lecture/09_28_machinecode.html</a></p><p><a href="https://p403n1x87.github.io/getting-started-with-x86-64-assembly-on-linux.html" target="_blank" rel="noopener noreferrer">https://p403n1x87.github.io/getting-started-with-x86-64-assembly-on-linux.html</a></p><p><a href="https://flint.cs.yale.edu/cs421/papers/x86-asm/asm.html" target="_blank" rel="noopener noreferrer">https://flint.cs.yale.edu/cs421/papers/x86-asm/asm.html</a></p><p><a href="https://nickdesaulniers.github.io/blog/2014/04/18/lets-write-some-x86-64/" target="_blank" rel="noopener noreferrer">https://nickdesaulniers.github.io/blog/2014/04/18/lets-write-some-x86-64/</a></p><p><a href="https://pacman128.github.io/static/pcasm-book.pdf" target="_blank" rel="noopener noreferrer">https://pacman128.github.io/static/pcasm-book.pdf</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="Wiki Assembly" term="Wiki Assembly"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Celery]]></title>
        <id>https://liviaerxin.github.io/blog/python-celery</id>
        <link href="https://liviaerxin.github.io/blog/python-celery"/>
        <updated>2023-10-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[wiki celery]]></summary>
        <content type="html"><![CDATA[<p>What is the <strong>Celery</strong>? <strong>Celery</strong> is a simple, flexible, and reliable distributed system to process vast amounts of tasks. In practice,</p><ol><li><strong>Celery</strong> can be used to execute long-running jobs behind web servers to let your servers handle requests/responses in non-blocking ways.</li><li><strong>Celery</strong> can do scheduled jobs.</li></ol><p>Here are some production-ready use cases for <strong>Celery</strong> I have encountered.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="celery-worker">Celery worker<a href="#celery-worker" class="hash-link" aria-label="Direct link to Celery worker" title="Direct link to Celery worker">​</a></h2><p>Celery worker Mechanism:</p><p>To start a Celery worker will start a main process that will spawn child processes or threads(based on the <code>--pool</code> option): the main process will handle receiving task/sending task result the and these child processes/threads(a.k.a <code>execution pool</code>) execute the actual tasks.</p><p>To increase the number of child processes/threads(via <code>--concurrency</code> option) will increase the number of tasks the Celery worker can process in parallel. More processes are usually better.</p><p>However, in reality, there are some situations in following modes:</p><ol><li>Run N workers with M child processes each.</li><li>Run 1 worker with N*M child processes.</li><li>Run N workers with only 1 main process each.</li><li>Run N workers with M child threads each.</li><li>Run 1 worker with N*M child threads.</li></ol><p>Whether to use <code>processes</code> or <code>threads</code> depends on what your tasks will actually do and whether they are GPU bound or IO bound.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="worker-procedure">Worker procedure<a href="#worker-procedure" class="hash-link" aria-label="Direct link to Worker procedure" title="Direct link to Worker procedure">​</a></h3><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> celery </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Celery</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Celery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@app</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">task</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@app</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">task</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mul</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>@app.task</code> decoration will use <code>Task</code> class in default if you don't specify explicitly.</p><p>When a worker start by <code>celery -A tasks worker</code>,</p><ol><li>Worker will spawn child Processes, the number of child Processes is based on CPU cores in default.</li><li>Each child Process will initialize a <code>Task</code> instance for every decorated function. Here <code>add()</code> has its own <code>Task</code> instance and <code>mul()</code> also has its own <code>Task</code> instance respectively.</li></ol><p>When a client call <code>add.delay(1, 2)</code>,</p><ol><li>Worker receive a Task in Queue.</li><li>Worker assign the Task to a child Process, which will determine to use which <code>Task</code> instance to execute. A <code>Task</code> instance is initialized in each decorated function and registered with a task name using function name in default(such as <code>add</code>, <code>mul</code>). Here is the <code>Task</code> instance with name <code>add()</code> should be picked up to run the task.</li><li>When be decorated in <code>add()</code>, the <code>Task</code> instance <code>run()</code> method will be <code>add()</code> original function body. The child Process will use the <code>Task</code> instance's <code>__call__()</code> method to run task, and <code>__call__()</code> will invoke the <code>run()</code> within itself.  </li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="option---poolprefork">Option --pool=prefork<a href="#option---poolprefork" class="hash-link" aria-label="Direct link to Option --pool=prefork" title="Direct link to Option --pool=prefork">​</a></h3><p>It spawns multiple processes.</p><p>When start a Celery worker via <code>celery -A tasks worker --loglevel INFO --concurrency 3 --pool=prefork</code>, what will happen underneath?</p><ol><li>Celery start a main process.</li><li>The main process will then spawn 3 child processes. The default <code>concurrency</code> is based on the number of <code>CPU</code> available on the machine. The default <code>pool</code> is <code>prefork</code> which uses <code>multiprocessing</code> library from Python.</li><li>These child processes will execute the tasks assigned from the main process.</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="option---pooleventlet-or---poolgevent">Option --pool=eventlet or --pool=gevent<a href="#option---pooleventlet-or---poolgevent" class="hash-link" aria-label="Direct link to Option --pool=eventlet or --pool=gevent" title="Direct link to Option --pool=eventlet or --pool=gevent">​</a></h3><p>It creates multiple threads.</p><p>When start a Celery worker via <code>celery -A tasks worker --loglevel INFO --concurrency 3 --pool=eventlet</code></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="option---poolsolo">Option --pool=solo<a href="#option---poolsolo" class="hash-link" aria-label="Direct link to Option --pool=solo" title="Direct link to Option --pool=solo">​</a></h3><p>It will not create any child process or thread to run task. The tasks will be executed in main process, which causes the main process to be blocked.</p><p>It seems as: Run 1 worker with 1 process, however <code>--concurrency</code> will not take any effect when <code>--pool=solo</code>!</p><p>When coming to a microservices environment, this option becomes useful and practical especially running CPU intensive tasks. The container manager such as <code>Docker</code> can increase the task processing capabilities through managing the number of worker containers instead of managing the number of pool processes per worker.</p><p>When start a Celery worker via <code>celery -A tasks worker --loglevel INFO --pool=solo</code></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="celery-task">Celery Task<a href="#celery-task" class="hash-link" aria-label="Direct link to Celery Task" title="Direct link to Celery Task">​</a></h2><p>What's the lifecycle of a Celery task from the time it's created to the it's done?</p><p>Here we analyze a simple task with all <strong>Celery</strong> configuration in default and use <strong>Redis</strong> as <strong>broker</strong> and <strong>backend</strong></p><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@app</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">task</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">acks_late</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">wait</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">secs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"wait() - Start, secs[</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">secs</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">]s"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">secs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"wait() - Done, secs[</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">secs</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">]s"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f"wait() - Done, secs[</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">secs</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">]s"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>When a client call <code>wait.delay(60)</code>, this task is added to a default queue named <code>celery</code> in <strong>Redis</strong>.</li><li><strong>Celery</strong> worker polls the queue and pulls the task, then it removes the task from the queue and moves it a special queue named <code>unacked</code> in <strong>Redis</strong>.</li><li>The worker holds on to the task(<code>prefetch</code>), until it has abilities to process the task.</li><li>Once after The worker successfully processes the task, it <code>acks</code> now (<code>acks_late=True</code>) that it removes the task from the <code>unacked</code> queue in <strong>Redis</strong>.<ul><li>If <code>acks_late=False</code>, the worker <code>acks</code> before processing the task.</li></ul></li></ol><p>Let's get more concrete understanding in practices.</p><ol><li>First, let's enter a <code>redis-cli</code> interactive mode with the newly launched application,</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:637</span><span class="token operator file-descriptor important" style="color:#393A34">9</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> KEYS *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_kombu.binding.email_service"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_kombu.binding.ml_service"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_kombu.binding.celery.pidbox"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_kombu.binding.celeryev"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_kombu.binding.celery"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>At the beginning, you can see that the <code>celery</code> key and the <code>unacked</code> key do not exist in <strong>Redis</strong>.</p><ol start="2"><li>Then, let's call <code>wait.delay(60)</code> multiple times at the same time,</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:637</span><span class="token operator file-descriptor important" style="color:#393A34">9</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> KEYS *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"unacked_index"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_kombu.binding.email_service"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_kombu.binding.celery.pidbox"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"celery-task-meta-3d6b2028-6ee6-4e2c-85f1-cbeba644aca5"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"celery"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_kombu.binding.celeryev"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_kombu.binding.celery"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_kombu.binding.ml_service"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"celery-task-meta-e5a1b7db-f1ad-4d3e-b2b9-3b7de8f8c87e"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"unacked"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:637</span><span class="token operator file-descriptor important" style="color:#393A34">9</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> TYPE unacked</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">hash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:637</span><span class="token operator file-descriptor important" style="color:#393A34">9</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> TYPE celery</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">list</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After we create tasks, the <code>celery</code> key of <code>list</code> type and the <code>unacked</code> key of <code>hash</code> type are both created in <strong>Redis</strong>.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:637</span><span class="token operator file-descriptor important" style="color:#393A34">9</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> LRANGE celery </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"{</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">body</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">W1s2MC4wXSwge30sIHsiY2FsbGJhY2tzIjogbnVsbCwgImVycmJhY2tzIjogbnVsbCwgImNoYWluIjogbnVsbCwgImNob3JkIjogbnVsbH1d</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">content-encoding</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">utf-8</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">content-type</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">application/json</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">headers</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: {</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">lang</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">py</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">task</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">app.celery_app.tasks.wait</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">id</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">da959152-1f45-4846-99e4-5205d30c1be7</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">shadow</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">eta</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">expires</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">group</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">group_index</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">retries</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: 0, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">timelimit</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: [null, null], </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">root_id</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">da959152-1f45-4846-99e4-5205d30c1be7</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">parent_id</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">argsrepr</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">(60.0,)</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">kwargsrepr</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">{}</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">origin</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">gen11@a840cdd15b13</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">ignore_result</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: false}, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">properties</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: {</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">correlation_id</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">da959152-1f45-4846-99e4-5205d30c1be7</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">reply_to</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">4b0f2f2d-aee2-3349-81ab-e95a1f0e9f02</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">delivery_mode</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: 2, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">delivery_info</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: {</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">exchange</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">routing_key</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">celery</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">}, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">priority</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: 0, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">body_encoding</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">base64</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">delivery_tag</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">d657c66d-4e4b-483d-9fbe-fe4b5b9541e7</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">}}"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"{</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">body</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">W1s2MC4wXSwge30sIHsiY2FsbGJhY2tzIjogbnVsbCwgImVycmJhY2tzIjogbnVsbCwgImNoYWluIjogbnVsbCwgImNob3JkIjogbnVsbH1d</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">content-encoding</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">utf-8</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">content-type</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">application/json</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">headers</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: {</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">lang</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">py</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">task</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">app.celery_app.tasks.wait</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">id</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">1ddc3c5e-fa33-4d12-aa3f-c3d13581a4c8</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">shadow</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">eta</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">expires</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">group</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">group_index</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">retries</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: 0, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">timelimit</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: [null, null], </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">root_id</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">1ddc3c5e-fa33-4d12-aa3f-c3d13581a4c8</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">parent_id</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">argsrepr</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">(60.0,)</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">kwargsrepr</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">{}</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">origin</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">gen11@a840cdd15b13</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">ignore_result</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: false}, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">properties</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: {</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">correlation_id</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">1ddc3c5e-fa33-4d12-aa3f-c3d13581a4c8</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">reply_to</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">4b0f2f2d-aee2-3349-81ab-e95a1f0e9f02</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">delivery_mode</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: 2, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">delivery_info</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: {</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">exchange</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">routing_key</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">celery</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">}, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">priority</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: 0, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">body_encoding</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">base64</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">delivery_tag</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">927d1ac0-3709-4e23-8c0f-037713c55217</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">}}"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:637</span><span class="token operator file-descriptor important" style="color:#393A34">9</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> HGETALL unacked</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"927d1ac0-3709-4e23-8c0f-037713c55217"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[{</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">body</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">W1s2MC4wXSwge30sIHsiY2FsbGJhY2tzIjogbnVsbCwgImVycmJhY2tzIjogbnVsbCwgImNoYWluIjogbnVsbCwgImNob3JkIjogbnVsbH1d</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">content-encoding</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">utf-8</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">content-type</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">application/json</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">headers</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: {</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">lang</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">py</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">task</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">app.celery_app.tasks.wait</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">id</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">1ddc3c5e-fa33-4d12-aa3f-c3d13581a4c8</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">shadow</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">eta</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">expires</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">group</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">group_index</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">retries</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: 0, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">timelimit</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: [null, null], </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">root_id</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">1ddc3c5e-fa33-4d12-aa3f-c3d13581a4c8</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">parent_id</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">argsrepr</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">(60.0,)</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">kwargsrepr</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">{}</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">origin</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">gen11@a840cdd15b13</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">ignore_result</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: false}, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">properties</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: {</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">correlation_id</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">1ddc3c5e-fa33-4d12-aa3f-c3d13581a4c8</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">reply_to</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">4b0f2f2d-aee2-3349-81ab-e95a1f0e9f02</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">delivery_mode</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: 2, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">delivery_info</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: {</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">exchange</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">routing_key</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">celery</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">}, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">priority</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: 0, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">body_encoding</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">base64</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">delivery_tag</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">927d1ac0-3709-4e23-8c0f-037713c55217</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">}}, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">celery</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">]"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Wait for all these tasks to be done</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:637</span><span class="token operator file-descriptor important" style="color:#393A34">9</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> KEYS *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_kombu.binding.email_service"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"celery-task-meta-da959152-1f45-4846-99e4-5205d30c1be7"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"celery-task-meta-815587f5-782d-454a-8498-b4ebbb91abd8"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_kombu.binding.celery.pidbox"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"celery-task-meta-3d6b2028-6ee6-4e2c-85f1-cbeba644aca5"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_kombu.binding.celeryev"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_kombu.binding.celery"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"_kombu.binding.ml_service"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"celery-task-meta-1ddc3c5e-fa33-4d12-aa3f-c3d13581a4c8"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"celery-task-meta-e5a1b7db-f1ad-4d3e-b2b9-3b7de8f8c87e"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After all tasks are done successfully, both keys: <code>celery</code> and <code>unacked</code> are removed from <strong>Redis</strong>.</p><p>The result of a task is stored in <code>celery-task-meta-{{uuid}}</code> key.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:637</span><span class="token operator file-descriptor important" style="color:#393A34">9</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> TYPE celery-task-meta-da959152-1f45-4846-99e4-5205d30c1be7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:637</span><span class="token operator file-descriptor important" style="color:#393A34">9</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> GET celery-task-meta-da959152-1f45-4846-99e4-5205d30c1be7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">"{</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">status</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">SUCCESS</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">result</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">wait() - Done, secs[60.0]s</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">traceback</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: null, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">children</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: [], </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">date_done</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">2023-11-07T07:54:16.954872</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">, </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">task_id</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">da959152-1f45-4846-99e4-5205d30c1be7</span><span class="token string entity" style="color:#36acaa">\"</span><span class="token string" style="color:#e3116c">}"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="serve-machine-learning-model">Serve machine learning model<a href="#serve-machine-learning-model" class="hash-link" aria-label="Direct link to Serve machine learning model" title="Direct link to Serve machine learning model">​</a></h2><p>Properly running a machine learning model in task is different with running other jobs as we need avoiding loading ML model every time we run tasks. So it is stateful that we should keep something in worker.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="different-workers-for-different-tasks">Different workers for different tasks<a href="#different-workers-for-different-tasks" class="hash-link" aria-label="Direct link to Different workers for different tasks" title="Direct link to Different workers for different tasks">​</a></h2><p>Assuming a such situation:
There is a worker <code>x</code> to only handle email tasks and a worker <code>y</code> to only handle machine learning related tasks.</p><p>These are configurations for project <code>x</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#Celery routing.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app.conf.task_routes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'celery_app.email_tasks.*'</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">'queue'</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'email_service'</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#Run celery.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">celery </span><span class="token parameter variable" style="color:#36acaa">-A</span><span class="token plain"> celery_app.email_tasks:app worker </span><span class="token parameter variable" style="color:#36acaa">-l</span><span class="token plain"> info </span><span class="token parameter variable" style="color:#36acaa">-E</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-Q</span><span class="token plain"> email_service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These are configurations for project <code>y</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#Celery routing.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app.conf.task_routes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">'celery_app.ml_tasks.*'</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">'queue'</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ml_service'</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#Run celery.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">celery </span><span class="token parameter variable" style="color:#36acaa">-A</span><span class="token plain"> celery_app.ml_tasks:app worker </span><span class="token parameter variable" style="color:#36acaa">-l</span><span class="token plain"> info </span><span class="token parameter variable" style="color:#36acaa">-E</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-Q</span><span class="token plain"> ml_service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Details in explanation:</p><ol><li>Different workers handle their own queues for separate tasks.</li></ol><p>Look at <a href="https://github.com/liviaerxin/fastapi-celery-ml" target="_blank" rel="noopener noreferrer">https://github.com/liviaerxin/fastapi-celery-ml</a> for see a complete <strong>Celery</strong> project.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="code-analysis">Code Analysis<a href="#code-analysis" class="hash-link" aria-label="Direct link to Code Analysis" title="Direct link to Code Analysis">​</a></h2><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> celery </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> signature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sig </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> add</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sig</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">freeze</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="known-issues">Known issues<a href="#known-issues" class="hash-link" aria-label="Direct link to Known issues" title="Direct link to Known issues">​</a></h2><p><a href="https://github.com/celery/celery/issues/2146" target="_blank" rel="noopener noreferrer">Result state is always PENDING in windows</a></p><blockquote><p>FIX: use <code>--pool=solo</code> instead of <code>--pool=prefork</code> in default. <code>multiprocessing</code> may cause this problem as its some defect in windows!</p></blockquote><p><a href="https://github.com/celery/celery/issues/5935" target="_blank" rel="noopener noreferrer">Long running jobs redelivering after broker visibility timeout with celery and redis · Issue #5935 · celery/celery · GitHub</a>
<a href="https://github.com/celery/celery/issues/3430" target="_blank" rel="noopener noreferrer">Long tasks are executed multiple times · Issue #3430 · celery/celery · GitHub</a></p><p><a href="https://github.com/celery/celery/issues/3768" target="_blank" rel="noopener noreferrer">No Worker Heartbeat With Solo Pool · Issue #3768 · celery/celery · GitHub</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2><p><a href="https://docs.celeryq.dev/en/latest/index.html#" target="_blank" rel="noopener noreferrer">Celery - Distributed Task Queue — Celery 5.3.4 documentation</a></p><p><a href="https://celery.school/post/2023-10-20_execution-pools/" target="_blank" rel="noopener noreferrer">Celery Execution Pools: What is it all about?</a></p><p><a href="https://celery.school/posts/celery-pool-types-1-introduction/" target="_blank" rel="noopener noreferrer">Celery Execution Pool: The worker and the pool - separation of concerns</a></p><p><a href="https://towardsdatascience.com/deploying-ml-models-in-production-with-fastapi-and-celery-7063e539a5db" target="_blank" rel="noopener noreferrer">Serving ML Models in Production with FastAPI and Celery | by Jonathan Readshaw | Towards Data Science</a></p><p><a href="https://github.com/liviaerxin/FastAPISpamDetection" target="_blank" rel="noopener noreferrer">GitHub - liviaerxin/FastAPISpamDetection: Code for my Medium article: "How you can quickly deploy your ML models with&nbsp;FastAPI"</a></p><p><a href="https://engineering.instawork.com/celery-eta-tasks-demystified-424b836e4e94" target="_blank" rel="noopener noreferrer">Celery ETA Tasks Demystified. At Instawork, we use Celery to queue… | by Oleg Pesok | Instawork Engineering</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="wiki" term="wiki"/>
        <category label="celery" term="celery"/>
        <category label="best practice" term="best practice"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Generate self-signed SSL/TLS certificate for local IP address or local domain]]></title>
        <id>https://liviaerxin.github.io/blog/certificate-sign</id>
        <link href="https://liviaerxin.github.io/blog/certificate-sign"/>
        <updated>2023-10-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Self Signed Certificate]]></summary>
        <content type="html"><![CDATA[<p>In real life, when we build our website and make it public, some paid or free CA(Certificate Authority) will help us sign a certificate for our website domain and enable SSL/TLS connections from user browser to our server.</p><p>For secure reasons, the browser will only admit those servers's certificates signed from authorized CA, of which certificate is kept in your host system trust store.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>One of the most popular Certificate Authorities is <a href="https://letsencrypt.org/" target="_blank" rel="noopener noreferrer">Let's Encrypt</a>, which is a free and non-profit CA.</p></div></div><p>Here is an example, we will generate a local server certificate that is signed by a local CA. Finally, let Chrome can visit our local website without security warning.</p><p>In brief, these steps we need to sign local sever certificate actually simulate how those CA sign certificates for public servers, as following:</p><ol><li>Create a local <strong>Root CA</strong>.</li><li>Create a <strong>CSR</strong>(Certificate Signing Request) file for local server <code>127.0.0.1</code>.</li><li>The local <strong>Root CA</strong> use the <strong>CSR</strong> to generate a <strong>certificate</strong> for local server <code>127.0.0.1</code>.</li><li>Install the local <strong>Root CA</strong> into our system(Windows, Ubuntu or macOS) trust store.</li><li>Run a simple <strong>https</strong> server to test local server <strong>certificate</strong>.</li></ol><p>For those official CA, they have to validate the domain is owned by the server before the <code>step 3</code>, and we can ignore <code>step 4</code> as they are already installed into the system or the browser trust store.</p><p>And there is nice picture from <a href="https://www.linkedin.com/pulse/how-create-your-own-self-signed-root-certificate-shankar-gomare/" target="_blank" rel="noopener noreferrer">How to create your own self-signed root Certificate Authority(CA)</a> to show the relationship between <code>CA</code>, <code>server</code> and <code>browser</code>.</p><p><img loading="lazy" src="https://media.licdn.com/dms/image/C4E12AQGJ5hl3wTAyFg/article-inline_image-shrink_400_744/0/1589170084171?e=1701907200&amp;v=beta&amp;t=FaVSM-fIy4dc-SIftGYEuUc7GONcMLphssfteUKoWuA" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="create-root-certificate-authorityca">Create root Certificate Authority(CA)<a href="#create-root-certificate-authorityca" class="hash-link" aria-label="Direct link to Create root Certificate Authority(CA)" title="Direct link to Create root Certificate Authority(CA)">​</a></h2><p>Generate <code>RootCA.key</code> and <code>RootCA.crt</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl req </span><span class="token parameter variable" style="color:#36acaa">-x509</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-nodes</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-new</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-sha256</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-days</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1024</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-newkey</span><span class="token plain"> rsa:2048 </span><span class="token parameter variable" style="color:#36acaa">-keyout</span><span class="token plain"> RootCA.key </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> RootCA.crt </span><span class="token parameter variable" style="color:#36acaa">-subj</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/C=US/CN=Example-Root-CA"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can change <code>Example-Root-CA</code> to others or add more fields to CA.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="create-local-server-certificate">Create local server certificate<a href="#create-local-server-certificate" class="hash-link" aria-label="Direct link to Create local server certificate" title="Direct link to Create local server certificate">​</a></h2><p>Next, we should apply the local CA to sign a certificate for our local server, which will be accessed through the <code>localhost</code> or <code>127.0.0.1</code> from our local machine.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="generate-certificate-signing-requestcsr">Generate Certificate Signing Request(CSR)<a href="#generate-certificate-signing-requestcsr" class="hash-link" aria-label="Direct link to Generate Certificate Signing Request(CSR)" title="Direct link to Generate Certificate Signing Request(CSR)">​</a></h3><p>Set up custom DNS in <code>/etc/hosts</code>,</p><div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/etc/hosts</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">127.0.0.1   localhost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">127.0.0.1   fake1.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">127.0.0.1   fake2.local</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Prepare a <code>localhost.conf</code>,</p><div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">localhost.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[req]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default_bits  = 2048</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">distinguished_name = req_distinguished_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">req_extensions = req_ext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x509_extensions = v3_req</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prompt = no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[req_distinguished_name]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">countryName = XX</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stateOrProvinceName = N/A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localityName = N/A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">organizationName = Self-signed certificate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">commonName = 127.0.0.1: Self-signed certificate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[req_ext]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subjectAltName = @alt_names</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[v3_req]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subjectAltName = @alt_names</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[alt_names]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IP.1 = 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DNS.1 = localhost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DNS.2 = fake1.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DNS.3 = fake2.local</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Generates <code>localhost.key</code> and <code>localhost.csr</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl req </span><span class="token parameter variable" style="color:#36acaa">-new</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-nodes</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-newkey</span><span class="token plain"> rsa:2048 </span><span class="token parameter variable" style="color:#36acaa">-keyout</span><span class="token plain"> localhost.key </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> localhost.csr </span><span class="token parameter variable" style="color:#36acaa">-config</span><span class="token plain"> localhost.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Or input from line</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># openssl req -new -nodes -newkey rsa:2048 -keyout localhost.key -out localhost.csr -subj "/C=US/ST=YourState/L=YourCity/O=Example-Certificates/CN=localhost.local"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Verify the Certificate Signing Request(CSR) <code>localhost.csr</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl req </span><span class="token parameter variable" style="color:#36acaa">-text</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-noout</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-verify</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> localhost.csr</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="get-local-server-certificate-signed-by-root-ca">Get local server certificate signed by root CA<a href="#get-local-server-certificate-signed-by-root-ca" class="hash-link" aria-label="Direct link to Get local server certificate signed by root CA" title="Direct link to Get local server certificate signed by root CA">​</a></h3><p>Submit <strong>CSR</strong> to the <strong>root CA</strong> to let the <strong>root CA</strong> to sign a certificate for our <code>locahost</code> server.</p><p>Generates <code>localhost.crt</code> by using CSR <code>localhost.csr</code> with extensions,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl x509 </span><span class="token parameter variable" style="color:#36acaa">-req</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-sha256</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-days</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1024</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> localhost.csr </span><span class="token parameter variable" style="color:#36acaa">-CA</span><span class="token plain"> RootCA.crt </span><span class="token parameter variable" style="color:#36acaa">-CAkey</span><span class="token plain"> RootCA.key </span><span class="token parameter variable" style="color:#36acaa">-CAcreateserial</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-extensions</span><span class="token plain"> req_ext </span><span class="token parameter variable" style="color:#36acaa">-extfile</span><span class="token plain"> localhost.conf </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> localhost.crt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>View the <code>localhost.crt</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl x509 </span><span class="token parameter variable" style="color:#36acaa">-text</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-noout</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> localhost.crt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Verify the <code>localhost.crt</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl verify </span><span class="token parameter variable" style="color:#36acaa">-verbose</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-CAfile</span><span class="token plain"> RootCA.crt localhost.crt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>If <code>X509</code> extensions(<code>subjectAltName</code>) are missing from the certificate, the browser will still report security issues.</p></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Using the CA and Subject as the same one, the step of creating the local CA can be skipped.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl req </span><span class="token parameter variable" style="color:#36acaa">-x509</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-nodes</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-days</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">730</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-newkey</span><span class="token plain"> rsa:2048 </span><span class="token parameter variable" style="color:#36acaa">-keyout</span><span class="token plain"> localhost.key </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> localhost.crt </span><span class="token parameter variable" style="color:#36acaa">-config</span><span class="token plain"> localhost.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="use-the-server-certificate">Use the server certificate<a href="#use-the-server-certificate" class="hash-link" aria-label="Direct link to Use the server certificate" title="Direct link to Use the server certificate">​</a></h2><p>Run up a node https server to use the generated local server certificate.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npx http-server </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8082</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--ssl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--cert</span><span class="token plain"> localhost.crt </span><span class="token parameter variable" style="color:#36acaa">--key</span><span class="token plain"> localhost.key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then visit:</p><ul><li><a href="https://127.0.0.1:8082/" target="_blank" rel="noopener noreferrer">https://127.0.0.1:8082/</a></li><li>https://localhost:8082/</li></ul><p>The browser will give you security warning as the local <strong>root CA</strong> is not trusted in default.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="trust-the-root-ca">Trust the root CA<a href="#trust-the-root-ca" class="hash-link" aria-label="Direct link to Trust the root CA" title="Direct link to Trust the root CA">​</a></h2><p>Install CA certificate <code>RootCA.crt</code> into each system trust store or each browser.</p><ul><li>Windows system trust store</li><li>Ubuntu system trust store</li><li>macOS system trust store</li></ul><p>Then visit again, the browser will show green!</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="chrome-red-security-warning">Chrome <strong>red</strong> security warning<a href="#chrome-red-security-warning" class="hash-link" aria-label="Direct link to chrome-red-security-warning" title="Direct link to chrome-red-security-warning">​</a></h3><ol><li>Go to <code>Developer Tools</code>.</li><li>Click <code>Security</code> tab.</li><li>Check <code>Security overview</code> issues.</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2><p><a href="https://gist.github.com/cecilemuller/9492b848eb8fe46d462abeb26656c4f8" target="_blank" rel="noopener noreferrer">How to create an HTTPS certificate for localhost domains · GitHub</a></p><p><a href="https://www.golinuxcloud.com/add-x509-extensions-to-certificate-openssl/" target="_blank" rel="noopener noreferrer">How to add X.509 extensions to certificate OpenSSL | GoLinuxCloud</a></p><p><a href="https://github.com/FiloSottile/mkcert" target="_blank" rel="noopener noreferrer">GitHub - FiloSottile/mkcert: A simple zero-config tool to make locally trusted development certificates with any names you'd like.</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="openssl" term="openssl"/>
        <category label="certificate" term="certificate"/>
        <category label="best-practice" term="best-practice"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[QEMU Direct Linux Kernel Boot]]></title>
        <id>https://liviaerxin.github.io/blog/qemu-linux-kernel-boot</id>
        <link href="https://liviaerxin.github.io/blog/qemu-linux-kernel-boot"/>
        <updated>2023-09-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[QEMU Linux Kernel Boot]]></summary>
        <content type="html"><![CDATA[<p>Here, I will employ QEMU to emulate a minimal <strong>Linux x86_64</strong> platform with a minimal root filesystem from scratch, as well as debugging with <code>GDB</code>:</p><ul><li>Build <strong>Linux x86_64</strong> kernel</li><li>Build <strong>Linux x86_64</strong> rootfs(root filesystem)</li><li>Run QEMU</li><li>Debug with <code>GDB</code></li></ul><p>Why do I use QEMU to boot Linux kernel directly with skipping BIOS/UEFI boot procedures?</p><p>Use QEMU to launch a Linux kernel directly without having to make a fully bootable disk image. This is very useful for:</p><ul><li>Linux kernel testing</li><li>root filesystem testing</li><li>arm system emulation</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2><p>On Ubuntu,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> fakeroot build-essential ncurses-dev xz-utils libssl-dev </span><span class="token function" style="color:#d73a49">bc</span><span class="token plain"> flex libelf-dev bison</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>On macOS, you need create a <strong>Case Sensitive</strong> filesystem and use <strong>GNU GCC</strong> instead of <code>Clang</code> the following ways:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hdiutil create </span><span class="token parameter variable" style="color:#36acaa">-size</span><span class="token plain"> 20g </span><span class="token parameter variable" style="color:#36acaa">-type</span><span class="token plain"> SPARSE </span><span class="token parameter variable" style="color:#36acaa">-fs</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Case-sensitive HFS+"</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-volname</span><span class="token plain"> brosx brosx.sparseimage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hdiutil attach brosx.sparseimage</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hdiutil detach /Volumes/brosx </span><span class="token parameter variable" style="color:#36acaa">-force</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> gpatch gcc flock attr libtool libart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> /opt/homebrew/bin/gcc-13 /opt/homebrew/bin/gcc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">n </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> /opt/homebrew/bin/gcc-13 /opt/homebrew/bin/cc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> /opt/homebrew/bin/g++-13 /opt/homebrew/bin/g++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> /opt/homebrew/bin/g++-13 /opt/homebrew/bin/c++</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> /opt/homebrew/bin/gcc /opt/homebrew/bin/cc /opt/homebrew/bin/g++ /opt/homebrew/bin/c++</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="build-linux-kernel">Build Linux kernel<a href="#build-linux-kernel" class="hash-link" aria-label="Direct link to Build Linux kernel" title="Direct link to Build Linux kernel">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.1.55.tar.xz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> xvf linux-6.1.55.tar.xz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> linux-6.1.55</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Use the default `x86_64` configuration file form `/x86/configs/x86_64_defconfig`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ARCH</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">x86_64 x86_64_defconfig </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Tweak some options for GDB and initramfs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> menuconfig</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-j8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Generate kernel file <code>./arch/x86/boot/bzImage</code>.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>To extract <code>vmlinux</code> from <code>bzImage</code>,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./scripts/extract-vmlinux ./arch/x86_64/boot/bzImage </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">./arch/x86_64/boot/vmlinux</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="build-root-filesystem">Build root filesystem<a href="#build-root-filesystem" class="hash-link" aria-label="Direct link to Build root filesystem" title="Direct link to Build root filesystem">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/buildroot/buildroot.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> buildroot</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> menuconfig</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Choose <code>x86_64</code> as Target Architecture and <code>ext4</code> root file system.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-j8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Generate root filesystem disk <code>./output/images/rootfs.ext4</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="run-qemu">Run QEMU<a href="#run-qemu" class="hash-link" aria-label="Direct link to Run QEMU" title="Direct link to Run QEMU">​</a></h2><p>Copy <code>bzImage</code> and <code>rootfs.ext4</code> to any host machine with QEMU available.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">rsync</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-l</span><span class="token plain"> ./linux-6.1.55/arch/x86/boot/bzImage destination_directory/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">rsync</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-l</span><span class="token plain"> ./buildroot/output/images/rootfs.ext4 destination_directory/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">kernel</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/linux_qemu/x86_64/bzImage"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">vmlinuz</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/linux_qemu/x86_64/vmlinux"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">initrd</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/linux_qemu/x86_64/rootfs.ext4"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">img</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/linux_qemu/x86_64/rootfs.ext4"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-x86_64 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-nographic</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 4G </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-kernel</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$kernel</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-append</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"earlyprintk loglevel=8 root=/dev/zero console=ttyS0"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-x86_64 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-nographic</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 4G </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-kernel</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$kernel</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-hda</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$img</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-append</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"earlyprintk loglevel=8 root=/dev/sda rootfstype=ext4 console=ttyS0"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-netdev</span><span class="token plain"> user,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mynet,hostfwd</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tcp::2222-:22 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-device</span><span class="token plain"> virtio-net-pci,netdev</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mynet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Default password: <code>root</code></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="debug-linux-kernel">Debug Linux kernel<a href="#debug-linux-kernel" class="hash-link" aria-label="Direct link to Debug Linux kernel" title="Direct link to Debug Linux kernel">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-x86_64 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-nographic</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 4G </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-kernel</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$kernel</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-append</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"earlyprintk loglevel=8 root=/dev/zero console=ttyS0 nokaslr"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Options in details,</p><ul><li><code>-s</code>: allows port <code>tcp::1234</code> for remote debug</li><li><code>-S</code>: stop CPU until continue from GDB what is connected to tcp <code>1234</code> port</li><li><code>-append</code><ul><li><code>nokaslr</code>: turn off <strong>KASLR</strong></li></ul></li></ul><p>Or with root filesystem,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-x86_64 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-nographic</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 4G </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-kernel</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$kernel</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-hda</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$img</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-append</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"earlyprintk loglevel=8 root=/dev/sda rootfstype=ext4 console=ttyS0 nokaslr"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-netdev</span><span class="token plain"> user,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mynet,hostfwd</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tcp::2222-:22 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-device</span><span class="token plain"> virtio-net-pci,netdev</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mynet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Enter <code>gdb</code>,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ gdb ./vmlinux</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In <code>gdb</code> shell,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gdb</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> target remote </span><span class="token number" style="color:#36acaa">10.6</span><span class="token plain">.64.243:1234</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Remote debugging using </span><span class="token number" style="color:#36acaa">10.6</span><span class="token plain">.64.243:1234</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">warning: No executable has been specified and target does not support</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">determining executable automatically.  Try using the </span><span class="token string" style="color:#e3116c">"file"</span><span class="token plain"> command.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x000000000000fff0 </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> ?? </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gdb</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin class-name">continue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Continuing.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2><p><a href="https://www.berrange.com/posts/2023/03/09/make-tiny-image-py-creating-tiny-initrds-for-testing-qemu-or-linux-kernel-userspace-behaviour/" target="_blank" rel="noopener noreferrer">Daniel P. Berrangé  » Blog Archive   » make-tiny-image.py: creating tiny initrds for testing QEMU or Linux kernel/userspace behaviour</a></p><p><a href="https://github.com/dhruvvyas90/qemu-rpi-kernel" target="_blank" rel="noopener noreferrer">GitHub - dhruvvyas90/qemu-rpi-kernel: Qemu kernel for emulating Rpi on QEMU</a>
<a href="https://medicineyeh.wordpress.com/2016/03/29/buildup-your-arm-image-for-qemu/" target="_blank" rel="noopener noreferrer">https://medicineyeh.wordpress.com/2016/03/29/buildup-your-arm-image-for-qemu/</a></p><p><a href="https://medium.com/@daeseok.youn/prepare-the-environment-for-developing-linux-kernel-with-qemu-c55e37ba8ade" target="_blank" rel="noopener noreferrer">Prepare the environment for developing Linux kernel with qemu. | by DaeSeok Youn | Medium</a></p><p><a href="https://bootlin.com/pub/conferences/2013/kernel-recipes/rootfs-kernel-developer/rootfs-kernel-developer.pdf" target="_blank" rel="noopener noreferrer"></a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="qemu" term="qemu"/>
        <category label="kernel" term="kernel"/>
        <category label="initramfs" term="initramfs"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[QEMU Emulate Raspberry Pi 3 and 4]]></title>
        <id>https://liviaerxin.github.io/blog/qemu-raspberry-pi</id>
        <link href="https://liviaerxin.github.io/blog/qemu-raspberry-pi"/>
        <updated>2023-09-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[QEMU emulate Raspberry Pi 3/4]]></summary>
        <content type="html"><![CDATA[<p>In this blog, <strong>QEMU</strong> is employed to emulate <strong>Raspberry Pi 3/4</strong> in <strong>mac M1</strong> host(it's also supposed to work in <strong>Windows/Linux</strong> with a little tweak). I will demonstrate <strong>two</strong> different ways to emulate <strong>Raspberry Pi 3</strong> and <strong>Raspberry Pi 4</strong> in respect. These two ways are different by using different <strong>QEMU machines</strong> as you would like to use:</p><ol><li><code>-machine raspi3b</code>: raspberry pi 3b machine to emulate <strong>Raspberry Pi 3</strong>.</li><li><code>-machine virt</code>: general arm machine to emulate <strong>Raspberry Pi 4</strong>.</li></ol><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>In mac M1 with setting <code>-machine virt</code>, I use the hardware acceleration by <code>-accel hvf</code>. In Windows(x86_64), the hardware acceleration for <code>aarch64</code> is not available, so removing the hardware acceleration will work as well in Windows.</p></div></div><p>For both of these two, we still need prepare some common steps before running <strong>QEMU</strong>:</p><ul><li>Extract the appropriate kernel, device tree or root filesystem</li></ul><p>This blog will emulate Raspberry Pi using QEMU in mac M1 host using the new image <code>2023-05-03-raspios-bullseye-arm64-lite.img</code>.</p><p>The default <code>user:pi</code> and <code>password:raspberry</code> have been removed from this image. In order to log in, we have to write <code>user</code> and <code>password</code> to the image before booting. These steps can be skipped when booting previous images.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2><ul><li><strong>Docker</strong><ul><li>be required in macOS</li><li>can be skipped in Linux</li><li>can use <code>wsl</code> as an alternative in Windows</li></ul></li><li><strong>QEMU</strong><ul><li><code>homebrew</code> install in macOS</li></ul></li><li><strong>Raspberry Pi image</strong>: <code>2023-05-03-raspios-bullseye-arm64-lite.img</code></li></ul><p>Since I am in mac M1, and the <code>raspberry pi</code> image which contains a <code>fat</code> filesystem as boot and a <code>ext4</code> filesystem as OS, we need write some configuration into it. So I will use a <strong>Docker Ubuntu</strong> container to do the operation on the the filesystem. There some other tools to do the like of these operations:</p><ul><li><code>ext4fuse</code> is free and easy to install via <code>homebrew</code>, but it has limit as read-only access.</li><li><code>ExtFS</code> from <code>Paragon</code> supports read-write access while you need pay for it.</li><li><code>virtual machine</code><ul><li><code>Docker</code> in OSX make use of <code>virtual machine</code> while it is quick and flexible to use.</li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="raspberry-pi-image">Raspberry Pi image<a href="#raspberry-pi-image" class="hash-link" aria-label="Direct link to Raspberry Pi image" title="Direct link to Raspberry Pi image">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> ~</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://downloads.raspberrypi.org/raspios_arm64/images/raspios_arm64-2023-05-03/2023-05-03-raspios-bullseye-arm64-lite.img.xz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">xz </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2023</span><span class="token plain">-05-03-raspios-bullseye-arm64-lite.img.xz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="docker-ubuntu-container">Docker Ubuntu container<a href="#docker-ubuntu-container" class="hash-link" aria-label="Direct link to Docker Ubuntu container" title="Direct link to Docker Ubuntu container">​</a></h2><p>Mount the <strong>folder</strong> including <code>2023-05-03-raspios-bullseye-arm64-lite.img</code></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--privileged</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> </span><span class="token environment constant" style="color:#36acaa">$PWD</span><span class="token plain">:/qemu </span><span class="token parameter variable" style="color:#36acaa">--name</span><span class="token plain"> ubuntu ubuntu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docekr </span><span class="token builtin class-name">exec</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> ubuntu </span><span class="token function" style="color:#d73a49">bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extracting-kernel-and-device-tree">Extracting Kernel and device tree<a href="#extracting-kernel-and-device-tree" class="hash-link" aria-label="Direct link to Extracting Kernel and device tree" title="Direct link to Extracting Kernel and device tree">​</a></h2><p>Operations all in Ubuntu container.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@f36a3251391d:/qemu</span><span class="token comment" style="color:#999988;font-style:italic"># fdisk -l 2023-05-03-raspios-bullseye-arm64-lite.img </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Disk </span><span class="token number" style="color:#36acaa">2023</span><span class="token plain">-05-03-raspios-bullseye-arm64-lite.img: </span><span class="token number" style="color:#36acaa">1.96</span><span class="token plain"> GiB, </span><span class="token number" style="color:#36acaa">2101346304</span><span class="token plain"> bytes, </span><span class="token number" style="color:#36acaa">4104192</span><span class="token plain"> sectors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Units: sectors of </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> * </span><span class="token number" style="color:#36acaa">512</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">512</span><span class="token plain"> bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sector size </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">logical/physical</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: </span><span class="token number" style="color:#36acaa">512</span><span class="token plain"> bytes / </span><span class="token number" style="color:#36acaa">512</span><span class="token plain"> bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I/O size </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">minimum/optimal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: </span><span class="token number" style="color:#36acaa">512</span><span class="token plain"> bytes / </span><span class="token number" style="color:#36acaa">512</span><span class="token plain"> bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Disklabel type: dos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Disk identifier: 0x544c6228</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Device                                      Boot  Start     End Sectors  Size Id Type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2023</span><span class="token plain">-05-03-raspios-bullseye-arm64-lite.img1        </span><span class="token number" style="color:#36acaa">8192</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">532479</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">524288</span><span class="token plain">  256M  c W95 FAT32 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LBA</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2023</span><span class="token plain">-05-03-raspios-bullseye-arm64-lite.img2      </span><span class="token number" style="color:#36acaa">532480</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4104191</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3571712</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">.7G </span><span class="token number" style="color:#36acaa">83</span><span class="token plain"> Linux</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>The first partition is boot filesystem.</li><li>The second partition is real root filesystem.</li></ul><p>All the data we need is in the first partition, to do the operation is mounting it.</p><p>The offset of the first partition: 8192 * 512 = 4194304,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@f36a3251391d:/qemu</span><span class="token comment" style="color:#999988;font-style:italic"># mount -o loop,offset=4194304 2023-05-03-raspios-bullseye-arm64-lite.img /mnt/rpi-boot/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@f36a3251391d:/qemu</span><span class="token comment" style="color:#999988;font-style:italic"># ls -ls /mnt/rpi-boot/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">total </span><span class="token number" style="color:#36acaa">30244</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root   </span><span class="token number" style="color:#36acaa">18693</span><span class="token plain"> Apr  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:32 COPYING.linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root    </span><span class="token number" style="color:#36acaa">1594</span><span class="token plain"> Apr  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:32 LICENCE.broadcom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root   </span><span class="token number" style="color:#36acaa">30390</span><span class="token plain"> Apr  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:32 bcm2710-rpi-2-b.dtb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">32</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root   </span><span class="token number" style="color:#36acaa">32753</span><span class="token plain"> Apr  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:32 bcm2710-rpi-3-b-plus.dtb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">32</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root   </span><span class="token number" style="color:#36acaa">32142</span><span class="token plain"> Apr  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:32 bcm2710-rpi-3-b.dtb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root   </span><span class="token number" style="color:#36acaa">30285</span><span class="token plain"> Apr  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:32 bcm2710-rpi-cm3.dtb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">32</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root   </span><span class="token number" style="color:#36acaa">31318</span><span class="token plain"> Apr  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:32 bcm2710-rpi-zero-2-w.dtb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">32</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root   </span><span class="token number" style="color:#36acaa">31318</span><span class="token plain"> Apr  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:32 bcm2710-rpi-zero-2.dtb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">52</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root   </span><span class="token number" style="color:#36acaa">52593</span><span class="token plain"> Apr  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:32 bcm2711-rpi-4-b.dtb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">52</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root   </span><span class="token number" style="color:#36acaa">52682</span><span class="token plain"> Apr  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:32 bcm2711-rpi-400.dtb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">38</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root   </span><span class="token number" style="color:#36acaa">38182</span><span class="token plain"> Apr  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:32 bcm2711-rpi-cm4-io.dtb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">52</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root   </span><span class="token number" style="color:#36acaa">53202</span><span class="token plain"> Apr  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:32 bcm2711-rpi-cm4.dtb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root   </span><span class="token number" style="color:#36acaa">50504</span><span class="token plain"> Apr  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:32 bcm2711-rpi-cm4s.dtb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">52</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root   </span><span class="token number" style="color:#36acaa">52476</span><span class="token plain"> Apr  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:32 bootcode.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root     </span><span class="token number" style="color:#36acaa">154</span><span class="token plain"> May  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> 03:11 cmdline.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root    </span><span class="token number" style="color:#36acaa">2109</span><span class="token plain"> May  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> 02:53 config.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root     </span><span class="token number" style="color:#36acaa">145</span><span class="token plain"> May  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> 03:11 issue.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">8028</span><span class="token plain"> -rwxr-xr-x </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root </span><span class="token number" style="color:#36acaa">8219600</span><span class="token plain"> Apr  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:32 kernel8.img</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To run QEMU we will need the <strong>kernel</strong> and <strong>device tree</strong>, so let’s copy them out:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@f36a3251391d:/qemu</span><span class="token comment" style="color:#999988;font-style:italic"># cp /mnt/rpi-boot/kernel8.img .</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@f36a3251391d:/qemu</span><span class="token comment" style="color:#999988;font-style:italic"># cp /mnt/rpi-boot/bcm2710-rpi-3-b.dtb .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="setting-up-default-user">Setting up default user<a href="#setting-up-default-user" class="hash-link" aria-label="Direct link to Setting up default user" title="Direct link to Setting up default user">​</a></h2><p>Operations all in docker container.</p><p>Now in order to set up user and enable ssh in default, we need write files into <code>/userconf</code> and <code>/ssh</code> under the boot filesystem mounted as <code>/mnt/rpi-boot/</code>.</p><p>Set up a default <code>user:pi</code> and <code>password:raspberry</code>.</p><p>Hash password <code>raspberry</code> using <code>openssl</code>,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@f36a3251391d:/qemu</span><span class="token comment" style="color:#999988;font-style:italic"># openssl passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Password: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Verifying - Password: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token variable" style="color:#36acaa">$1</span><span class="token variable" style="color:#36acaa">$d</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.AvcL</span><span class="token variable" style="color:#36acaa">$wqfUqTIauUP1TVJ</span><span class="token plain">/uU1td0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@f36a3251391d:/qemu</span><span class="token comment" style="color:#999988;font-style:italic"># echo 'pi:$1$d...AvcL$wqfUqTIauUP1TVJ/uU1td0' | tee /mnt/rpi-boot/userconf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Enable <code>ssh</code>,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@f36a3251391d:/qemu</span><span class="token comment" style="color:#999988;font-style:italic"># touch /mnt/rpi-boot/ssh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@f36a3251391d:/qemu</span><span class="token comment" style="color:#999988;font-style:italic"># umount /mnt/rpi-boot</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="running-qemu">Running QEMU<a href="#running-qemu" class="hash-link" aria-label="Direct link to Running QEMU" title="Direct link to Running QEMU">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="emulate-raspberry-pi-3">Emulate Raspberry Pi 3<a href="#emulate-raspberry-pi-3" class="hash-link" aria-label="Direct link to Emulate Raspberry Pi 3" title="Direct link to Emulate Raspberry Pi 3">​</a></h3><p>Now switch back to the host macOS to run <code>QEMU</code>,</p><p>Resize the image to the next power of 2 size,</p><p>The original size,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ </span><span class="token function" style="color:#d73a49">stat</span><span class="token plain"> -f%z </span><span class="token number" style="color:#36acaa">2023</span><span class="token plain">-05-03-raspios-bullseye-arm64-lite.img</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2101346304</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To resize to <code>4GB</code>,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">qemu-img resize ./2023-05-03-raspios-bullseye-arm64-lite.img 4G</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-aarch64 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-machine</span><span class="token plain"> raspi3b </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-cpu</span><span class="token plain"> cortex-a72 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-nographic</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 1G </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-smp</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-dtb</span><span class="token plain"> bcm2710-rpi-3-b.dtb </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-kernel</span><span class="token plain"> kernel8.img </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-append</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"rw earlyprintk loglevel=8 console=ttyAMA0,115200 dwc_otg.lpm_enable=0 root=/dev/mmcblk0p2 rootdelay=1"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-netdev</span><span class="token plain"> user,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">net0,hostfwd</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tcp::2222-:22 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-device</span><span class="token plain"> usb-net,netdev</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">net0 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-sd</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2023</span><span class="token plain">-05-03-raspios-bullseye-arm64-lite.img</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Options in detail:</p><ul><li><code>-machine raspi3b</code>: use raspberry pi 3 machine.</li><li><code>-append</code>:<ul><li><code>console=ttyAMA0</code>: output the <strong>VM</strong> std to <strong>QEMU</strong> console.</li><li><code>root=/dev/mmcblk0p2</code>: mount <strong>real root filesystem</strong> to <code>/dev/mmcblk0p2</code>(the second partition of <code>mmcblk0</code>) as we <code>-sd xx</code> will be mounted to <code>/dev/mmcblk0</code>.</li></ul></li><li><code>-netdev user,id=net0,hostfwd=tcp::2222-:22</code>: network mapping host port <code>2222</code> to the <strong>VM</strong> <code>22</code></li><li><code>-device usb-net,netdev=net0</code>: expose <code>netdev=net0</code> as <code>usb-net</code> in the raspberry pi 3 machine.</li><li><code>-sd 2023-05-03-raspios-bullseye-arm64-lite.img</code>: <code>sd</code> drive is available in the raspberry pi 3 machine.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="emulate-raspberry-pi-4-with-virt">Emulate Raspberry Pi 4 with <code>virt</code><a href="#emulate-raspberry-pi-4-with-virt" class="hash-link" aria-label="Direct link to emulate-raspberry-pi-4-with-virt" title="Direct link to emulate-raspberry-pi-4-with-virt">​</a></h3><p>We will use generic virtual machine <code>virt</code> to act as <code>raspi4</code>, since there is no <code>raspi4</code> machine defined in QEMU official machines. However you can still use <code>raspi3</code> to act as <code>raspi4</code> as they are same!</p><p><strong>Hardware Acceleration</strong> can be enable in <code>virt</code> machine by using <code>-accel hvf</code> option in my <strong>mac M1</strong> host as it's <strong>arm-based</strong>.</p><p>So <code>virt</code> will bring high performance and increase efficiency!</p><p>After tuning options and searching from many resources, the operational setting for QEMU to emulate is,</p><ol><li>Use <code>ubuntu-22.04.3-preinstalled-server-arm64+raspi.img</code>, of which the default user is <code>ubuntu</code> and password is <code>ubuntu</code>.</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">kernel</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/ubuntu-22.04.3-preinstalled-server-arm64+raspi-boot/vmlinuz"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">initrd</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/ubuntu-22.04.3-preinstalled-server-arm64+raspi-boot/initrd.img"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">img</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/ubuntu-22.04.3-preinstalled-server-arm64+raspi.img"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="for-scsi-hard-disk">For <code>SCSI hard disk</code><a href="#for-scsi-hard-disk" class="hash-link" aria-label="Direct link to for-scsi-hard-disk" title="Direct link to for-scsi-hard-disk">​</a></h4><p>This storage device file will be named <code>/dev/sdX</code>,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-aarch64 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-machine</span><span class="token plain"> virt </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-accel</span><span class="token plain"> hvf </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-cpu</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-smp</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 4G </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-nographic</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-kernel</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$kernel</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-initrd</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$initrd</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-append</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"earlyprintk loglevel=8 root=/dev/sda2 rootfstype=ext4 rw console=ttyAMA0"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-drive</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">file</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$img</span><span class="token plain">,format</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">raw,if</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">none,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">drive0 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-device</span><span class="token plain"> virtio-scsi-pci,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">scsi </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-device</span><span class="token plain"> scsi-hd,drive</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">drive0,bus</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">scsi.0 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-netdev</span><span class="token plain"> user,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mynet,hostfwd</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tcp::2222-:22 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-device</span><span class="token plain"> virtio-net-pci,netdev</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mynet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Options in detail:</p><ul><li><code>-accel hvf</code>: <strong>hardware acceleration</strong> in mac M1. Don't use in <strong>x86_64</strong> host.</li><li><code>-cpu host</code>: change to <code>-cpu cortex-a72</code> when no <strong>hardware acceleration</strong> available such as in <strong>x86_64</strong> host.</li><li><code>-append</code><ul><li><code>root=/dev/sda2</code>: the second partition of the <code>ubuntu-22.04.3-preinstalled-server-arm64+raspi.img</code> disk image hold the real root filesystem.</li></ul></li><li><code>-initrd $initrd</code><ul><li>the boot loader works using configuration like <code>vmlinuz initrd=initrd.img root=/dev/sda2</code>.</li></ul></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="for-virtual-disk-storage-device">For <code>virtual disk</code> storage device<a href="#for-virtual-disk-storage-device" class="hash-link" aria-label="Direct link to for-virtual-disk-storage-device" title="Direct link to for-virtual-disk-storage-device">​</a></h4><p>This storage device file will be named <code>/dev/vdX</code>,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-aarch64 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-machine</span><span class="token plain"> virt </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-accel</span><span class="token plain"> hvf </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-cpu</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-smp</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 4G </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-nographic</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-kernel</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$kernel</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-initrd</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$initrd</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-append</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"earlyprintk loglevel=8 root=/dev/vda2 rootfstype=ext4 rw console=ttyAMA0"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-drive</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">file</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$img</span><span class="token plain">,format</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">raw,if</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">none,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">drive0 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-device</span><span class="token plain"> virtio-blk-pci,drive</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">drive0 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-netdev</span><span class="token plain"> user,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mynet,hostfwd</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tcp::2222-:22 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-device</span><span class="token plain"> virtio-net-pci,netdev</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mynet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="for-nvme-storage-device">For <code>NVMe</code> storage device<a href="#for-nvme-storage-device" class="hash-link" aria-label="Direct link to for-nvme-storage-device" title="Direct link to for-nvme-storage-device">​</a></h4><p>This storage device file will be named <code>/dev/nvmeX</code>,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-aarch64 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-machine</span><span class="token plain"> virt </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-accel</span><span class="token plain"> hvf </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-cpu</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-smp</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 4G </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-nographic</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-kernel</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$kernel</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-append</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"earlyprintk loglevel=8 root=/dev/nvme0n1p2 rootfstype=ext4 rw console=ttyAMA0"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-drive</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">file</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$img</span><span class="token plain">,format</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">raw,if</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">none,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">drive0 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-device</span><span class="token plain"> nvme,drive</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">drive0,serial</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">deadbeaf1 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-netdev</span><span class="token plain"> user,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mynet,hostfwd</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tcp::2222-:22 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-device</span><span class="token plain"> virtio-net-pci,netdev</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mynet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Options in detail:</p><ul><li>no <code>-initrd $initrd</code><ul><li>the boot loader works using configuration like <code>vmlinuz root=/dev/nvme0n1p2</code>.</li><li>we directly mount the real filesystem <code>/dev/nvme0n1p2</code>, skipping to mount the <strong>initial RAM disk</strong>.</li><li>I test other type storage device must binding <code>-initrd $initrd</code> while there is no need for <code>NVME</code>. In my assumption, those <code>storage devices</code> need to be configured in the <code>initramfs</code>.</li></ul></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="for-usb-storage">For <code>usb storage</code><a href="#for-usb-storage" class="hash-link" aria-label="Direct link to for-usb-storage" title="Direct link to for-usb-storage">​</a></h4><p>This storage device file will be named <code>/dev/sdX</code>,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-aarch64 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-machine</span><span class="token plain"> virt </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-cpu</span><span class="token plain"> cortex-a57 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-smp</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 4G </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -no-reboot </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-nographic</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-kernel</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$kernel</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-initrd</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$initrd</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-append</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"earlyprintk loglevel=8 root=/dev/sda2 rootfstype=ext4 console=ttyAMA0 raid=noautodetect"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-device</span><span class="token plain"> usb-ehci </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-device</span><span class="token plain"> usb-storage,drive</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">disk0 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-drive</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">file</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$img</span><span class="token plain">,format</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">raw,if</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">none,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">disk0 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-device</span><span class="token plain"> virtio-net-pci,netdev</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mynet </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-netdev</span><span class="token plain"> user,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mynet,hostfwd</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tcp::2222-:22</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Options in detail:</p><ul><li><code>-device usb-ehci</code>: usb bus -&gt; PCI bus</li><li><code>-device usb-storage</code>: usb storage device -&gt; usb bus</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="test-raspberry-pi-vm">Test Raspberry Pi VM<a href="#test-raspberry-pi-vm" class="hash-link" aria-label="Direct link to Test Raspberry Pi VM" title="Direct link to Test Raspberry Pi VM">​</a></h2><p>Log into the <strong>Raspberry Pi</strong> via <code>ssh</code> from the macOS host,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ </span><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2222</span><span class="token plain"> pi@localhost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The authenticity of </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'[localhost]:2222 ([127.0.0.1]:2222)'</span><span class="token plain"> can</span><span class="token string" style="color:#e3116c">'t be established.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ED25519 key fingerprint is SHA256:6igL6iaigBCszv8m6nyNl+tsB2siV/tL+TRQANC6nBw.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">This key is not known by any other names</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Warning: Permanently added '</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">localhost</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:2222</span><span class="token string" style="color:#e3116c">' (ED25519) to the list of known hosts.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">pi@localhost'</span><span class="token plain">s password: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Linux raspberrypi </span><span class="token number" style="color:#36acaa">6.1</span><span class="token plain">.21-v8+ </span><span class="token comment" style="color:#999988;font-style:italic">#1642 SMP PREEMPT Mon Apr  3 17:24:16 BST 2023 aarch64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The programs included with the Debian GNU/Linux system are </span><span class="token function" style="color:#d73a49">free</span><span class="token plain"> software</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">the exact distribution terms </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> each program are described </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">individual files </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> /usr/share/doc/*/copyright.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">permitted by applicable law.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Last login: Fri Sep </span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token plain">:30:58 </span><span class="token number" style="color:#36acaa">2023</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SSH is enabled and the default password </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the </span><span class="token string" style="color:#e3116c">'pi'</span><span class="token plain"> user has not been changed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This is a security risk - please login as the </span><span class="token string" style="color:#e3116c">'pi'</span><span class="token plain"> user and </span><span class="token builtin class-name">type</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'passwd'</span><span class="token plain"> to </span><span class="token builtin class-name">set</span><span class="token plain"> a new password.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pi@raspberrypi:~ $ </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2><p><a href="https://interrupt.memfault.com/blog/emulating-raspberry-pi-in-qemu" target="_blank" rel="noopener noreferrer">Emulating a Raspberry Pi in QEMU | InterruptEmulating a Raspberry Pi in QEMU</a></p><p><a href="https://blogs.oracle.com/linux/post/how-to-emulate-block-devices-with-qemu" target="_blank" rel="noopener noreferrer">How to emulate block devices with QEMU</a></p><p><a href="https://u-boot.readthedocs.io/en/latest/board/emulation/blkdev.html" target="_blank" rel="noopener noreferrer">Emulation of block devices — Das U-Boot unknown version documentation</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="qemu" term="qemu"/>
        <category label="raspberry-pi" term="raspberry-pi"/>
        <category label="osx" term="osx"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[How to mount ISO image file]]></title>
        <id>https://liviaerxin.github.io/blog/how-to-mount-iso-file</id>
        <link href="https://liviaerxin.github.io/blog/how-to-mount-iso-file"/>
        <updated>2023-09-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[How to mount ISO file]]></summary>
        <content type="html"><![CDATA[<p>For viewing the content of the <strong>ISO</strong> image file like <code>*.iso</code>, we can mount it to filesystem and loop up its contained files.</p><p>Mounting the <strong>ISO</strong> image file in linux is much easier than doing in macOS. Because <strong>ISO</strong> use <code>ISO9660</code> file system while the <code>hdiutil</code> in macOS does not support it originally. That will require more steps to implement in comparison with one command like <code>mount </code> in Linux.</p><p><a href="https://www.cyberciti.biz/tips/how-to-mount-iso-image-under-linux.html" target="_blank" rel="noopener noreferrer">How to mount iso image in Linux</a></p><p><a href="https://unix.stackexchange.com/questions/298685/can-a-mac-mount-a-debian-install-cd" target="_blank" rel="noopener noreferrer">osx - Can a Mac mount a Debian install CD? - Unix &amp; Linux Stack Exchange</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mount-iso-file-on-linux">Mount ISO file on Linux<a href="#mount-iso-file-on-linux" class="hash-link" aria-label="Direct link to Mount ISO file on Linux" title="Direct link to Mount ISO file on Linux">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mount-iso-file-on-macos">Mount ISO file on macOS<a href="#mount-iso-file-on-macos" class="hash-link" aria-label="Direct link to Mount ISO file on macOS" title="Direct link to Mount ISO file on macOS">​</a></h2><ol><li>Attaching as a block device</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># the '-nomount' option avoids the 'mount failed' error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">❯ hdiutil attach </span><span class="token parameter variable" style="color:#36acaa">-nomount</span><span class="token plain"> mantic-mini-iso-amd64.iso</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/disk6              GUID_partition_scheme           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/disk6s1            Microsoft Basic Data            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/disk6s2            EFI                             </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/disk6s3            Microsoft Basic Data  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ diskutil info /dev/disk6s2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Device Identifier:         disk6s2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Device Node:               /dev/disk6s2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Whole:                     No</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Part of Whole:             disk6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Volume Name:               ESP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Mounted:                   No</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Partition Type:            EFI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   File System Personality:   MS-DOS FAT12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Type </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Bundle</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:             msdos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Name </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">User Visible</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:       MS-DOS </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">FAT12</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>[Optional]<!-- --> Load CD9660</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Load the kext module</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">❯ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> kmutil load </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> /System/Library/Extensions/cd9660.kext</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Mount the disk with cd9660 (aka ISO9660) file system</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># create mount point</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">❯ </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> /tmp/ubuntu-mantic-iso</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># mount the disk</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">❯ </span><span class="token function" style="color:#d73a49">mount</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> cd9660 /dev/disk6 /tmp/ubuntu-mantic-iso</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>View the <code>iso</code> files,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ tree </span><span class="token parameter variable" style="color:#36acaa">-h</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-L</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> /tmp/ubuntu-mantic-iso</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">.0K</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  /tmp/ubuntu-mantic-iso</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">.0K</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  EFI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp; └── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">.0K</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp;     ├── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">938K</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  bootx64.efi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp;     ├── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">.2M</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  grubx64.efi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp;     └── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">841K</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  mmx64.efi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">.0K</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp; └── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">.0K</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  grub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp;     ├── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">.0K</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  fonts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp;     ├── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">169</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  grub.cfg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp;     ├── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> 38K</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  i386-pc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp;     └── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> 36K</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  x86_64-efi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">.0K</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  boot.catalog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">.0K</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  casper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> 56M</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  initrd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> 13M</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  vmlinuz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">9</span><span class="token plain"> directories, </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"> files</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>Umount the disk</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ </span><span class="token function" style="color:#d73a49">umount</span><span class="token plain"> /dev/disk6</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>Detach the disk</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ hdiutil detach /dev/disk6</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="how-to" term="how-to"/>
        <category label="iso" term="iso"/>
        <category label="osx" term="osx"/>
        <category label="linux" term="linux"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki Emulator]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-emulator</id>
        <link href="https://liviaerxin.github.io/blog/wiki-emulator"/>
        <updated>2023-09-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Wiki Emulator]]></summary>
        <content type="html"><![CDATA[<p><a href="https://developer.android.com/studio/run/emulator-acceleration" target="_blank" rel="noopener noreferrer">Configure hardware acceleration for the Android Emulator</a></p><p>Hardware acceleration:</p><ul><li>Graphics acceleration: Improve screen rendering, especially in games</li><li>VM acceleration(a.k.a, CPU acceleration): Improve execution speed</li></ul><p>Graphics acceleration can be enabled with <code>-gpu</code> option.
Windows: It may need you add the <code>emulator.exe</code> to the <code>Graphics settings</code>, such as <code>"C:\Users\xx\AppData\Local\Android\Sdk\emulator\emulator.exe"</code></p><p>VM acceleration is enabled in default.
For instance, if <code>WHPX</code> is configured in windows, it will be used automatically. </p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">emulator.exe </span><span class="token parameter variable" style="color:#36acaa">-avd</span><span class="token plain"> Pixel_3a_API_34_extension_level_7_x86_64 </span><span class="token parameter variable" style="color:#36acaa">-gpu</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> -no-snapshot</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://medium.com/@tunacici7/qemu-eli5-part-6-uefi-bios-ovmf-7919facf7e31" target="_blank" rel="noopener noreferrer">QEMU ELI5 — Part 6, UEFI, BIOS &amp; OVMF | by Tuna Cici | Medium</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background">​</a></h2>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="wiki" term="wiki"/>
        <category label="emulator" term="emulator"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki QEMU]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-qemu</id>
        <link href="https://liviaerxin.github.io/blog/wiki-qemu"/>
        <updated>2023-09-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Wiki QEMU]]></summary>
        <content type="html"><![CDATA[<p>Learning and using the QEMU help me understand how the linux operating system works including fields:</p><ol><li>Linux boot process.</li><li>Cross compile for target system(such as arm64) on host system(such as x86_64), and test the binary.</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="os-image-resources">OS image Resources<a href="#os-image-resources" class="hash-link" aria-label="Direct link to OS image Resources" title="Direct link to OS image Resources">​</a></h2><ul><li><a href="https://cdimage.ubuntu.com/" target="_blank" rel="noopener noreferrer">Ubuntu OS Images</a></li><li><a href="https://cdimage.debian.org/" target="_blank" rel="noopener noreferrer">Debian OS Images</a></li><li><a href="https://downloads.raspberrypi.org/" target="_blank" rel="noopener noreferrer">Raspberry PI OS Images</a></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="qemu-keyboard-shortcuts">QEMU Keyboard shortcuts<a href="#qemu-keyboard-shortcuts" class="hash-link" aria-label="Direct link to QEMU Keyboard shortcuts" title="Direct link to QEMU Keyboard shortcuts">​</a></h3><ul><li>Switch between QEMU monitor console and the guest non-graphic OS<ul><li><code>CTRL+a c</code></li></ul></li><li>Exit the guest non-graphic OS<ul><li><code>CTRL+a x</code></li></ul></li><li>Switch between QEMU monitor console and the guest graphic OS<ul><li><code>CTRL+ALT+1</code>, <code>CTRL+ALT+2</code></li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="discover-the-vm-device-tree">Discover the VM device tree<a href="#discover-the-vm-device-tree" class="hash-link" aria-label="Direct link to Discover the VM device tree" title="Direct link to Discover the VM device tree">​</a></h3><p>Enter the QEMU monitor console, using <code>info qtree</code> command,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ info qtree</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> dev: gpex-pcihost, </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bus: pcie.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token builtin class-name">type</span><span class="token plain"> PCIE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      dev: virtio-scsi-pci, </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bus: virtio-bus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token builtin class-name">type</span><span class="token plain"> virtio-pci-bus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          dev: virtio-scsi-device, </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            bus: scsi.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token builtin class-name">type</span><span class="token plain"> SCSI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              dev: scsi-hd, </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                drive </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"hd"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      dev: nvme, </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        drive </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"drive0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bus: nvme-bus.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token builtin class-name">type</span><span class="token plain"> nvme-bus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      dev: virtio-net-pci, </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bus: virtio-bus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token builtin class-name">type</span><span class="token plain"> virtio-pci-bus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          dev: virtio-net-device, </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="list-supported-devices">List supported devices<a href="#list-supported-devices" class="hash-link" aria-label="Direct link to List supported devices" title="Direct link to List supported devices">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ qemu-system-aarch64 </span><span class="token parameter variable" style="color:#36acaa">-device</span><span class="token plain"> </span><span class="token builtin class-name">help</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ qemu-system-aarch64 </span><span class="token parameter variable" style="color:#36acaa">-device</span><span class="token plain"> scsi-hd,help</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="create-disk-image">Create disk image<a href="#create-disk-image" class="hash-link" aria-label="Direct link to Create disk image" title="Direct link to Create disk image">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">qemu-img create </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> raw ubuntu.raw 20G</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">qemu-img create </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> qcow2 ubuntu.qcow2 20G</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>QEMU can boot from 3 ways:</p><ul><li>BIOS in default</li><li>Linux kernel and initrad</li><li>UEFI</li></ul><p>For <strong>UEFI</strong> boot, the <code>-bios</code> option should be used alongside <code>UEFI</code> firmware(<code>OVMF.fd</code> file) being provided to help QEMU do <code>UEFI</code> boot. For instance it is like: <code>-bios OVMF.fd</code>.</p><p>Get a prebuilt <code>OVMF</code> file from the <a href="https://www.kraxel.org/repos/jenkins/edk2/" target="_blank" rel="noopener noreferrer">OVMF</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bios-boot">BIOS boot<a href="#bios-boot" class="hash-link" aria-label="Direct link to BIOS boot" title="Direct link to BIOS boot">​</a></h2><p>Test entering BIOS,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-x86_64 </span><span class="token parameter variable" style="color:#36acaa">-monitor</span><span class="token plain"> stdio </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 1G</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then QEMU will show like this,</p><p><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAtAAAAGQCAIAAAAIhcA6AAAACXBIWXMAAAAAAAAAAQCEeRdzAAAQAElEQVR4nO3cUZrjphIGUO9/JVrm/fLS12OgKEpYVrfPebKFoH6QLJRkJo8HAAAAwF9w/GvvaO2Ao6ag18mEW+Z10h0yBC5e21GvQozyvbHxnj8puOFHJ9dm3e0SDxgUqjWNYlzpZPXppRn1qpX7ez546fmw7vNl45jBEycZ42TCm9zcN4kRKCSsPbjjfagwVGGE6S16mdXV2D7l2k+v/IO9ycqfKR30TV41LMiXKj+/kmMmH6bl51c+CbHVtTqenO+1/cZbOu1T90mwhuW5JE8rbI3JpvxvOZ9/uzfVLazq17ImX2r6HAl2iOmzMvkwDR5SccJYofpoyj9fp6sxqhgcX6o1nWwhYXdZloqe7FW+xIURytWfV697yaYrn08+7dXtG2eYFg2O55u6kVZjdM9ppxY0PUoXJU47KhRM52jEk+0W6s56tBrd/NN5TWPUVj4otxSDP2X622u/BsenP7BCrWC0QLdLUD2OMfoVZRZqdcrB+NP57kqYr3i+19F4X4x2iTLd8+s5Gm3peCZbvik55eDgUtPoatZW/pFY/Ha05DUKTlu6XuUu03GSE3n0lj2zMskYo6/x+IW14luM7qeXe7fbOhqne1fFXUa9guPJGU2rZ6a8FDhTdPo1P+tRr3heccLVXqs5u0eWhg2CdcP/fB59iHuN0o4WKl7AOH/yhGmtYMrxgMkTkk21lY9XY9RUG3C67LV1mK5tcH43eXde0+VdDRMsWjBmstbqmvAHFe6V9rTpIHGXfOml6WSqx4NnWvOxaz/m2OjMzAi13/+uXvkb4HyAafVpr9rtunR14o6rXbYs+NLtfWYiS4PU7vnRgOXrdSZMPl6yevBhKUxcOjPZ2j3DnxXcQ1seIt1B4i7xCEu36epPIh48UzpTsXukdiHK1WvnvK9X7Sq/qfq0Vz5t5jpOfyPJwEsJCwuenOb5iSwNUrvnRwOWr9eZMPl4yerBh6UwcenMZGv3DH9WcA8lm+KHSPeuirvkYxQm+HJ86ReV+YGNTlua8mPTA+JkwjMVV5vesYbJ2Mle+XtydGby6mQ6nuxSGDAeIT+1wspvKV24RkvXK9kls85L8+2eGXxYmle+dDL8tC9/3/Gv1aZH7w4b9Xo54XyM/ASTx0e14gBvmnKcP1nlTMJkuWDMfK94tO6A7Wi1/IUucZJuUzuF8mrES9StFU95OmBtytMx29auzCptD/8oreE0zKjpfPg29vMJ8bxWYyQnmy8EQIcn5sW+ecF/9dx/dXiAz2j/YfGzeb7KNy/4r5u7XwrAWfG/RuZNvnnZf+ncf2lsAAAAAAAA+LyjsXHkuOiuQnGGz/53xJfqG8MsTS1ziZeyfXxhAfh93vGHiuNxrtmrfqp8cGt83wvH6mjT1VjN5oUDgDXXv3Bc42VeH8/Qft07eP7kLTHucIkB+E2CrSj4V/GjpqPRLdcdLW6N/wE9nleh1mhe8eBxhmCt8gmDjskk8QqPCo1CdgcEgFfxFtv9Gp/ZPTJtHY1f29jiLfm5KTmvYyAfY5onk/DRvI4kFqM/l2SG6delGAB8r9FWNN19u02jI9PWTIzyFluoNWpa2mgze/aP1YTl1Ziuf3ywDZ/MAMBXO7P7dr92j0xb37rFJpsyU24/5DPk55VJWF6NpXeL0VvF8SSZAYCvltwFk02jI9PWTIzyFptsyky5/ZDPkJ9XJmF5NabrP53IY3EdAOC9Lxz5vS0To7zFJpsyU17aaJNrGCxgMGBtNZJzj8NnkhTWP24C4Bc7GkFrsunlhKBie7z9nKkVzyvfFNT6+dp+mMaIv7aj5Rc2uSDTBRy1xqtxeOEA4E+yGwEAbzH9J2kAgA3i/xwAAAAAAAAAAPDrHY2NI5fD1DpuH/C2f2Qkjndl+JssUW3Ko7/Ku/dX8KZrURszyLOU8+Y/EOCm3vHXQGpP/6P6f66c7r5Lo53seI043jXhb7VEq2G27LtnCn1qzF0Tv9XVB36Hu71wPLb+c/P2F46bPGe9cLzwwnFxnltdfeB3CF44jn+1vdqmo1GI0W2Kd4i4bzBg3LqUcxp+aQ3jctPVSIb8ObOQ8Jpa00nVYsS1Hr0VLkw5jpec8rHj95VMspqw/QwwFD/aul/jM7tH8hmmp+WPZ7KNvm55htbWMPMoD7aH1fDJ0uev8uPfjW2p1jRD7ZbbnjAoFI9wzcoHfadVRl8LYYAvNXrSfeqBOGp63glW+wajJadfkw+2GiNe86XwhRugUCVTa3Sh4+O1MJmFzScsTzkzl/Mrn1mo7vGg0Oo6ANzigRh0KT8rC9kytZbkgyWvQjByOXzhBihUibvULsqZ67V6v5Xvh8Lybl/52h31fLxtOp7kkwBf7Q4PxKDLmWflaraTtc4ES16FYORMr2mSO1zlZLy4aUuSM+OvDvjWla/dUXHrz5HyygBf560PxPzDaHUDyPSNs8Xj157L8cmF5c3HyPSahrzDVa5FWppyEL68GtNC5bmcX/nzd9RSYICOoxG0JpteTliNEQ8VJ0kOm5lXt1bByeVdmnIt/POZL72ChG3FZKHpUEvzqk15FP7lyOpqxFWCeS01jcLnJxuXy8SIFwoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4G2OxsaR46K7CsUZLqsVBxit8McTAsBFnje8XZtfPM41W+xPlTu8c7SfuycAwJ91/QvHNV7mdYcY3SR3WCsAeLvghSPz3wLiLqP9tTta3Lr6rytGZyZrjeYVDx6Xy+eMY3TDZ5pWwwPANtO9rf063cDiLS3YYvOf85MKWvPzOgZOJulOasuFWLpeAPB2hV1quoHFW1q3NRNjaadM7vGrU24/JGN44QDgq335C0dwfO8LR/4ELxwA/EFeOEbHvXAAwDZvfeGYvlssxfDCMUoVN2VeOArLlZkdAPznaAStyaaXE4KK7fH2c6ZWPK98U1Dr52v7oRYjPiGY8pam0bIEIVebAOC3sr09dmz/lhEAXj3vjnbKx+kXDmsIAH3T/zDxPab/TWTaZA0BAAAAAAAA4I6mf1vyzMjlMLWO2we87R93iONdGf4mS1SbcvCHXT4bLDny3jxLOW/+AwFu6vnBseshUnv6Hyv/Q61kufKMbv48jeNdE/5WS7QaZsu+e6bQp8bcNfFbXX3gd7jbC8dj6z83b3/huMlz1gvHCy8cF+e51dUHfofgheP4V9urbToahRjdpniHiPsGA8atSzmn4ZfWMC43XY1kyJ8zCwmvqTWdVC1GXOvRW+HClON4ySkfO35fySSrCdvPAEPxo637NT6zeySfYXpa/ngm2+jrlmdobQ0zj/Jge1gNnyx9/io//t3YlmpNM9Ruue0Jg0LxCNesfNB3WmX0tRAG+FKjJ92nHoijpuedYLVvMFpy+jX5YKsx4jVfCl+4AQpVMrVGFzo+XguTWdh8wvKUM3M5v/KZheoeDwqtrgPALR6IQZfys7KQLVNrST5Y8ioEI5fDF26AQpW4S+2inLleq/db+X4oLO/2la/dUc/H26bjST4J8NXu8EAMupx5Vq5mO1nrTLDkVQhGzvSaJrnDVU7Gi5u2JDkz/uqAb1352h0Vt/4cKa8M8HXe+kDMP4xWN4BM3zhbPH7tuRyfXFjefIxMr2nIO1zlWqSlKQfhy6sxLVSey/mVP39HLQUG6DgaQWuy6eWE1RjxUHGS5LCZeXVrFZxc3qUp18I/n/nSK0jYVkwWmg61NK/alEfhX46srkZcJZjXUtMofH6ycblMjHihAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADe5mhsHDkuuqtQnOGyWnGANkZw5MwV6XZ80yUGgAXPm9CuDSke55pt72X/fne51RjxK0gtfHApb7IaAHyv6184rvEyr5vECJY6f+ZLr2DA6eAAcJHpPxb/aHu1TUejW26018a12oTJeRVqjeYVDx7HiEfInzntcuZMAHiLeIvtfo3P7B6Ztma229VtfnT+c1NyXsdAMklmLquznl6FzOAAcJHkPpdsGh2ZtmZiLO2Uwclnptx+yMfY+MJxZs29cADwAV/+whEcv+0LR/IVJDM4AFzEC8fo+FtfOLY0xZNKDggAV3jrC8f03WIpxq9+4QhmnV/AuGjmGiXnfr4JAP7vaAStyaaXE4KK7fH2c6ZWPK98U1Dr52v7IRljdPLqsucrnoxxsgkAfivbGwDwFs8vGV44AIB3mf7nAAAAAAAAAACA3+1obBy5HKbWcfuAu1Zj+/Jm/oLrNX/e5SZ/qqYw5Zv8qaDuvRH8JOMf7KhpdOZqzrW5zUa74PdVaAqW9+HPrcNJzz+hXT+nwjg/Xc703ZLkZMdgnO0P2VrrLrd6+C6FOXOzbRTcG0HCUa/RCI9mgx/tppmcu1zw+yo0BadtTw7f6B07YmGclxjnM5STxB1PPql3TS2Occ0z8VZP3vJ1+dQU4ntj72Z5DNRybrFl2O4aHrMXtaApGfJWdz78JtNnVvfxNGqqPdTa0qNaQWt+2Dhhptx8PomT4zWMR5iuRjLkz5ndXnHCa2pNJ7Ua45FY1dpqxIMnM7St3XKF01rTkEHO5PVq+9Z6JbP9HKk1TcePjwMTo9/59Pk1OrN7JJ9helr+eCbb6OuWZ0o+2Gh5l6ZcC58sff4qP54u9GqtaYZ8mPhmKyQ8BjIxMq3d0m2VacLuh6numZla8dd8+Ey2XR+ehw0y5FcP+MfoYVF+pnSPLMXoNgWPgKVHw9HTnrzlmZIPthojXvOl8IUboFAlU2t0oePjhTDJ65JcjZ/P7YdahmTp+ALFi5Nfru6ZyQUMYsSXOBkvWPnah+Q086sH/GPpiTBtGh1ZipGJlyy3lC1Ta0k+WPIqBCOXwxdugEKVuEvtomyZci1ht3T7oZZhNH7ctLQ4+eXqnplfwPLdVcsWXIJM03T8M2kBLxzbaiWrd5uSVyEeedprGvIOVzkZL26qxcgn7JZuPyxlSE6tcL3OXLvumfkFLN9dtWzBJcg0Tcc/kxZ47wvHyedaXHfaN84Wj7/rWXNyefMxMr12JXw5svcq1yKVp7wx4eqCZKaWv9BLi3NyufK1CmmX4tVWoJZqNRvwj6MRtCabXk5YjREPFSdJDpuZV7dWzfYYe8M/n/nSK0jYVkwWmg61NK/ClIMYtYRtgJNrklyKttA0YXAkk3OUvNCUD5/M1u1VaIpjrGYDAAAAAAAAAAAAAAAAYKfpX5+rDfiOvzlW+5ty5RMKto/p7+AB8Ee87JFbdrh3bJOFMaddbpLzstEA4GNe/hc3XjhO8ooAAB1Hz6i1MGZcLtMUxMvXCnLmE9ZmHc8ryLNxDQHgw352pnajmm6QyTFHIyzVmlYPuoz6Jrf8oOi0Vn7KtSNbrhcAvF27Y2184Qg+55vi6se/MjGmVYIxl+YbD5iZY34dyuEB4ApnXgIyYyYHnNbq4oCoyQAAAm1JREFUVs/v39Puq3NMFpq+H5w/cjI8AFzBC8e0ylR50fYm9MIBwH39uheO5ODT1mmX/JTzExlVHBVaSpgJ76UEgM/IbJDBjhiM2e1Va3o5YXRwKXw5Rjzl1Rjt+WcSlmsBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/AHH2KejAQB/hRcOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOBr/Q+/+gHC6a5D6gAAAABJRU5ErkJggg==" width="720" height="400" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="kernel-boot">Kernel boot<a href="#kernel-boot" class="hash-link" aria-label="Direct link to Kernel boot" title="Direct link to Kernel boot">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="uefi-boot">UEFI boot<a href="#uefi-boot" class="hash-link" aria-label="Direct link to UEFI boot" title="Direct link to UEFI boot">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="test-uefi-boot">Test UEFI boot<a href="#test-uefi-boot" class="hash-link" aria-label="Direct link to Test UEFI boot" title="Direct link to Test UEFI boot">​</a></h3><p>aarch64,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">efi</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/UEFI/aarch64/QEMU_EFI.fd"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-aarch64 </span><span class="token parameter variable" style="color:#36acaa">-monitor</span><span class="token plain"> stdio </span><span class="token parameter variable" style="color:#36acaa">-M</span><span class="token plain"> virt </span><span class="token parameter variable" style="color:#36acaa">-cpu</span><span class="token plain"> cortex-a57 </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 1G </span><span class="token parameter variable" style="color:#36acaa">-net</span><span class="token plain"> none </span><span class="token parameter variable" style="color:#36acaa">-bios</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$efi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-aarch64 </span><span class="token parameter variable" style="color:#36acaa">-nographic</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-M</span><span class="token plain"> virt </span><span class="token parameter variable" style="color:#36acaa">-cpu</span><span class="token plain"> cortex-a57 </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 1G </span><span class="token parameter variable" style="color:#36acaa">-net</span><span class="token plain"> none </span><span class="token parameter variable" style="color:#36acaa">-bios</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$efi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>x86_64,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">efi</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/UEFI/ovmf-x64/OVMF-pure-efi.fd"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-x86_64 </span><span class="token parameter variable" style="color:#36acaa">-monitor</span><span class="token plain"> stdio </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 1G </span><span class="token parameter variable" style="color:#36acaa">-net</span><span class="token plain"> none </span><span class="token parameter variable" style="color:#36acaa">-bios</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$efi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then QEMU will drop into the <strong>UEFI</strong> shell, like this following image show,</p><p><img loading="lazy" alt="efi" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABQAAAAMgCAIAAADz+lisAAAACXBIWXMAAAAAAAAAAQCEeRdzAAAQAElEQVR4nO3d6ZajOBIGUL//E/htc5aaqSZBCkUIecG+9/QPW4jQAlmHr53L7QYAAAAAAAAAAAAAAAAAALyV+38d395bSu2ZcfP9tydOLvWc54/b3J/qdsVnzVXLzHNhfwAAgDV2IeSYtfKvj2+roy/vv0ow7oOmlLwu0wWH7efnuaQ/AADAMvmgNWw/HqqOvrz/KgLwyVFW9QcAAJg3EbQWpsGr5KXnjysAAwAALJYJWruIsusTVKuOvhv0OJmt3SnN/sc6u/7HofPjBsWbqwvqJDcnrhPXj6uVJhOckqw23R8AAGDeML8Fqa93aHr03hyC/sP5LxkoH/mSEyjFzt7+b+tUN2puJktKTfcHAAA4JZPfgiiVTFnJ0YM59Pon8+dw9LhzcDQ5geFCkvPslX15AJZ+AQCAdzcRIPNpsDr6cA69XLeTmX+y8/BocgODeWbEZTP1492YnkCpyHR/AACABZL5LTgleSjfP5hDKXqVisczz48yV39oWHZY/3EBWPoFAACuIR+AM1lOAF4VgKtlXxWAq+NKvwAAwMtM5Ld3CMC94DecZ3JRw3GDJdw3hgV7qtdlWL83Yv6SZdZ12/yPkuFCmv0BAAAe6P5bs3EXtOLUl8lUQf9e2NudmJ9/b+jmWJmzmkMf2+Mlx/szXFdvrybmmZxPc133lvyi8kMDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALxI7++y9v5Sa/B3aJP143YAAAB4lF6g3YXhYf/kEJl2AAAAWO+Yb4/tmWCcH2LYDgAAAOtl0qkADAAAwOVtA22zvfm6lF0FYAAAAF6vF2iHAbg6RL4dAAAA1vMJMAAAAF/BzwADAADwFQRgAAAAvsIuhcahN3idH2LYDgAAAOtVP+kVgAEAALiee8ux/dh/+7ZUP24HAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIB30vwzv7f03wcO2k9OKVmnN5/d0bk5BPWTIw5H701+4X4eZzXdv9p+6+zAqvq9/Q8XBwAAfKsgP1RfH9+unc/0/Kuzqu5Jsn9+xGF7SXUfhutKtt9aAXVh/cz+AwAA/CMf3obtx0PLp5fvfyYUxec296H5Oj9or+f5/azuw8Lwed9YXn84brgrAADAV5oIEkHAWJ49qgUzAak6YmYfmq/PDFqddrLysODCIJqZwHT9ZFkAAIB/BMlhGzZ6pySzYjxucFY1yeSDWWZix5qZJdw3qtNOtuc9OnAO9znu8KBxz+8bAADwgYLk0Aty99+CaslxV8W/Zs1mXkoW2bbEi23u29zMM+0TlY/70AyTvf7V9t4SVtWPxz2/bwAAwAcKksMuY/T6BNWS4zbPqmaYZNCq1jmWGi7hvjE3+WF7XiYoZvat2t5bwqr6mXWd2TcAAOADBclhIpXlg0c80ESAiSPQ3MTic3tLOIa0iUGr005Wbr7N7Fu1vTSB5eOe3zcAAOADBclhIpXNRb4l6WVVIhpGuGZ78/WZQYfTThbPXN/MtZgLosMO0/VXXW4AAOCLZALS37fN9qBactxg0PwQCxPRsFR+Cclxk4tKHkqupRkmq4FzuM/J67Jw3NK1BgAAvkgySCQDRil73DeCCnGgik9shqXkxJpvm6/Ph7H8ojKHej2DiZXWlWzvzXNV/cz+AwAA/HL/rdm4Cxu9VNM7Gg8d15kuta2WqdCsltmH+yF93Ts5szfQsVS8CdVF9eYZv83vZzDJzC4tbK/uDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAyM/Pf/7rvb2Q5LT/LLDXOT4KAADAhW0j30Pj30ODZal43FkABgAA+EwC8JlSAAAAXMbf0Lv973IEYAAAAAaCANyMxL2Pi+OPkfN1bq0PpUvzbx4KTmkWzPcHAADgGrZR89YJnMEvysq8zrQ0E28+cJY+1C3NM34LAADAZWQCngCcHAgAAID3NQyHwXcvJ19nWh4RgKvzb7bsigjAAAAAV9ULh0FKvEQAnpj/sDMAAAAXJgALwAAAAF/hwwLwmfkPO5emBAAAwHsZhsNentwejdt3h4KxhnWGC2nOJ1+/ui4AAAA+WS8HLs+HAicAAACv9NAAPPct0AAAALBY6ZuH1w4BAAAAAAAAAAAAAAAAAAAAAAAA5+z+uG7zj/Q2+2/f9o6em1ijys//LRhgNHo8ynOmAQAAwEq9QJv5M0vN1+czcBB0q+3To6/qBgAAwLuYDsDDj4Jn5/O/YNlMmAIwAAAAk94qAO9S5TFkPjp2lurLwAAAAFcyF4DjxNv74eHEZGYCcPNbpn82eu2ZT5iD/kEAlo0BAADeTvOXYN0SAfjY+OdF89yHBuCgfXeoWr/0NjkfAAAAXmPtJ8Anfw/WT8uxQ+/EoOawW7ND3F/KBQAAuJLP+BngXs9jig7SdalOMBkAAADe0UcG4OSnvtVMW/p8GAAAgPeSDMBxn9f+Eqz4xFIAzvcvRWUAAABeLxOAS6+bWfdNAnDmI9xkfwEYAADgSra/0eqYZo+Hmt2O1U7MJwqoPxvHs3qdb63g2qzTHLfZX74FAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOCR7gevrbMtOBzuOHq+eLNC8sTbA9bbnMZE8ZP7MDfDiVn1zprbyVfdDwAAwMVsn/Xzz/3NSDNRJ1k8OLoLpfniE5mnt8Yz+9Y7VF3XrRj8VtWv7lswz7nb5oX3AwAAcDGrgtxcnWTx5EDDcYP+Dz03M8Mz67ptUmUp9Z2vP71vE6WG9Z95PwAAANez6qF/YXhIpsTh27WnPzQsnVxXtefa+vl9W7XMZIWH3g8AAMD19PLJ/bfjKc3GfJ1m+/0gmG3wttrefBuMu3Dflqwrs4TMcHP18/sWj9vct95mTtSvrje5mQAAwGVsn/LPBKFmgFkePIKCmbUE/UvjZsYanrVwXZklNLstqT9xvTJvJ4Z+2v0AAABc0v23bePwrF6dXrdeuMoHj3zg2U6p1D+z2Nu6fVuyrmH9Xrcl9fOd7y3JyWeGrq4r0783HwAA4HpKkSbosM0S904gbPYZvg3Gzbyt9s8sttSY6XByXfkJPKJ+vvPE/t9/m1hIsK65+wEAALiqVUHub8v2UC9RTAeP/Iml+QTj9iazat+WrOu19acbh/sfXLsl65q4HwAAgAtbFeQyIWrYnhk9GWCqgac3aKl9Yt+WrKs624X1z+zP8LpXL9AT7gcAAODCJoLKsKUXoobtcbd852oQSo41PDSxb6vWFdcPep6sX9q36nUP5pYvEo/b7B8MBwAAXNV9IzjUzDzHFNHMG706Qf1jwebRoHPmbSbtxO3n923huu4H+VVM15/bt6Bbb0ql4UrryvQHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADaCP6b6Ej8tzUO9s5484XfYtIxV1/dBi3357bfqxnn6Ddj272n8+e/bDP/M8vLhnnPfvts/Mu82HwCAgu0D3DvEuWPo3TX2+hy7BValwXfYsaTzU31ClnjJ0Kuy4ltlzreazHM0b5JHf4U+4V+Ad/tHJpjPu00VAKDhnQPwn7fNxmb73/5Dq9LgO+xYkgDcIwB/BgH4OQRgAODa3jwANxuDAPxk77BjSRcKwE/eVQH4M7w8AD9orHf7R+bd5gMAUNN8gNu92D7u3H+bbu/Zhttm+7AxueTjJJuHMqVKgz5iP+P5n78u94O5OsN13VpbOuycGffvj8Vuk+GucXsrBY3bo3Gd4evkD+sG/TPzz3yJTNxXwzq7xmOdXre5eQZDJ9un19tby8n1TqwrWWpuH4L5HDsP6wR7kl8XAEBZ5rlk9xxzPLfaHgh+o9WxffoT4N7TW36epZ6r9i3Yz9K1m7guzW7VOsP59yqcvF69HNt8mz93WCfZuZSBb4c8HPRpdjuauK+GMjUX3j+907c3VWbc6nqb923vbXW9vW6r9m1uH4Lh4qk2x50bCABg3v23XXuz8/Ft70ll4gmm9wnwscPtsgG4117dz+FzZPJBMynetEzZoMPxDswPPRy3FHHjo0Hnlwfg5NBHyfuqJFPz5P2TOb06bnW9zfu2V7+63l63VV93yX3IDxdPtbkPcwMBAMxLPhttG3eah3qnDOeTybTnfwY4+aA2USfuGW9a8wExGG74HBksqnpdmrMK5lPah117dejMuMG3BDfzYfytxcEQvZZHBODkPJ8ZgOPru3tdvX/i/s3Tg3GbUz2z3t4mTK+31+3kvmXqBHsSDBdPtbkPx9fN6wIAsEzy2SjufKbmzqcG4OZZ1Y2qPrAmFzV9WfNPxsOC8Z6sul5/rPrW5bhsvs6ZAJzp87QAHJyYudbDseL+wztn+HWXmUOvf2bT5r5ezn/dTcwneSlLUx3uVXXzAQBmJJ+N4s5nau686s8gzT2HzT2xDR/EVz2wJhc1fVnzT8bDgvGerLpef7x/AC6VGvYRgONxgyGGSl9rc18v57/uJuaTvJSlqQ73anohAAAFyWejZmPvgXLYHmj+iG/wu6/mfiQ4+aA2USfTbXrfqg+syQfN6iqmr291/kHl0vWKQ+zft8cXw3Obo1TrTAfgZM1vC8Clr4sz663Wr663d/qqfUvuQ/L0YUv+AmWqAQDMuG9k2neHjg8r+famn5bmod5Z06sOnsOGRSb6P6i99/p4Smnyx9GH8yntQ/Nt85Tpcbc/KHu8TY7t25bdi2EGHtYZzqdXufd6V6f5Nja8ScZT/H3KLZdz7gcT82yO3nu7cL3V+hPrbQ403IegQrJOb129+dzCr9Pe63vnPiltDgAAfL6rPx8nc+9Xufo1rfq29QIAAJOuHh4E4J2rX9Cqb1svAAAw6erfJFn65ucP9m3f7/pt6wUAAAAAAAAAAAAAAAAAAAAAGMn8HdFqqWQ7AAAAPMkulx4z8MmCmYEAAADg4V4VgKfrAwAAwIwXBuDpIQAAAGBGHFmPP77ba89Uy7cDAADAes00u208vtj2OZ7VGyIYHQAAAJ4k8+3QjwjAw6MAAACwWO9ngHcBOPguaJ8AAwAAcAHJAJyscKYdAAAAVkr+FugHBWDpFwAAgCc5GYDPfAu09AsAAMBTNX+gt/k26H88FLdLvwAAAAAAAADf6t7x6nkBAADAUgIwAAAAX0EABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWQDxDAAACHdJREFUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgDfwLoHXaw4O8OOYAAAAASUVORK5CYII=" width="1280" height="800" class="img_ev3q"></p><p>Options in detail:</p><ul><li><p><code>-nographic</code>: Don't create a video for the VM, just use the terminal.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>quit QEMU: <code>Ctrl+A X</code>.<br>
<!-- -->enter QEMU monitor console: <code>Ctrl+A C</code>.<br>
<!-- -->see at <a href="https://superuser.com/questions/1087859/how-to-quit-the-qemu-monitor-when-not-using-a-gui" target="_blank" rel="noopener noreferrer">How to quit the QEMU monitor when not using a GUI?</a></p></div></div></li><li><p><code>-monitor stdio</code>: Put QEMU monitor console in the terminal, while guest OS kept in created video device.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>switch between monitor console and guest OS: <code>Ctrl+Alt+1</code> or <code>Ctrl+Alt+2</code>.</p></div></div></li><li><p><code>-net none</code>: Disable iPXE.</p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="boot-x86_64-iso-image">Boot x86_64 ISO image<a href="#boot-x86_64-iso-image" class="hash-link" aria-label="Direct link to Boot x86_64 ISO image" title="Direct link to Boot x86_64 ISO image">​</a></h3><p>Boot x86_64 image in Windows,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">efi</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/UEFI/ovmf-x64/OVMF-pure-efi.fd"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">iso</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ubuntu-22.04-live-server-amd64.iso</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p><code>ubuntu-**-amd64.iso</code> support both <strong>UEFI</strong> and Legacy <strong>BIOS</strong> boot, QEMU use <strong>BIOS</strong> when the option <code>-bios</code> is not specified!</p></div></div><ol><li>Create a disk image to install the ubuntu OS,</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">qemu-img create </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> qcow2 ubuntu-image.qcow2 20G</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Boot to run the Ubuntu OS</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-x86_64 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-monitor</span><span class="token plain"> stdio </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-accel</span><span class="token plain"> whpx </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 8G </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-smp</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-drive</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">file</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ubuntu-image.qcow2 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-bios</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$efi</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-cdrom</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$iso</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Options in details,</p><ul><li><code>-accel whpx</code>: use hardware acceleration</li></ul><ol start="3"><li>[?]<!-- -->Boot the installed Ubuntu OS</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Install OS into a disk image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-x86_64 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-accel</span><span class="token plain"> whpx </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 8G </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-smp</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-bios</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$efi</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-drive</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">file</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ubuntu.qcow2,format</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">qcow2,if</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">virtio </span><span class="token punctuation" style="color:#393A34">\</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="boot-aarch64-iso-image">Boot aarch64 ISO image<a href="#boot-aarch64-iso-image" class="hash-link" aria-label="Direct link to Boot aarch64 ISO image" title="Direct link to Boot aarch64 ISO image">​</a></h3><p>Emulate aarch64 ISO image in Windows,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">efi</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/UEFI/aarch64/QEMU_EFI.fd"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">iso</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"ubuntu-22.04-live-server-arm64.iso"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-aarch64 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-monitor</span><span class="token plain"> stdio </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-machine</span><span class="token plain"> virt </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-cpu</span><span class="token plain"> cortex-a57 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 4G </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-smp</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-drive</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">file</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ubuntu.qcow2,format</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">raw,if</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">virtio </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-bios</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$efi</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-cdrom</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$iso</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Emulate aarch64 ISO image in mac M1,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-aarch64 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-monitor</span><span class="token plain"> stdio </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-machine</span><span class="token plain"> virt </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-accel</span><span class="token plain"> hvf </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-cpu</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 4G </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-smp</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-drive</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">file</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ubuntu.qcow2,format</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">raw,if</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">virtio </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-bios</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$efi</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-cdrom</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$iso</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Options in details,</p><ul><li><code>-accel hvf</code>: use hardware acceleration in mac M1.</li><li><code>-cpu host</code>: use mac M1 arm CPU.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="boot-a-preinstalled-image">Boot a preinstalled image<a href="#boot-a-preinstalled-image" class="hash-link" aria-label="Direct link to Boot a preinstalled image" title="Direct link to Boot a preinstalled image">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># linux</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">fdisk</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-l</span><span class="token plain"> ubuntu-core-22-arm64+raspi.img</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># osx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hdiutil imageinfo ubuntu-core-22-arm64+raspi.img</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">kernel</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/TinyCore/boot/vmlinuz64"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">initrd</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">$</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/TinyCore/boot/corepure64.gz"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">img</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">$</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/TinyCorePure64-14.0.iso"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">efi</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/UEFI/ovmf-x64/OVMF-pure-efi.fd"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">kernel</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/linux_qemu/x86_64/bzImage"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">vmlinuz</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/linux_qemu/x86_64/vmlinux"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">initrd</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/linux_qemu/x86_64/rootfs.ext2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">img</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/linux_qemu/x86_64/rootfs.ext2"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-x86_64 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-nographic</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 4G </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-kernel</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$kernel</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-initrd</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$img</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-append</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"console=ttyS0"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-netdev</span><span class="token plain"> user,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mynet,hostfwd</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tcp::2222-:22 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-device</span><span class="token plain"> virtio-net-pci,netdev</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mynet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="boot-linux-kernel">Boot linux kernel<a href="#boot-linux-kernel" class="hash-link" aria-label="Direct link to Boot linux kernel" title="Direct link to Boot linux kernel">​</a></h3><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2><p><a href="https://joonas.fi/2021/02/uefi-pc-boot-process-and-uefi-with-qemu/" target="_blank" rel="noopener noreferrer">UEFI, PC boot process and UEFI with QEMU | joonas.fi</a></p><p><a href="https://medium.com/@ThyCrow/compiling-the-linux-kernel-and-creating-a-bootable-iso-from-it-6afb8d23ba22" target="_blank" rel="noopener noreferrer">https://medium.com/@ThyCrow/compiling-the-linux-kernel-and-creating-a-bootable-iso-from-it-6afb8d23ba22</a></p><p><a href="https://levelup.gitconnected.com/probably-the-simplest-way-to-install-debian-ubuntu-in-qemu-2db6afde27ef" target="_blank" rel="noopener noreferrer">https://levelup.gitconnected.com/probably-the-simplest-way-to-install-debian-ubuntu-in-qemu-2db6afde27ef</a></p><p><a href="https://krinkinmu.github.io/2020/11/21/EFI-aarch64.html" target="_blank" rel="noopener noreferrer">UEFI on AARCH64 | Welcome to the Mike’s homepage!</a></p><p><a href="https://github.com/tianocore/tianocore.github.io/wiki/OVMF" target="_blank" rel="noopener noreferrer">OVMF · tianocore/tianocore.github.io Wiki · GitHub</a></p><p><a href="https://wiki.debian.org/Arm64Qemu" target="_blank" rel="noopener noreferrer">https://wiki.debian.org/Arm64Qemu</a></p><p><a href="http://cdn.kernel.org/pub/linux/kernel/people/will/docs/qemu/qemu-arm64-howto.html" target="_blank" rel="noopener noreferrer">http://cdn.kernel.org/pub/linux/kernel/people/will/docs/qemu/qemu-arm64-howto.html</a></p><p><a href="https://futurewei-cloud.github.io/ARM-Datacenter/qemu/how-to-launch-aarch64-vm/" target="_blank" rel="noopener noreferrer">https://futurewei-cloud.github.io/ARM-Datacenter/qemu/how-to-launch-aarch64-vm/</a></p><p><a href="https://xryan.net/p/212" target="_blank" rel="noopener noreferrer">https://xryan.net/p/212</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="wiki" term="wiki"/>
        <category label="qemu" term="qemu"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki Coral]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-coral</id>
        <link href="https://liviaerxin.github.io/blog/wiki-coral"/>
        <updated>2023-09-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[wiki-coral]]></summary>
        <content type="html"><![CDATA[<p>Set up Coral Dev Board for employing an Edge TPU coprocessor.</p><p>Prototype new projects demanding fast on-device inference for the ML models.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2><p><a href="https://coral.ai/docs/dev-board/get-started/" target="_blank" rel="noopener noreferrer">Get started with the Dev Board | CoralCoralClose</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background">​</a></h2><p>The official documents <a href="https://coral.ai/docs/dev-board/get-started/" target="_blank" rel="noopener noreferrer">Get started with the Dev Board</a> contains comprehensive how-to contents and rich examples. Here are just some experiences from myself. You can always go back to the official website to review and get the details.</p><p>The recommended method to access the Coral board is using <a href="https://coral.ai/docs/dev-board/mdt/" target="_blank" rel="noopener noreferrer">Mendel Development Tool (mdt)</a>, which is required to be installed on your host machine alongside the <code>Python</code>. Common steps to enter the shell terminal from <code>mdt</code> are in following:</p><ol><li><code>mdt</code> tool generate a pair of <code>SSH key</code>s, save the <code>private key</code> on the host and push the <code>public key</code> to the Coral using <code>http</code> via <code>41337</code> port.</li><li>Coral board has a running a <code>mdt-keymaster</code> server that is listening <code>41337</code> port, and put the <code>public key</code> into <code>~/.ssh/authorized_keys</code>.</li><li><code>mdt shell</code> now can login to the shell terminal of Coral board like <code>ssh mendel@192.168.100.2</code> when connecting over USB-C(OTG) or <code>ssh mendel@indigo-quill.local</code> over the same network where your host PC is.</li></ol><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Coral board is set up by disabling password login in <code>OpenSSH</code> in default, so it must be provided with <code>SSH key</code> otherwise you change the setting to be like <code>PasswordAuthentication yes</code>.</p></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>You can check the <code>key master</code> by,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mendel@indigo-quill:~$ </span><span class="token function" style="color:#d73a49">lsof</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i:41337</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COMMAND    PID   </span><span class="token environment constant" style="color:#36acaa">USER</span><span class="token plain">   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mdt-keyma </span><span class="token number" style="color:#36acaa">7846</span><span class="token plain"> mendel    5u  IPv4  </span><span class="token number" style="color:#36acaa">20302</span><span class="token plain">      0t0  TCP </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.100.2:41337 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LISTEN</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mdt-keyma </span><span class="token number" style="color:#36acaa">7847</span><span class="token plain"> mendel    6u  IPv4  </span><span class="token number" style="color:#36acaa">20619</span><span class="token plain">      0t0  TCP </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.101.2:41337 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LISTEN</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>Although <code>mdt</code> maybe facilitate the access to the Coral board, some magics and additional steps are kept from sight.</p><p>To do not use <code>mdt</code>, we need access the dev board through <code>serial console</code> instead of <code>mdt keymaster</code> server, to make configuration.</p><p>There are general ways to access a just-setup Coral in brief steps:</p><ol><li>Connect to Coral board's <code>serial console</code> by the instructions <a href="https://coral.ai/docs/dev-board/serial-console/" target="_blank" rel="noopener noreferrer">Connect to the Dev Board's serial console</a></li><li>Log into the Dev board by username: <code>mendel</code> and password: <code>mendel</code> in default.</li><li>Enable SSH Password Authentication. Edit <code>/etc/ssh/sshd_config</code> to change <code>PasswordAuthentication no</code> to <code>PasswordAuthentication yes</code>, and <code>sudo service ssh restart</code> to restart the ssh service.</li><li>Log into the shell using username: <code>mendel</code> and password: <code>mendel</code>.</li><li>If you want to keep the secure shell, generate <code>private SSH key</code> stored in host and <code>public SSH key</code> saved into Coral.</li></ol>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="wiki" term="wiki"/>
        <category label="coral" term="coral"/>
        <category label="serial console" term="serial console"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki Cross Compilation]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-cross-compilation</id>
        <link href="https://liviaerxin.github.io/blog/wiki-cross-compilation"/>
        <updated>2023-09-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Wiki Cross Compilation]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cross-compilation-anatomy">Cross Compilation Anatomy<a href="#cross-compilation-anatomy" class="hash-link" aria-label="Direct link to Cross Compilation Anatomy" title="Direct link to Cross Compilation Anatomy">​</a></h2><p>Cross-Compilation ecosystem involves the following components:</p><ul><li>host system<ul><li>cross-Compilation toolchain<ul><li>cross compiler</li><li>cross linker</li><li>cross debugger</li><li>sysroot<ul><li>target system library files</li><li>target system header files</li><li>target system other files</li></ul></li></ul></li></ul></li><li>target system</li></ul><p>Cross-Compilation toolchain:</p><ul><li>GCC</li><li>Buildroot</li><li>Yocto Project</li><li>Crosstool-NG</li><li>Linaro</li><li>Clang/LLVM</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="gcc">GCC<a href="#gcc" class="hash-link" aria-label="Direct link to GCC" title="Direct link to GCC">​</a></h2><p>Let's explore what a toolchain is like and what are needed to build something for a <code>aarch64</code> platform on <code>x86_64</code> debian-like host.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="obtaining-a-cross-compilation-toolchain-for-aarch64">Obtaining a cross-compilation toolchain for <code>aarch64</code><a href="#obtaining-a-cross-compilation-toolchain-for-aarch64" class="hash-link" aria-label="Direct link to obtaining-a-cross-compilation-toolchain-for-aarch64" title="Direct link to obtaining-a-cross-compilation-toolchain-for-aarch64">​</a></h3><p>For simplicity and in a super fast way, we will use a prebuilt and ready-on toolchain in <code>x86_64</code> Ubuntu.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> gcc </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> gcc-aarch64-linux-gnu binutils-aarch64-linux-gnu</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="where-is-cross-compiler">Where is <code>cross compiler</code><a href="#where-is-cross-compiler" class="hash-link" aria-label="Direct link to where-is-cross-compiler" title="Direct link to where-is-cross-compiler">​</a></h3><p>We see <code>cross compiler</code> binary type in host is <code>x86-64</code>,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> /usr/bin/aarch64-linux-gnu-gcc-11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/aarch64-linux-gnu-gcc-11: ELF </span><span class="token number" style="color:#36acaa">64</span><span class="token plain">-bit LSB executable, x86-64, version </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GNU/Linux</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">, dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">sha1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">b1112487d0dcb759db32e15b8f40f28a05484272, </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> GNU/Linux </span><span class="token number" style="color:#36acaa">3.2</span><span class="token plain">.0, stripped</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="where-is-sysroot">Where is <code>sysroot</code><a href="#where-is-sysroot" class="hash-link" aria-label="Direct link to where-is-sysroot" title="Direct link to where-is-sysroot">​</a></h3><p>The <code>sysroot</code> locates in <code>/usr/aarch64-linux-gnu</code>,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ tree </span><span class="token parameter variable" style="color:#36acaa">--filelimit</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> /usr/aarch64-linux-gnu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/aarch64-linux-gnu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp; ├── ar -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/bin/aarch64-linux-gnu-ar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp; ├── as -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/bin/aarch64-linux-gnu-as</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp; ├── ld -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/bin/aarch64-linux-gnu-ld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp; ├── ld.bfd -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/bin/aarch64-linux-gnu-ld.bfd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp; ├── ld.gold -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/bin/aarch64-linux-gnu-ld.gold</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp; ├── nm -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/bin/aarch64-linux-gnu-nm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp; ├── objcopy -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/bin/aarch64-linux-gnu-objcopy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp; ├── objdump -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/bin/aarch64-linux-gnu-objdump</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp; ├── ranlib -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/bin/aarch64-linux-gnu-ranlib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp; ├── readelf -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/bin/aarch64-linux-gnu-readelf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│&nbsp;&nbsp; └── strip -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/bin/aarch64-linux-gnu-strip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── include  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">139</span><span class="token plain"> entries exceeds filelimit, not opening dir</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── Mcrt1.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── Scrt1.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── crt1.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── crti.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── crtn.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── gcrt1.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── grcrt1.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── ld-linux-aarch64.so.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you see, the <code>binutils-aarch64-linux-gnu</code> will install <code>binutils</code> tools in <code>/usr/aarch64-linux-gnu/bin</code>,</p><p>These <code>binutils</code> are also <code>x86_64</code> binaries,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">readlink </span><span class="token variable parameter variable" style="color:#36acaa">-f</span><span class="token variable" style="color:#36acaa"> /usr/aarch64-linux-gnu/bin/ar</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/aarch64-linux-gnu-ar: ELF </span><span class="token number" style="color:#36acaa">64</span><span class="token plain">-bit LSB pie executable, x86-64, version </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SYSV</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">, dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">sha1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">4f75b6dc6fe5ae92c78a51e6479ca2c65bbf5335, </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> GNU/Linux </span><span class="token number" style="color:#36acaa">3.2</span><span class="token plain">.0, stripped</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>While target libraries are <code>aarch64</code> type,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">file</span><span class="token plain"> /usr/aarch64-linux-gnu/lib/crt1.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/aarch64-linux-gnu/lib/crt1.o: ELF </span><span class="token number" style="color:#36acaa">64</span><span class="token plain">-bit LSB relocatable, ARM aarch64, version </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SYSV</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">, </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> GNU/Linux </span><span class="token number" style="color:#36acaa">3.7</span><span class="token plain">.0, not stripped</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="compile-helloc">Compile <code>hello.c</code><a href="#compile-helloc" class="hash-link" aria-label="Direct link to compile-helloc" title="Direct link to compile-helloc">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ aarch64-linux-gnu-gcc-11 hello.c </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token plain"> a.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> a.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a.out: ELF </span><span class="token number" style="color:#36acaa">64</span><span class="token plain">-bit LSB pie executable, ARM aarch64, version </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SYSV</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">, dynamically linked, interpreter /lib/ld-linux-aarch64.so.1, BuildID</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">sha1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">367c436db0697f16039d9249e4a4e809ef9e68b3, </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> GNU/Linux </span><span class="token number" style="color:#36acaa">3.7</span><span class="token plain">.0, not stripped</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="clangllvm">Clang/LLVM<a href="#clangllvm" class="hash-link" aria-label="Direct link to Clang/LLVM" title="Direct link to Clang/LLVM">​</a></h2><p><a href="https://static.linaro.org/connect/bkk19/presentations/bkk19-210.pdf" target="_blank" rel="noopener noreferrer">Cross compilation with Clang and LLVM tools</a></p><p><a href="https://mcilloni.ovh/2021/02/09/cxx-cross-clang/" target="_blank" rel="noopener noreferrer">Cross compiling made easy, using Clang and LLVM · mcilloni's blog</a></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> lld clang llvm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://releases.linaro.org/components/toolchain/binaries/7.5-2019.12/aarch64-linux-gnu/sysroot-glibc-linaro-2.25-2019.12-aarch64-linux-gnu.tar.xz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-xvf</span><span class="token plain"> sysroot-glibc-linaro-2.25-2019.12-aarch64-linux-gnu.tar.xz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> sysroot-glibc-linaro-2.25-2019.12-aarch64-linux-gnu aarch64-linux-gnu</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ll aarch64-linux-gnu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">total 20K</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwxr-xr-x </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11827</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9000</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.0K Dec  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">2019</span><span class="token plain"> etc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwxr-xr-x </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11827</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9000</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.0K Dec  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">2019</span><span class="token plain"> lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwxr-xr-x </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11827</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9000</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.0K Dec  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">2019</span><span class="token plain"> sbin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwxr-xr-x </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11827</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9000</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.0K Dec  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">2019</span><span class="token plain"> usr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwxr-xr-x </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11827</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9000</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">.0K Dec  </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">2019</span><span class="token plain"> var</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> hello.c </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOL</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">#include &lt;stdio.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">int main(int argc, char *argv[])</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  printf("Hello cross-compilation world!</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">");</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOL</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">sysroot</span><span class="token operator" style="color:#393A34">=~</span><span class="token plain">/Documents/sysroot/aarch64-linux-gnu/usr</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">clang </span><span class="token parameter variable" style="color:#36acaa">--target</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">aarch64-linux-gnu hello.c </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token plain"> hello_aarch64 </span><span class="token parameter variable" style="color:#36acaa">-v</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">clang </span><span class="token parameter variable" style="color:#36acaa">--target</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">aarch64-linux-gnu hello.c </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token plain"> hello_aarch64 </span><span class="token parameter variable" style="color:#36acaa">--sysroot</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$sysroot</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">clang </span><span class="token parameter variable" style="color:#36acaa">--target</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">aarch64-linux-gnu  </span><span class="token parameter variable" style="color:#36acaa">-fsanitize</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">undefined </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -fuse-ld</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">lld </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--rtlib</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">compiler-rt </span><span class="token parameter variable" style="color:#36acaa">-stdlib</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">libc++ </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -nostdinc++ </span><span class="token parameter variable" style="color:#36acaa">-nostdlib</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -I</span><span class="token variable" style="color:#36acaa">${sysroot}</span><span class="token plain">/usr/include/ </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Wl,-L</span><span class="token variable" style="color:#36acaa">${sysroot}</span><span class="token plain">/usr/lib </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--sysroot</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$sysroot</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--verbose</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hello.c </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token plain"> hello</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2><p><a href="https://wiki.osdev.org/GCC_Cross-Compiler" target="_blank" rel="noopener noreferrer">https://wiki.osdev.org/GCC_Cross-Compiler</a></p><p><a href="https://github.com/generia/buildroot-osx" target="_blank" rel="noopener noreferrer">https://github.com/generia/buildroot-osx</a></p><p><a href="https://crosstool-ng.github.io/docs/" target="_blank" rel="noopener noreferrer">https://crosstool-ng.github.io/docs/</a></p><p><a href="https://github.com/messense/homebrew-macos-cross-toolchains/blob/main/.github/workflows/aarch64.yml" target="_blank" rel="noopener noreferrer">https://github.com/messense/homebrew-macos-cross-toolchains/blob/main/.github/workflows/aarch64.yml</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="wiki" term="wiki"/>
        <category label="cross-compilation" term="cross-compilation"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki Samba]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-samba</id>
        <link href="https://liviaerxin.github.io/blog/wiki-samba"/>
        <updated>2023-09-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Wiki Samba]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="setting-up-samba">Setting up Samba<a href="#setting-up-samba" class="hash-link" aria-label="Direct link to Setting up Samba" title="Direct link to Setting up Samba">​</a></h2><p><a href="https://phoenixnap.com/kb/ubuntu-samba" target="_blank" rel="noopener noreferrer">How to Install Samba in Ubuntu</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="troubleshooting-samba">Troubleshooting Samba<a href="#troubleshooting-samba" class="hash-link" aria-label="Direct link to Troubleshooting Samba" title="Direct link to Troubleshooting Samba">​</a></h2><p><a href="https://askubuntu.com/questions/1391434/troubleshooting-access-denied-on-samba" target="_blank" rel="noopener noreferrer">Troubleshooting Access Denied on SAMBA - Ask Ubuntu</a></p><div class="language-editorconfig codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/etc/samba.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-editorconfig codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token section selector punctuation" style="color:#393A34">[</span><span class="token section selector" style="color:#00009f">documents</span><span class="token section selector punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">path</span><span class="token plain"> </span><span class="token value attr-value punctuation" style="color:#393A34">=</span><span class="token value attr-value" style="color:#e3116c"> /data/documents</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">valid users </span><span class="token value attr-value punctuation" style="color:#393A34">=</span><span class="token value attr-value" style="color:#e3116c"> @simon</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">guest ok </span><span class="token value attr-value punctuation" style="color:#393A34">=</span><span class="token value attr-value" style="color:#e3116c"> no</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">writable</span><span class="token plain"> </span><span class="token value attr-value punctuation" style="color:#393A34">=</span><span class="token value attr-value" style="color:#e3116c"> yes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">browsable</span><span class="token plain"> </span><span class="token value attr-value punctuation" style="color:#393A34">=</span><span class="token value attr-value" style="color:#e3116c"> yes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="wiki" term="wiki"/>
        <category label="samba" term="samba"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki WPF]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-wpf</id>
        <link href="https://liviaerxin.github.io/blog/wiki-wpf"/>
        <updated>2023-09-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Wiki WPF]]></summary>
        <content type="html"><![CDATA[<p><a href="https://github.com/SingletonSean/wpf-tutorials" target="_blank" rel="noopener noreferrer">GitHub - SingletonSean/wpf-tutorials: Tutorial source code for WPF concepts.</a></p><p><a href="https://github.com/liviaerxin/WPF-MVVM-EFC-Example" target="_blank" rel="noopener noreferrer">GitHub - liviaerxin/WPF-MVVM-EFC-Example: 📲 MVVM (WPF) application built with EFCore, Abstract Factory pattern and dependency injection (Microsoft Unity)</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mvvm">MVVM<a href="#mvvm" class="hash-link" aria-label="Direct link to MVVM" title="Direct link to MVVM">​</a></h2><p><a href="https://www.codeproject.com/Articles/278901/MVVM-Pattern-Made-Simple" target="_blank" rel="noopener noreferrer">MVVM Pattern Made Simple - CodeProject</a></p><p><a href="https://www.codeproject.com/Articles/659614/MVVM-in-Depth" target="_blank" rel="noopener noreferrer">MVVM in Depth - CodeProject</a></p><p><a href="https://www.reddit.com/r/csharp/comments/i3pbmt/my_attempt_to_understand_mvvm_pattern_and/" target="_blank" rel="noopener noreferrer">My attempt to understand MVVM pattern and questions raised during it : csharp</a></p><p><a href="https://docs.microsoft.com/en-us/archive/msdn-magazine/2009/february/patterns-wpf-apps-with-the-model-view-viewmodel-design-pattern" target="_blank" rel="noopener noreferrer">Patterns - WPF Apps With The Model-View-ViewModel Design Pattern | Microsoft Docs</a></p><p><a href="https://docs.microsoft.com/en-us/windows/communitytoolkit/mvvm/introduction" target="_blank" rel="noopener noreferrer">Introduction to the MVVM Toolkit - Windows Community Toolkit | Microsoft Docs</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features">Features<a href="#features" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h2><ul><li><p>IoC, Inversion of Control</p></li><li><p>DI, Dependency Injection</p></li><li><p>Navigation</p></li><li><p>ViewModel-to-ViewModel Communication</p><ul><li><a href="https://dotnetpattern.com/mvvm-light-messenger/" target="_blank" rel="noopener noreferrer">MVVM Light Messenger</a></li><li><a href="https://prismlibrary.com/docs/event-aggregator.html" target="_blank" rel="noopener noreferrer">Event Aggregator | Prism</a></li><li><a href="https://www.reactiveui.net/docs/handbook/message-bus/" target="_blank" rel="noopener noreferrer">ReactiveUI - Message Bus</a></li></ul></li><li><p>Observable Object in ViewModel</p><ul><li><p>Wrapping a non-observable model</p><div class="language-C# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-C# codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// https://docs.microsoft.com/en-us/windows/communitytoolkit/mvvm/observableobject#wrapping-a-non-observable-model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ObservableUser : ObservableObject</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private readonly User user;mvvm-application.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ObservableUser(User user) =&gt; this.user = user;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public string Name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        get =&gt; user.Name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        set =&gt; SetProperty(user.Name, value, user, (u, n) =&gt; u.Name = n);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="principles">Principles<a href="#principles" class="hash-link" aria-label="Direct link to Principles" title="Direct link to Principles">​</a></h2><p><img loading="lazy" alt="MVVM Application" src="/assets/images/mvvm-application-7d0e85c342205cb80179944264fc8d19.png" width="521" height="381" class="img_ev3q"></p><ul><li>View-to-ViewModel one-to-one/many-to-one mapping</li><li>ViewModel-to-ViewModel communication</li><li>ViewModel-to-Model one-to-one/one-to-many binding</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="access-database">Access Database<a href="#access-database" class="hash-link" aria-label="Direct link to Access Database" title="Direct link to Access Database">​</a></h2><p>DAO or Repository</p><p>Entity
DB Context</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="reactiveui">ReactiveUI<a href="#reactiveui" class="hash-link" aria-label="Direct link to ReactiveUI" title="Direct link to ReactiveUI">​</a></h2><p><a href="https://pasoft-sharereactiveui.readthedocs.io/en/stable/basics/to-property/" target="_blank" rel="noopener noreferrer">To property - pasoft-share/ReactiveUI</a></p><p>One of the core features of ReactiveUI is to be able to convert properties to Observables, via WhenAny , and to convert Observables into Properties, via a method called ToProperty . These properties are called Output Properties in ReactiveUI, and they are a huge part of using the framework effectively.</p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="wiki" term="wiki"/>
        <category label="wpf" term="wpf"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki FFmpeg]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-ffmpeg</id>
        <link href="https://liviaerxin.github.io/blog/wiki-ffmpeg"/>
        <updated>2023-09-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Learn FFmpeg]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="best-resources">Best Resources<a href="#best-resources" class="hash-link" aria-label="Direct link to Best Resources" title="Direct link to Best Resources">​</a></h2><p><a href="https://trac.ffmpeg.org/" target="_blank" rel="noopener noreferrer">FFmpeg Wiki</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="wiki" term="wiki"/>
        <category label="ffmpeg" term="ffmpeg"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Linux Boot Process]]></title>
        <id>https://liviaerxin.github.io/blog/linux-boot-process</id>
        <link href="https://liviaerxin.github.io/blog/linux-boot-process"/>
        <updated>2023-09-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Linux Boot Process]]></summary>
        <content type="html"><![CDATA[<p><a href="https://www.freecodecamp.org/news/the-linux-booting-process-6-steps-described-in-detail/" target="_blank" rel="noopener noreferrer">https://www.freecodecamp.org/news/the-linux-booting-process-6-steps-described-in-detail/</a></p><p><a href="https://www.baeldung.com/linux/boot-process" target="_blank" rel="noopener noreferrer">https://www.baeldung.com/linux/boot-process</a></p><p><a href="https://www.thegeekstuff.com/2011/02/linux-boot-process/" target="_blank" rel="noopener noreferrer">https://www.thegeekstuff.com/2011/02/linux-boot-process/</a></p><p><a href="https://opensource.com/article/18/1/analyzing-linux-boot-process" target="_blank" rel="noopener noreferrer">https://opensource.com/article/18/1/analyzing-linux-boot-process</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="Linux Boot Process" term="Linux Boot Process"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Install FFmpeg on Nvidia CUDA Container]]></title>
        <id>https://liviaerxin.github.io/blog/ffmpeg-on-cuda-container</id>
        <link href="https://liviaerxin.github.io/blog/ffmpeg-on-cuda-container"/>
        <updated>2023-09-06T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[FFmpeg on CUDA Container]]></summary>
        <content type="html"><![CDATA[<p><a href="https://docs.nvidia.com/video-technologies/video-codec-sdk/12.0/ffmpeg-with-nvidia-gpu/index.html" target="_blank" rel="noopener noreferrer">Using FFmpeg with NVIDIA GPU Hardware Acceleration - NVIDIA Docs</a></p><p><a href="https://developer.nvidia.com/blog/nvidia-ffmpeg-transcoding-guide/" target="_blank" rel="noopener noreferrer">NVIDIA FFmpeg Transcoding Guide | NVIDIA Technical Blog</a></p><p><a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/user-guide.html" target="_blank" rel="noopener noreferrer">User Guide — container-toolkit 1.13.5 documentation</a></p><p><a href="/blog/wiki-cuda">wiki cuda</a></p><p>This documentation describes to install <code>FFmpeg</code> on <code>nvidia/cuda</code> <strong>container</strong> to use the <strong>Nvidia GPU</strong> to accelerate encoding.</p><p>If you want to know <a href="https://www.cyberciti.biz/faq/how-to-install-ffmpeg-with-nvidia-gpu-acceleration-on-linux/" target="_blank" rel="noopener noreferrer">how to install FFmpeg with NVIDIA GPU on Linux</a>, go to see that.</p><p><strong>FFmpeg</strong> can support hardware-based decoding and encoding for Nvidia GPU card. With the help of Nvidia GPU, <code>h264_nvenc</code> can lead encoding speed with <strong>5x</strong> faster than <code>libx264</code> in <strong>GTX1080</strong> card.</p><p>Let's see how to install everything one by one on the <strong>Nvidia CUDA Docker</strong> container <code>nvidia/cuda:12.2.0-devel-ubuntu20.04</code>, in which CUDA toolkit and GPU driver are already included.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><blockquote><p>It must use <code>nvidia/cuda:xxx-devel-xxx</code> image to build <code>FFmpeg</code>, because the <code>dev</code> image contain all the necessary libraries.</p></blockquote></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2><p>Make sure <strong>Nvidia GPU Driver</strong> is installed in your host machine! As it will be mounted into the <strong>container</strong>. </p><p>Use <code>ldconfig</code> to check if the required Nvidia GPU driver libraries are available inside the container. Such as,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ldconfig </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> libcuda</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><blockquote><p>When running in the <code>nvidia/cuda</code> Docker container, what Nvidia libraries(from the host machine) should be mounted inside the container are specified by the <code>NVIDIA_DRIVER_CAPABILITIES</code> env variable, see <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/user-guide.html#driver-capabilities" target="_blank" rel="noopener noreferrer">driver-capabilities</a>. Here for <code>FFmpeg</code> to employ GPU, it should be included at least as <code>NVIDIA_DRIVER_CAPABILITIES=video,utility</code>.</p></blockquote></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-by-step">Step by Step<a href="#step-by-step" class="hash-link" aria-label="Direct link to Step by Step" title="Direct link to Step by Step">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--runtime</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">nvidia </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">NVIDIA_VISIBLE_DEVICES</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">all </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">NVIDIA_DRIVER_CAPABILITIES</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">compute,utility </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nvidia/cuda nvidia-smi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--runtime</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">nvidia </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">NVIDIA_VISIBLE_DEVICES</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">all </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">NVIDIA_DRIVER_CAPABILITIES</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">compute,utility </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nvidia/cuda </span><span class="token function" style="color:#d73a49">bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="complete-dockerfile">Complete Dockerfile<a href="#complete-dockerfile" class="hash-link" aria-label="Direct link to Complete Dockerfile" title="Direct link to Complete Dockerfile">​</a></h2><p>The source code is available at <a href="/code-snippets/dockerfiles/nvidia-cuda-ffmpeg/Dockerfile">Dockerfile</a></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">nvidia-cuda-ffmpeg/Dockerfile</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># pull official base image, NOTE to use `devel`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM nvidia/cuda</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">12.2.0</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">devel</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ubuntu20.04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Set environment variables to prevent interactive prompts during installation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENV DEBIAN_FRONTEND=noninteractive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Install dependencies</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get update </span><span class="token important">&amp;&amp;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get install </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">y wget git make build</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">essential pkg</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config yasm cmake libtool libc6 libc6</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dev unzip libnuma1 libnuma</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dev </span><span class="token important">&amp;&amp;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get clean </span><span class="token important">&amp;&amp;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rm </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">rf /var/lib/apt/lists/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Install FFmpeg 6.1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN mkdir </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">p /opt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN cd /opt/ </span><span class="token important">&amp;&amp;</span><span class="token plain"> wget https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/FFmpeg/nv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">codec</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">headers/releases/download/n12.1.14.0/nv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">codec</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">12.1.14.0.tar.gz </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">O nv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">codec</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">12.1.14.0.tar.gz </span><span class="token important">&amp;&amp;</span><span class="token plain"> tar </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xf nv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">codec</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">12.1.14.0.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN cd /opt/nv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">codec</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">12.1.14.0 </span><span class="token important">&amp;&amp;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    make install PREFIX=/usr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN cd /opt </span><span class="token important">&amp;&amp;</span><span class="token plain"> wget https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//ffmpeg.org/releases/ffmpeg</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">6.1.tar.xz </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">O ffmpeg</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">6.1.tar.xz </span><span class="token important">&amp;&amp;</span><span class="token plain"> tar </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xf ffmpeg</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">6.1.tar.xz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN cd /opt/ffmpeg</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">6.1 </span><span class="token important">&amp;&amp;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ./configure </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">enable</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cuda </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">enable</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cuvid </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">enable</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nvdec </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">enable</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nvenc </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">enable</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nonfree </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">enable</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">libnpp </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">extra</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cflags=</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">I/usr/local/cuda/include </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">extra</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ldflags=</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">L/usr/local/cuda/lib64 </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">enable</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">libfreetype </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">enable</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">libharfbuzz </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">enable</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">libfontconfig </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">enable</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">libfribidi </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">enable</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">filter=drawtext </span><span class="token important">&amp;&amp;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    make </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">j 8 </span><span class="token important">&amp;&amp;</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    make install PREFIX=/usr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"ffmpeg"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"-version"</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="known-issues">Known issues<a href="#known-issues" class="hash-link" aria-label="Direct link to Known issues" title="Direct link to Known issues">​</a></h2><p>Nvidia Docker encoding stops after long running time with such error message: <code>CUDA_ERROR_NO_DEVICE: no CUDA-capable device is detected</code>.</p><p><a href="https://github.com/jellyfin/jellyfin/issues/9287" target="_blank" rel="noopener noreferrer">[Issue]: NVidia Docker transcoding randomly stops working after 5 minutes to 4 hours later. · Issue #9287 · jellyfin/jellyfin · GitHub</a></p><p>Possible solution:</p><p>Edit <code>/etc/defautls/grub</code>,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"quiet splash systemd.unified_cgroup_hierarchy=0"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then run <code>update-grub</code> and reboot.</p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="ffmpeg" term="ffmpeg"/>
        <category label="docker" term="docker"/>
        <category label="cuda" term="cuda"/>
        <category label="nvidia" term="nvidia"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Intel VROC RAID on Ubuntu]]></title>
        <id>https://liviaerxin.github.io/blog/raid-intel-vroc</id>
        <link href="https://liviaerxin.github.io/blog/raid-intel-vroc"/>
        <updated>2023-08-29T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Setup Intel VROC RAID on Ubuntu]]></summary>
        <content type="html"><![CDATA[<ul><li><a href="https://www.intel.com/content/dam/support/us/en/documents/memory-and-storage/ssd-software/Linux_VROC_6-0_User_Guide.pdf" target="_blank" rel="noopener noreferrer">Linux VROC User Guide</a></li><li><a href="https://www.intel.com/content/dam/support/us/en/documents/memory-and-storage/ssd-software/VROC-Ubuntu-Setup-UserGuide-342787-US.pdf" target="_blank" rel="noopener noreferrer">VROC Ubuntu Setup</a></li></ul><p>This document will present how to create and manage <strong>Intel VROC RAID</strong> on Ubuntu with <code>mdadm</code> utility(It should also work in other Linux).</p><p>For setting up <strong>Intel VROC RAID</strong> on Ubuntu in <code>BIOS</code>, go to see <a href="https://www.intel.com/content/dam/support/us/en/documents/memory-and-storage/ssd-software/VROC-Ubuntu-Setup-UserGuide-342787-US.pdf" target="_blank" rel="noopener noreferrer">VROC Ubuntu Setup</a>.</p><p>For creating <strong>software RAID</strong> on Ubuntu, go to see:</p><p><a href="/blog/raid-on-ubuntu">Ubuntu RAID</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background">​</a></h2><p>On the premise machine, there are 2 NVMe SSDs and 8 SATA hard drives(HDDs), and also it ships with a in-box hardware-assisted RAID controller(<strong>Intel VROC</strong>) on the Intel CPU, which is supposed to keep overall advantages over <strong>software RAID</strong>.</p><p>For me, I would like to use these 8 HDDs(<code>sda</code>, <code>sdb</code>, ..., <code>sdh</code>) to store data for long time, while retaining the balance between redundancy and performance. So here <strong>RAID 5</strong>(Stripping with Parity) comes into my mind.</p><p>To leverage the power of <strong>Intel VROC</strong> in Ubuntu(Linux), you also need the <code>mdadm</code> command line tool to manage intel VROC which support RAID 0, RAID 1, RAID 5 and RAID 10</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>In my understanding, the intel VROC register in system with the common interface with <code>mdadm</code>, so the <code>mdadm</code> software can operate it. And running command will show the <code>mdadm</code> is using intel VROC,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> --detail-platform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       Platform </span><span class="token builtin class-name">:</span><span class="token plain"> Intel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">R</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Virtual RAID on CPU</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Version </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8.0</span><span class="token plain">.3.1002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RAID Levels </span><span class="token builtin class-name">:</span><span class="token plain"> raid0 raid1 raid10 raid5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Chunk Sizes </span><span class="token builtin class-name">:</span><span class="token plain"> 4k 8k 16k 32k 64k 128k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2TB volumes </span><span class="token builtin class-name">:</span><span class="token plain"> supported</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      2TB disks </span><span class="token builtin class-name">:</span><span class="token plain"> supported</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Max Disks </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Max Volumes </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> per array, </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"> per controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> I/O Controller </span><span class="token builtin class-name">:</span><span class="token plain"> /sys/devices/pci0000:00/0000:00:17.0 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SATA</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Port7 </span><span class="token builtin class-name">:</span><span class="token plain"> /dev/sdh </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ZR909K07</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Port6 </span><span class="token builtin class-name">:</span><span class="token plain"> /dev/sdg </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ZV70BN24</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Port3 </span><span class="token builtin class-name">:</span><span class="token plain"> /dev/sdd </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ZV70BD3T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Port4 </span><span class="token builtin class-name">:</span><span class="token plain"> /dev/sde </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ZR909Q89</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Port1 </span><span class="token builtin class-name">:</span><span class="token plain"> /dev/sdb </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ZRT0S2FM</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Port5 </span><span class="token builtin class-name">:</span><span class="token plain"> /dev/sdf </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ZR9099MM</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Port2 </span><span class="token builtin class-name">:</span><span class="token plain"> /dev/sdc </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ZR909AGN</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Port0 </span><span class="token builtin class-name">:</span><span class="token plain"> /dev/sda </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ZV70BMH9</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       Platform </span><span class="token builtin class-name">:</span><span class="token plain"> Intel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">R</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Virtual RAID on CPU</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Version </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8.0</span><span class="token plain">.3.1002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RAID Levels </span><span class="token builtin class-name">:</span><span class="token plain"> raid0 raid1 raid10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Chunk Sizes </span><span class="token builtin class-name">:</span><span class="token plain"> 4k 8k 16k 32k 64k 128k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2TB volumes </span><span class="token builtin class-name">:</span><span class="token plain"> supported</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      2TB disks </span><span class="token builtin class-name">:</span><span class="token plain"> supported</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Max Disks </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">96</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Max Volumes </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> per array, </span><span class="token number" style="color:#36acaa">24</span><span class="token plain"> per controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 3rd party NVMe </span><span class="token builtin class-name">:</span><span class="token plain"> supported</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> I/O Controller </span><span class="token builtin class-name">:</span><span class="token plain"> /sys/devices/pci0000:8d/0000:8d:00.5 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VMD</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> NVMe under VMD </span><span class="token builtin class-name">:</span><span class="token plain"> /dev/nvme0n1 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">633FC084FCVK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> NVMe under VMD </span><span class="token builtin class-name">:</span><span class="token plain"> /dev/nvme1n1 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">633FC0DEFCVK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> I/O Controller </span><span class="token builtin class-name">:</span><span class="token plain"> /sys/devices/pci0000:6f/0000:6f:00.5 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VMD</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> I/O Controller </span><span class="token builtin class-name">:</span><span class="token plain"> /sys/devices/pci0000:51/0000:51:00.5 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VMD</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Install Ubuntu Server on RAID:
Ubuntu Server Image has inbox <code>mdadm</code> utilities and <code>VMD</code> drivers(which enable intel VROC functionalities), so it is quite convenient to create the RAID 1 on 2 SSDs either in BIOS stage(for intel VROC only) or in storage layer step during OS installation stage(software RAID), then install Ubuntu Server OS on the RAID 1.</p><p>After creating the RAID 1 via intel VROC in BIOS, Ubuntu Server installation can detect the RAID created by VROC in step when set up the storage layer.</p><p>If you skip BIOS to create RAID during OS installation, remember to add <code>-e isms</code> when using <code>mdadm</code> to create RAID(you can enter the terminal, do ``) otherwise the RAID is software based and does not apply VROC.</p><p>Install Ubuntu Desktop on RAID:
Ubuntu Desk Image does not ship the <code>mdadm</code> tool, so it is nearly impossible to create RAID and install Ubuntu Desktop OS on the RAID(however this one <a href="https://askubuntu.com/questions/1299978/install-ubuntu-20-04-desktop-with-raid-1-and-lvm-on-machine-with-uefi-bios" target="_blank" rel="noopener noreferrer">Install Ubuntu 20.04 desktop with RAID 1 and LVM on machine with UEFI BIOS</a> from stackoverflow seems to be successful)</p></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set-up-raid-5-array">Set up RAID 5 array<a href="#set-up-raid-5-array" class="hash-link" aria-label="Direct link to Set up RAID 5 array" title="Direct link to Set up RAID 5 array">​</a></h2><p>Here, I use 8 disks: <code>/dev/sda</code>, <code>/dev/sdb</code>, ..., <code>/dev/sdh</code> to create <strong>RAID 5</strong> array and mount it for use in practice.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="create-raid-array">Create RAID array<a href="#create-raid-array" class="hash-link" aria-label="Direct link to Create RAID array" title="Direct link to Create RAID array">​</a></h3><p>When creating RAID array, <strong>Intel VROC</strong> is different with <strong>software RAID</strong> array creation as an additional container is needed to create firstly. Inside the container, some information is labelled into the drives for Intel VROC controller to recognize them.</p><ol><li>Create RAID Container with Intel IMSM Metadata</li></ol><p>the total number of drives is 8 and <code>-e imsm</code>.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--create</span><span class="token plain"> /dev/md/imsm0 /dev/sd</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a-h</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> imsm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Then, Create a RAID array in the <code>/dev/md/imsm0</code> container using total 8 drives with <strong>RAID 5</strong>.</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--create</span><span class="token plain"> /dev/md/md0 /dev/md/imsm0 </span><span class="token parameter variable" style="color:#36acaa">-l</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mount-the-raid-array-for-use">Mount the RAID array for use<a href="#mount-the-raid-array-for-use" class="hash-link" aria-label="Direct link to Mount the RAID array for use" title="Direct link to Mount the RAID array for use">​</a></h3><p>After you create the RAID array in above step, all partitions and data will be erased from all individual disks.</p><p>The RAID array is treated as a <strong>logical drive</strong> now.</p><ol><li>Create a <code>ext4</code> filesystem on the RAID array</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> mkfs.ext4 </span><span class="token parameter variable" style="color:#36acaa">-F</span><span class="token plain"> /dev/md/md0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Mount the RAID array</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> /mnt/md0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mount</span><span class="token plain"> /dev/md/md0 /mnt/md0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="save-raid-array-configuration">Save RAID array configuration<a href="#save-raid-array-configuration" class="hash-link" aria-label="Direct link to Save RAID array configuration" title="Direct link to Save RAID array configuration">​</a></h3><p>To make sure that the RAID array is reassembled and mounted automatically after reboot, we will have to add some necessary information into <code>/etc/mdadm/mdadm.conf</code> and <code>/etc/fstab</code>.</p><ol><li>Scan active array and append into <code>/etc/mdadm/mdadm.conf</code> file with following:</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--detail</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--scan</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"> /etc/mdadm/mdadm.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Update <code>initramfs</code>, so the array will be available at early boot:</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> update-initramfs </span><span class="token parameter variable" style="color:#36acaa">-u</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Add mount options to <code>/etc/fstab</code>, you can use <code>UUID=xxxx</code> instead of the <code>/dev/md0</code>.</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'/dev/md0 /mnt/md0 ext4 defaults,nofail,discard 0 0'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"> /etc/fstab</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="remove-raid-array">Remove RAID Array<a href="#remove-raid-array" class="hash-link" aria-label="Direct link to Remove RAID Array" title="Direct link to Remove RAID Array">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="optional-umount-the-array-from-filesystem">[Optional]<!-- --> Umount the array from filesystem<a href="#optional-umount-the-array-from-filesystem" class="hash-link" aria-label="Direct link to optional-umount-the-array-from-filesystem" title="Direct link to optional-umount-the-array-from-filesystem">​</a></h3><p>Umount the array from filesystem if mounted,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">umount</span><span class="token plain"> /dev/md/md0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="stop-raid-container-and-array">Stop RAID container and array<a href="#stop-raid-container-and-array" class="hash-link" aria-label="Direct link to Stop RAID container and array" title="Direct link to Stop RAID container and array">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Stop RAID container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--stop</span><span class="token plain"> /dev/md/imsm0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Stop RAID array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--stop</span><span class="token plain"> /dev/md/md0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Stop all arrays and containers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--stop</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--scan</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="removes-the-raid-metadata">Removes the RAID metadata<a href="#removes-the-raid-metadata" class="hash-link" aria-label="Direct link to Removes the RAID metadata" title="Direct link to Removes the RAID metadata">​</a></h3><p>Removes the RAID metadata on each <strong>drive</strong> and resets the <strong>drive</strong> to normal</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> --zero-superblock /dev/sda</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> --zero-superblock /dev/sd</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a-h</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="optional-remove-raid-configuration">[Optional]<!-- --> Remove RAID configuration<a href="#optional-remove-raid-configuration" class="hash-link" aria-label="Direct link to optional-remove-raid-configuration" title="Direct link to optional-remove-raid-configuration">​</a></h3><p>Remove mount information to the array if exist. Edit the <code>/etc/fstab</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/etc/fstab</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">nano</span><span class="token plain"> /etc/fstab</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Also, remove the array definition if exist, from the <code>/etc/mdadm/mdadm.conf</code> file:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/etc/mdadm/mdadm.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">nano</span><span class="token plain"> /etc/mdadm/mdadm.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="manage-raid-array-with-mdadm">Manage RAID Array with mdadm<a href="#manage-raid-array-with-mdadm" class="hash-link" aria-label="Direct link to Manage RAID Array with mdadm" title="Direct link to Manage RAID Array with mdadm">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="find-all-raid-arrays">Find all RAID arrays<a href="#find-all-raid-arrays" class="hash-link" aria-label="Direct link to Find all RAID arrays" title="Direct link to Find all RAID arrays">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /proc/mdstat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Personalities </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raid1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">linear</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">multipath</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raid0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raid6</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raid5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raid4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raid10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">md126 </span><span class="token builtin class-name">:</span><span class="token plain"> active raid1 nvme0n1</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> nvme1n1</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">3800741888</span><span class="token plain"> blocks super external:/md127/0 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">/2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">UU</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">md127 </span><span class="token builtin class-name">:</span><span class="token plain"> inactive nvme0n1</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> nvme1n1</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">10402</span><span class="token plain"> blocks super external:imsm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unused devices: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="query-information-on-a-raid-array">Query information on a RAID array<a href="#query-information-on-a-raid-array" class="hash-link" aria-label="Direct link to Query information on a RAID array" title="Direct link to Query information on a RAID array">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--detail</span><span class="token plain"> /dev/md0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--query</span><span class="token plain"> /dev/md0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="query-information-on-a-physical-disk-drive">Query information on a physical disk drive<a href="#query-information-on-a-physical-disk-drive" class="hash-link" aria-label="Direct link to Query information on a physical disk drive" title="Direct link to Query information on a physical disk drive">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--query</span><span class="token plain"> /dev/sda</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--examine</span><span class="token plain"> /dev/sda</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="stop-a-raid-array">Stop a RAID array<a href="#stop-a-raid-array" class="hash-link" aria-label="Direct link to Stop a RAID array" title="Direct link to Stop a RAID array">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--stop</span><span class="token plain"> /dev/md0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Stop all arrays</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--stop</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--scan</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="starting-a-raid-array">Starting a RAID Array<a href="#starting-a-raid-array" class="hash-link" aria-label="Direct link to Starting a RAID Array" title="Direct link to Starting a RAID Array">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># This works if the array is defined in the configuration `/etc/mdadm/mdadm.conf` file.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--assemble</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--scan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--assemble</span><span class="token plain"> /dev/md0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># If the array is not persisted in `/etc/mdadm/mdadm.conf` file but keeping RAID metadata</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--assemble</span><span class="token plain"> /dev/md0 /dev/sda /dev/sdb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="adding-spare-devices-to-a-raid-array">Adding spare devices to a RAID Array<a href="#adding-spare-devices-to-a-raid-array" class="hash-link" aria-label="Direct link to Adding spare devices to a RAID Array" title="Direct link to Adding spare devices to a RAID Array">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> /dev/md0 </span><span class="token parameter variable" style="color:#36acaa">--add</span><span class="token plain"> /dev/sde</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ lsblk </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        FSTYPE          FSVER  LABEL UUID                                 FSAVAIL FSUSE% MOUNTPOINTS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loop0       squashfs        </span><span class="token number" style="color:#36acaa">4.0</span><span class="token plain">                                                     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">% /snap/core20/1974</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loop1       squashfs        </span><span class="token number" style="color:#36acaa">4.0</span><span class="token plain">                                                     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">% /snap/lxd/24322</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loop2       squashfs        </span><span class="token number" style="color:#36acaa">4.0</span><span class="token plain">                                                     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">% /snap/snapd/19457</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sda         isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdb         isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdc         isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdd         isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sde         isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdf         isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdg         isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdh         isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nvme0n1     isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─md126                                                                                      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ├─md126p1 vfat            FAT32        292B-DB66                                 1G     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% /boot/efi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └─md126p2 ext4            </span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain">          0f58386c-334d-4877-8051-b855bae37fb0    </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">.3T     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─md127                                                                                      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nvme1n1     isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─md126                                                                                      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ├─md126p1 vfat            FAT32        292B-DB66                                 1G     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% /boot/efi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └─md126p2 ext4            </span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain">          0f58386c-334d-4877-8051-b855bae37fb0    </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">.3T     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─md127                         </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fdisk</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-l</span><span class="token plain"> /dev/sda</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="delete-partition-and-data-in-disk">Delete partition and data in disk<a href="#delete-partition-and-data-in-disk" class="hash-link" aria-label="Direct link to Delete partition and data in disk" title="Direct link to Delete partition and data in disk">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">dd</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">if</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/dev/zero </span><span class="token assign-left variable" style="color:#36acaa">of</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/dev/sda  </span><span class="token assign-left variable" style="color:#36acaa">bs</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">512</span><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">count</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="intel vroc" term="intel vroc"/>
        <category label="raid" term="raid"/>
        <category label="ubuntu" term="ubuntu"/>
        <category label="best practice" term="best practice"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[RAID on Ubuntu]]></title>
        <id>https://liviaerxin.github.io/blog/raid-on-ubuntu</id>
        <link href="https://liviaerxin.github.io/blog/raid-on-ubuntu"/>
        <updated>2023-08-29T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Setup Intel VROC RAID on Ubuntu]]></summary>
        <content type="html"><![CDATA[<p><a href="https://www.digitalocean.com/community/tutorials/how-to-create-raid-arrays-with-mdadm-on-ubuntu-22-04" target="_blank" rel="noopener noreferrer">How To Create RAID Arrays with mdadm on Ubuntu 22.04  | DigitalOcean</a></p><p><a href="https://help.ubuntu.com/community/Installation/SoftwareRAID" target="_blank" rel="noopener noreferrer">SoftwareRAID</a></p><p><a href="https://www.servers.com/support/knowledge/linux-administration/how-to-install-ubuntu-with-software-raid-1" target="_blank" rel="noopener noreferrer">How to install Ubuntu with software RAID-1</a></p><p>What is RAID?</p><p>The Redundant Array of Independent Disks, commonly known as RAID, is a technology used to combine multiple physical disk drives into a single logical unit for the purpose of data storage and performance improvement. </p><p>This blog will demonstrate to set up <strong>software RAID</strong> on Ubuntu(It should also work on other Linux).</p><p>To setup <strong>Intel VROC RAID</strong> on Ubuntu, go to see: <a href="/blog/raid-intel-vroc">Intel VROC RAID on Ubuntu</a>.</p><p>The hierarchy of storage abstraction layers in Linux.</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |   Application          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |                        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |open("/mnt/media/1.png")|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |                        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |    Mount Point         |   Higher layer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |                        |        ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |/dev/sda1 -&gt; /mnt/media |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |/dev/sda2 -&gt; /mnt/file  |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |                        |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +------------------------+        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +------------------------+        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |    Logical Volume      |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |                        |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | /dev/mapper/vg1-lg1,   |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | /dev/mapper/vg1-lg2,   |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +------------------------+        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +------------------------+        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |     File System        |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |                        |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |   ext4, Btrfs, etc     |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |                        |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +------------------------+        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +------------------------+        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |      Partition         |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |                        |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |  /dev/sda1, /dev/sda2  |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |                        |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +------------------------+        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +------------------------+        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |  Physical Disk Drive   |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |                        |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |    HDD /dev/hda        |  Lower layer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |    SSD /dev/sda        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <strong>RAID</strong> is treated as <strong>Logical Disk Drive</strong> above the <strong>Physical Disk Drive</strong> layer. So you should do partitioning on it after being created.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background">​</a></h2><p>Recently, there is a chance for me to install Ubuntu(server) OS on a Dell Precision xxx workstation which is includes 2 NVMe SSDs and 8 SATA hard drives(HDDs) and has in-box hardware-assisted RAID controller(<strong>Intel VROC</strong>). In the past, I just play cloud virtual machines or personal host with single disk.</p><p>Configuring storage is a critical part of setting up a reliable workstation. So firstly, how to organize these following disks to their roles?</p><ul><li>2 SSDs hold the system to load quickly</li><li>8 HDDs store data persistently</li></ul><p>In order to access these physical disks easily and reduce damages from data loss, I need to combine multiple disks to act as one, while keep data redundant and backup. After step-by-step research, there are some enterprise solutions present for me. These drive layer or file system layer approaches designed for specific purposes have their own advantages over others while they maybe achieve some same features.</p><p>Here are some benefits and shortcomings of them alongside common use cases:</p><ul><li><p><strong>RAID</strong>(Redundant Array of Independent Disks)
Abstraction level: drive layer
Concept: RAID uses multiple drives to act as one(logical drive).
Benefits: improve data redundancy and data read/write performance</p></li><li><p><strong>LVM</strong>(Logical Volume Management)
Abstraction level: file system layer
Concept: Manage a logical volume over multiple drives, each drive is a Physical Volume(PV).
Benefits: combine multiple disks into one logical volume, extend the volume with new disk added, increase/decrease mounted folder in file system</p></li><li><p><strong>ZFS</strong>(Z File System)</p></li></ul><p>There are three types of raid, as Wiki saying:</p><ol><li>hardware RAID</li><li>software RAID<ul><li><strong>mdadm</strong> in Linux</li></ul></li><li>hardware-assisted software RAID, firmware RAID, fake RAID<ul><li><strong>Intel VROC</strong> (Virtual RAID on CPU)</li></ul></li></ol><p>This document will introduce how to set up software RAID(RAID0, RAID1, RAID5, RAID 10) on <strong>already-installed</strong> Ubuntu.</p><p>To create a RAID to hold the Ubuntu OS when installing Ubuntu, see <a href="https://help.ubuntu.com/community/Installation/SoftwareRAID" target="_blank" rel="noopener noreferrer">SoftwareRAID</a> or <a href="https://www.servers.com/support/knowledge/linux-administration/how-to-install-ubuntu-with-software-raid-1" target="_blank" rel="noopener noreferrer">How to install Ubuntu with software RAID-1</a></p><p>In addition, there are different challenges you will face when installing Ubuntu Server and Ubuntu Desktop.</p><blockquote><p>Install Ubuntu Server on RAID:
Ubuntu Server Image has inbox <code>mdadm</code> utilities, so it is quite convenient to create the software RAID on multiple disks then install Ubuntu Server OS on the RAID in storage layer step during OS installation stage.</p></blockquote><hr><blockquote><p>Install Ubuntu Desktop on RAID:
Ubuntu Desk Image does not ship the <code>mdadm</code> tool, so it is nearly impossible to create RAID and install Ubuntu Desktop OS on the RAID(however this one <a href="https://askubuntu.com/questions/1299978/install-ubuntu-20-04-desktop-with-raid-1-and-lvm-on-machine-with-uefi-bios" target="_blank" rel="noopener noreferrer">Install Ubuntu 20.04 desktop with RAID 1 and LVM on machine with UEFI BIOS</a> from stackoverflow seems to be successful)</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set-up-raid-array">Set up RAID array<a href="#set-up-raid-array" class="hash-link" aria-label="Direct link to Set up RAID array" title="Direct link to Set up RAID array">​</a></h2><p>To create a RAID array ready to use in practice, there are always common steps:</p><ol><li>Create a RAID array(RAID 0, RAID 1, RAID 5 or RAID 10)</li><li>Mount the RAID array</li><li>Save the RAID array configuration for system boot</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="create-raid-array-with-mdadm">Create RAID array with mdadm<a href="#create-raid-array-with-mdadm" class="hash-link" aria-label="Direct link to Create RAID array with mdadm" title="Direct link to Create RAID array with mdadm">​</a></h3><p>Create <strong>RAID 0</strong> array using devices: <code>/dev/sda</code> and <code>/dev/sdb</code></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--create</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--verbose</span><span class="token plain"> /dev/md0 </span><span class="token parameter variable" style="color:#36acaa">-l</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> /dev/sda /dev/sdb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mount-raid-array-for-use">Mount RAID array for use<a href="#mount-raid-array-for-use" class="hash-link" aria-label="Direct link to Mount RAID array for use" title="Direct link to Mount RAID array for use">​</a></h3><ol><li>Create a <code>ext4</code> filesystem on the array</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> mkfs.ext4 </span><span class="token parameter variable" style="color:#36acaa">-F</span><span class="token plain"> /dev/md0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Mount the array</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> /mnt/md0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mount</span><span class="token plain"> /dev/md0 /mnt/md0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="save-raid-array-configuration">Save RAID array configuration<a href="#save-raid-array-configuration" class="hash-link" aria-label="Direct link to Save RAID array configuration" title="Direct link to Save RAID array configuration">​</a></h3><p>Persist the RAID array configuration to make the system reassemble and mount the RAID array automatically after reboot.</p><p>Append the line to <code>/etc/mdadm/mdadm.conf</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--detail</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--scan</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"> /etc/mdadm/mdadm.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Make RAID array available in early boot stage:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> update-initramfs </span><span class="token parameter variable" style="color:#36acaa">-u</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Persist the mount point, edit <code>/etc/fstab</code>:</p><div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/etc/fstab</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/dev/md0  /mnt/md0  ext4  defaults,nofail,discard 0 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or persist the mount point by using <code>UUID</code>, get <code>UUID</code> of the disk drive,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ blkid /dev/md124</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/md124: </span><span class="token assign-left variable" style="color:#36acaa">UUID</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"b7fa44f2-0f05-47a1-b4ef-e9ad306898de"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">BLOCK_SIZE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"4096"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"ext4"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>then edit in <code>/etc/fstab</code>,</p><div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/etc/fstab</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">UUID=b7fa44f2-0f05-47a1-b4ef-e9ad306898de  /volume  ext4  defaults,nofail,discard 0 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>finally apply the new mount,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mount</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="delete-raid-array-with-mdadm">Delete RAID Array with mdadm<a href="#delete-raid-array-with-mdadm" class="hash-link" aria-label="Direct link to Delete RAID Array with mdadm" title="Direct link to Delete RAID Array with mdadm">​</a></h2><p>Make sure to remove what are using the RAID array,</p><p>[Optional]<!-- --> Umount the array from filesystem if mounted,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">umount</span><span class="token plain"> /dev/md0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Stop RAID array,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--stop</span><span class="token plain"> /dev/md0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Stop all arrays</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--stop</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--scan</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Removes the RAID metadata and resets them to normal on the <strong>Drives</strong>,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> --zero-superblock /dev/sda</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> --zero-superblock /dev/sd</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a-h</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>[Optional]<!-- --> Remove any persistent references to the array if exist. Edit the <code>/etc/fstab</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/etc/fstab</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">nano</span><span class="token plain"> /etc/fstab</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>[Optional]<!-- --> Also, remove the array definition if exist, from the <code>/etc/mdadm/mdadm.conf</code> file:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/etc/mdadm/mdadm.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">nano</span><span class="token plain"> /etc/mdadm/mdadm.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="manage-raid-array-with-mdadm">Manage RAID Array with mdadm<a href="#manage-raid-array-with-mdadm" class="hash-link" aria-label="Direct link to Manage RAID Array with mdadm" title="Direct link to Manage RAID Array with mdadm">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="find-the-raid-arrays">Find the RAID arrays<a href="#find-the-raid-arrays" class="hash-link" aria-label="Direct link to Find the RAID arrays" title="Direct link to Find the RAID arrays">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /proc/mdstat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Personalities </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raid1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">linear</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">multipath</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raid0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raid6</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raid5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raid4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raid10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">md126 </span><span class="token builtin class-name">:</span><span class="token plain"> active raid1 nvme0n1</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> nvme1n1</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">3800741888</span><span class="token plain"> blocks super external:/md127/0 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">/2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">UU</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">md127 </span><span class="token builtin class-name">:</span><span class="token plain"> inactive nvme0n1</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> nvme1n1</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">10402</span><span class="token plain"> blocks super external:imsm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unused devices: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="query-information-on-raid-array">Query information on RAID array<a href="#query-information-on-raid-array" class="hash-link" aria-label="Direct link to Query information on RAID array" title="Direct link to Query information on RAID array">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--detail</span><span class="token plain"> /dev/md0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--query</span><span class="token plain"> /dev/md0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="query-information-on-individual-physical-devices">Query information on individual physical devices<a href="#query-information-on-individual-physical-devices" class="hash-link" aria-label="Direct link to Query information on individual physical devices" title="Direct link to Query information on individual physical devices">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--query</span><span class="token plain"> /dev/sda</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--examine</span><span class="token plain"> /dev/sda</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="stop-raid-array">Stop RAID array<a href="#stop-raid-array" class="hash-link" aria-label="Direct link to Stop RAID array" title="Direct link to Stop RAID array">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--stop</span><span class="token plain"> /dev/md0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Stop all arrays</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--stop</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--scan</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="start-an-raid-array">Start an RAID array<a href="#start-an-raid-array" class="hash-link" aria-label="Direct link to Start an RAID array" title="Direct link to Start an RAID array">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># This works if the array is defined in the configuration `/etc/mdadm/mdadm.conf` file.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--assemble</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--scan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--assemble</span><span class="token plain"> /dev/md0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># If the array is not persisted in `/etc/mdadm/mdadm.conf` file but keeping RAID metadata</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--assemble</span><span class="token plain"> /dev/md0 /dev/sda /dev/sdb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="add-a-spare-device-to-an-raid-array">Add a spare device to an RAID array<a href="#add-a-spare-device-to-an-raid-array" class="hash-link" aria-label="Direct link to Add a spare device to an RAID array" title="Direct link to Add a spare device to an RAID array">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdadm</span><span class="token plain"> /dev/md0 </span><span class="token parameter variable" style="color:#36acaa">--add</span><span class="token plain"> /dev/sde</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="check-block-devices">Check block devices<a href="#check-block-devices" class="hash-link" aria-label="Direct link to Check block devices" title="Direct link to Check block devices">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ lsblk </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        FSTYPE          FSVER  LABEL UUID                                 FSAVAIL FSUSE% MOUNTPOINTS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loop0       squashfs        </span><span class="token number" style="color:#36acaa">4.0</span><span class="token plain">                                                     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">% /snap/core20/1974</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loop1       squashfs        </span><span class="token number" style="color:#36acaa">4.0</span><span class="token plain">                                                     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">% /snap/lxd/24322</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loop2       squashfs        </span><span class="token number" style="color:#36acaa">4.0</span><span class="token plain">                                                     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">% /snap/snapd/19457</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sda         isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdb         isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdc         isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdd         isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sde         isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdf         isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdg         isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdh         isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nvme0n1     isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─md126                                                                                      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ├─md126p1 vfat            FAT32        292B-DB66                                 1G     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% /boot/efi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └─md126p2 ext4            </span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain">          0f58386c-334d-4877-8051-b855bae37fb0    </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">.3T     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─md127                                                                                      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nvme1n1     isw_raid_member </span><span class="token number" style="color:#36acaa">1.3</span><span class="token plain">.00                                                           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─md126                                                                                      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ├─md126p1 vfat            FAT32        292B-DB66                                 1G     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% /boot/efi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └─md126p2 ext4            </span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain">          0f58386c-334d-4877-8051-b855bae37fb0    </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">.3T     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─md127                         </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="list-uuid-of-devices">List UUID of devices<a href="#list-uuid-of-devices" class="hash-link" aria-label="Direct link to List UUID of devices" title="Direct link to List UUID of devices">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> blkid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sdf: </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"isw_raid_member"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/nvme0n1: </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"isw_raid_member"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sdd: </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"isw_raid_member"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sdb: </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"isw_raid_member"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sdg: </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"isw_raid_member"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sde: </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"isw_raid_member"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sdc: </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"isw_raid_member"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/md126p2: </span><span class="token assign-left variable" style="color:#36acaa">UUID</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"ff1f3640-e590-486b-8570-c34dfd7bd1de"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">BLOCK_SIZE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"4096"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"ext4"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">PARTUUID</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"07473e4a-9324-435d-9238-cf358cd9a6a9"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/md126p1: </span><span class="token assign-left variable" style="color:#36acaa">UUID</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"A636-3441"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">BLOCK_SIZE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"512"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"vfat"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">PARTUUID</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"7eb27871-d9ad-4132-af06-7110948faf06"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/nvme1n1: </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"isw_raid_member"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda: </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"isw_raid_member"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/md124: </span><span class="token assign-left variable" style="color:#36acaa">UUID</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"b7fa44f2-0f05-47a1-b4ef-e9ad306898de"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">BLOCK_SIZE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"4096"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"ext4"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sdh: </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"isw_raid_member"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/loop1: </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"squashfs"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/loop4: </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"squashfs"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/loop2: </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"squashfs"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/loop0: </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"squashfs"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/loop3: </span><span class="token assign-left variable" style="color:#36acaa">TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"squashfs"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="partition-a-disk">Partition a disk<a href="#partition-a-disk" class="hash-link" aria-label="Direct link to Partition a disk" title="Direct link to Partition a disk">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fdisk</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-l</span><span class="token plain"> /dev/sda</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="create-filesystem-on-disk">Create filesystem on disk<a href="#create-filesystem-on-disk" class="hash-link" aria-label="Direct link to Create filesystem on disk" title="Direct link to Create filesystem on disk">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> mkfs.ext4 </span><span class="token parameter variable" style="color:#36acaa">-F</span><span class="token plain"> /dev/sda</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="delete-partition-and-data-in-disk">Delete partition and data in disk<a href="#delete-partition-and-data-in-disk" class="hash-link" aria-label="Direct link to Delete partition and data in disk" title="Direct link to Delete partition and data in disk">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">dd</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">if</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/dev/zero </span><span class="token assign-left variable" style="color:#36acaa">of</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/dev/sda  </span><span class="token assign-left variable" style="color:#36acaa">bs</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">512</span><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">count</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="intel vroc" term="intel vroc"/>
        <category label="raid" term="raid"/>
        <category label="ubuntu" term="ubuntu"/>
        <category label="best practice" term="best practice"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Awesome Troubleshooting]]></title>
        <id>https://liviaerxin.github.io/blog/awesome-troubleshooting</id>
        <link href="https://liviaerxin.github.io/blog/awesome-troubleshooting"/>
        <updated>2023-08-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Awesome Troubleshooting]]></summary>
        <content type="html"><![CDATA[<p>A curated collection of troubleshooting practices:</p><p><a href="https://about.gitlab.com/blog/2018/11/14/how-we-spent-two-weeks-hunting-an-nfs-bug/" target="_blank" rel="noopener noreferrer">How we spent two weeks hunting an NFS bug in the Linux kernel</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="Awesome Troubleshooting" term="Awesome Troubleshooting"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Keyboard Shortcut Collection]]></title>
        <id>https://liviaerxin.github.io/blog/keyboard-shortcut-collection</id>
        <link href="https://liviaerxin.github.io/blog/keyboard-shortcut-collection"/>
        <updated>2023-08-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Keyboard Shortcut Collection]]></summary>
        <content type="html"><![CDATA[<p><a href="https://code.visualstudio.com/shortcuts/keyboard-shortcuts-macos.pdf" target="_blank" rel="noopener noreferrer">VS Code Keyboard Shortcuts Macos</a></p><p><a href="https://code.visualstudio.com/shortcuts/keyboard-shortcuts-windows.pdf" target="_blank" rel="noopener noreferrer">VS Code Keyboard Shortcuts Windows</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="best practice" term="best practice"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Set Up Samba Server in Docker]]></title>
        <id>https://liviaerxin.github.io/blog/docker-setup-samba-server</id>
        <link href="https://liviaerxin.github.io/blog/docker-setup-samba-server"/>
        <updated>2023-08-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Set Up Samba Server in Docker]]></summary>
        <content type="html"><![CDATA[<p><strong>!IMPORTANT</strong>: Permission setting is very annoying but critical, sometimes you need take long time to fine tune it and debug.
<strong>!IMPORTANT</strong>: When setting up a Samba server in Docker in OSX, you will encounter problems such as <code>Operation not suppored</code> when using <code>bind mount</code>. Roughly saying, the reason is Docker run in a light VM in Mac and your Mac host uses a different file system(HFS+) compared to Linux(ext4 or similar). So switching to <code>volume mount</code> will solve this potential problem.</p><p>Some takeaways about Permission:</p><ul><li>Creating and deleting files is controlled by permissions on the directory.</li><li>Modifying the file is controlled by permissions on the file. You may have a mask which is removing the write privilege from the file.</li></ul><p>When I turned to set up Samba server locally, the main purpose is that I would like to integrate the Samba server into my Docker Compose project to mock a real remote Samba server, which will facilitate your local development in Docker environment.</p><p>So this blog will illustrate to set up a Samba server and a client, and test interaction between them.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="start-samba-server-in-docker">Start Samba Server in Docker<a href="#start-samba-server-in-docker" class="hash-link" aria-label="Direct link to Start Samba Server in Docker" title="Direct link to Start Samba Server in Docker">​</a></h2><p>Here, we use Samba server image from <a href="https://hub.docker.com/r/dperson/samba" target="_blank" rel="noopener noreferrer">dperson/samba</a>. Although there is an alternative from <a href="https://hub.docker.com/r/servercontainers/samba" target="_blank" rel="noopener noreferrer">ghcr.io/servercontainers/samba</a> or <a href="https://github.com/crazy-max/docker-samba" target="_blank" rel="noopener noreferrer">crazymax/samba</a></p><p>In OSX, it's critical to use <code>volume mount</code> and avoid using <code>bind mount</code> as we mentioned above.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>In OSX, due to the docker desktop itself is running in VM, it will cause some error like <code>Operation not supported</code> when binding a local file folder via <code>bind mount</code> even you set <code>777</code> mask on the folder. So it's recommended to use <code>volume mount</code> to bind to <code>/mnt</code> in Samba server in OSX.</p><p>Furthermore, the Samba server will log such message: <code>error reading meta xattr: Not supported</code>.</p></div></div><p>In Linux, it's okay to use either <code>volume mount</code> or <code>bind mount</code>.  </p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--name</span><span class="token plain"> samba </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">139</span><span class="token plain">:139 </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">445</span><span class="token plain">:445 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> mnt:/mnt:z </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dperson/samba </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Mount;/mnt;yes;no;yes"</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bob;bobspasswd"</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-g</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"log level = 5"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p><code>-s "&lt;Mount;/mnt&gt;;yes;no;yes"</code> means <!-- -->[browsable:yes;readonly:no;guest:yes]<!-- -->", which will allow the guest to <code>read</code> and the user to <code>read/write</code>!</p></div></div><p>Get the samba server IP address:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> inspect </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    samba</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">172.17</span><span class="token plain">.0.2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="start-samba-client-in-docker">Start Samba Client in Docker<a href="#start-samba-client-in-docker" class="hash-link" aria-label="Direct link to Start Samba Client in Docker" title="Direct link to Start Samba Client in Docker">​</a></h2><p>Use <code>dperson/samba</code> or <code>busybox</code> image,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--privileged</span><span class="token plain"> dperson/samba </span><span class="token function" style="color:#d73a49">bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--privileged</span><span class="token plain"> busybox </span><span class="token function" style="color:#d73a49">sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Inside the container:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> /smb_share</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># mount -t cifs //[server-ip]/[share-path] /[mount-point]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mount</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> cifs //172.17.0.2/Mount /smb_share </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token plain"> rw,username</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">bob,password</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">bobspasswd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># write file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"xxxx"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /smb_share/f.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="start-samba-client-which-create-volume-in-docker">Start Samba Client which Create Volume in Docker<a href="#start-samba-client-which-create-volume-in-docker" class="hash-link" aria-label="Direct link to Start Samba Client which Create Volume in Docker" title="Direct link to Start Samba Client which Create Volume in Docker">​</a></h2><ol><li>Create a CIFS/Samba Volume</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> volume create </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--driver</span><span class="token plain"> </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--opt</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">cifs </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--opt</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">device</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">//172.17.0.2/Mount </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--opt</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">o</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">username</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">bob,password</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">bobspasswd </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--name</span><span class="token plain"> samba-volume</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> inspect samba-volume</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"CreatedAt"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2023-08-13T16:24:03Z"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Driver"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"local"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Labels"</span><span class="token builtin class-name">:</span><span class="token plain"> null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Mountpoint"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/var/lib/docker/volumes/samba-volume/_data"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Name"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"samba-volume"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Options"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">"device"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"//172.17.0.2/Mount"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">"o"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"addr=username=bob,password=bobspasswd"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">"type"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"cifs"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Scope"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"local"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Start a container using the created volume <code>samba-volume</code>.</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> samba-volume:/mnt </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    busybox </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="use-case-in-docker-compose">Use Case in Docker Compose<a href="#use-case-in-docker-compose" class="hash-link" aria-label="Direct link to Use Case in Docker Compose" title="Direct link to Use Case in Docker Compose">​</a></h2><p><a target="_blank" href="/assets/files/docker-compose-b20a9747a47a6ca1f96d665429f7ce84.yml"></a></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docker-compose-samba.yml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"3"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Inspired by https://github.com/dperson/samba/blob/master/docker-compose.yml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">samba</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dperson/samba</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">privileged</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">TZ</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"EST5EDT"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"137:137/udp"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"138:138/udp"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"139:139/tcp"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"445:445/tcp"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> mnt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/mnt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'-s "Mount;/mnt;yes;no;yes" -u "bob;bobspasswd" -p'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># networks:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#   default:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#     ipv4_address: 172.28.0.20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">samba-client</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> on</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> samba</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">volume</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/smb_share</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># tty: true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sleep infinity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> samba</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># networks:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#   default:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#     ipv4_address: 172.28.0.21</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># networks:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   default:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#     driver: bridge</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#     ipam:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#       config:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#         - subnet: 172.28.0.0/16</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#           gateway: 172.28.0.1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mnt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">samba-volume</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">driver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">driver_opts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cifs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># device: "//172.28.0.20/Mount"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># o: "username=bob,password=bobspasswd"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">device</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"//localhost/Mount"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">o</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"addr=localhost,username=bob,password=bobspasswd"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2><p>When you mount an Samba Share in Linux, you may encounter error like <code>failed: Invalid argument</code>,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bash-5.1</span><span class="token comment" style="color:#999988;font-style:italic"># mount -t cifs //172.17.0.2/Mount /mnt/smb_share -o iocharset=utf8,rw,vers=1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mount: mounting //172.17.0.2/Mount on /mnt/smb_share failed: Invalid argument</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can use <code>dmesg</code> to debug,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bash-5.1</span><span class="token comment" style="color:#999988;font-style:italic"># dmesg</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">317258.750535</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> CIFS: Attempting to </span><span class="token function" style="color:#d73a49">mount</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">\</span><span class="token number" style="color:#36acaa">172.17</span><span class="token plain">.0.2</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">Mount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">317258.752956</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> CIFS: VFS: No username specified</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">317336.240984</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> cifs: Unknown parameter </span><span class="token string" style="color:#e3116c">'passwd'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">317344.451345</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> CIFS: Attempting to </span><span class="token function" style="color:#d73a49">mount</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">\</span><span class="token number" style="color:#36acaa">172.17</span><span class="token plain">.0.2</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">Mount</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="docker" term="docker"/>
        <category label="samba" term="samba"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Set Up NFS Sever in Docker]]></title>
        <id>https://liviaerxin.github.io/blog/docker-setup-nfs-sever</id>
        <link href="https://liviaerxin.github.io/blog/docker-setup-nfs-sever"/>
        <updated>2023-08-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Setup NFS Sever]]></summary>
        <content type="html"><![CDATA[<p>This document will introduce to set up a NFS server in Docker container and use another Docker container to act as a Client to test this NFS server.</p><blockquote><p>To set up a <strong>NFS server</strong> in your Host, you can check <a href="https://phoenixnap.com/kb/ubuntu-nfs-server" target="_blank" rel="noopener noreferrer">NFS server installed and configured</a>.</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="start-up-nfs-server">Start Up NFS Server<a href="#start-up-nfs-server" class="hash-link" aria-label="Direct link to Start Up NFS Server" title="Direct link to Start Up NFS Server">​</a></h2><p>Use docker image <a href="https://hub.docker.com/r/gists/nfs-server" target="_blank" rel="noopener noreferrer">gists/nfs-server</a> to start up a <strong>NFS server</strong> container.</p><p>In OSX, it's critical to use <code>volume mount</code> and avoid using <code>bind mount</code> as we mentioned above.</p><p>In Linux, it's okay to use either <code>volume mount</code> or <code>bind mount</code>.  </p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--name</span><span class="token plain"> nfs </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--privileged</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2049</span><span class="token plain">:2049 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> /tmp/volume:/nfs-share </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">NFS_DIR</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/nfs-share </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">NFS_OPTION</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"rw,fsid=0,async,no_subtree_check,no_auth_nlm,insecure,no_root_squash"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gists/nfs-server</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Before we use an old nfs server image <a href="https://hub.docker.com/r/itsthenetwork/nfs-server-alpine/" target="_blank" rel="noopener noreferrer">itsthenetwork/nfs-server-alpine</a> which was not maintained more than 4 years and not supported natively in platform <code>linux/arm/v6</code>.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--name</span><span class="token plain"> nfs </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--privileged</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> /tmp/volume:/nfs-share </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">SHARED_DIRECTORY</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/nfs-share </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2049</span><span class="token plain">:2049 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    itsthenetwork/nfs-server-alpine:latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>In OSX, due to the docker desktop itself is running in VM, it will cause some error like <code>Operation not supported</code> when binding a local file folder via <code>bind mount</code> even you set <code>777</code> mask on the folder. So it's recommended to use <code>volume</code> to bind to <code>/mnt</code> in Samba server in OSX.</p><p>Furthermore, the Samba server will log such message: <code>error reading meta xattr: Not supported</code>.</p></div></div><p>Get the ip address of the <strong>NFS</strong> server, which will be used later to connect the <strong>NFS</strong> server when mounting in a Docker container client. If you only want to mount the <strong>NFS</strong> server from the host, you can just know the ip address of your host.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> inspect </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nfs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here the output is</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">172.17</span><span class="token plain">.0.2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="use-nfs-client-in-docker">Use NFS Client in Docker<a href="#use-nfs-client-in-docker" class="hash-link" aria-label="Direct link to Use NFS Client in Docker" title="Direct link to Use NFS Client in Docker">​</a></h2><p>Let's make use of a Docker container to act in a NFS client to access shared data in the running-up NFS server.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>run container as root by option <code>--privileged</code> or <code>--cap-add SYS_ADMIN</code> when permissions denied inside the container:</p></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--privileged</span><span class="token plain"> busybox </span><span class="token function" style="color:#d73a49">sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Inside the container:</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Due to the fsid=0 parameter set in the /etc/exports file, there's no need to specify the folder name when mounting from a client. For example, this works fine even though the folder being mounted and shared is /nfs-share:</p></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># In the container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> /mnt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># nfs v4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mount</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">vers</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">4</span><span class="token plain">,loud </span><span class="token number" style="color:#36acaa">172.17</span><span class="token plain">.0.2:/ /mnt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># create a file to test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"some text here"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /mnt/file1.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then go to the Host to list directory <code>/data/volume/test</code>, where you will find the <code>file1.txt</code> is sitting.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># In the host</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /data/volume/test/file1.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="use-nfs-client-with-volume-mount-in-docker">Use NFS Client With Volume Mount in Docker<a href="#use-nfs-client-with-volume-mount-in-docker" class="hash-link" aria-label="Direct link to Use NFS Client With Volume Mount in Docker" title="Direct link to Use NFS Client With Volume Mount in Docker">​</a></h2><ol><li>Create a NFS volume in Docker</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> volume create </span><span class="token parameter variable" style="color:#36acaa">--driver</span><span class="token plain"> </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--opt</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">nfs </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--opt</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">o</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">addr</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">172.17</span><span class="token plain">.0.2,nfsvers</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--opt</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">device</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">:/ </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nfs-volume</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> inspect nfs-volume</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Run the container with the created volume <code>nfs-volume</code>.</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--privileged</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--name</span><span class="token plain"> nfs-test </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> nfs-volume:/mnt </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    busybox </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Alternative, you can use the combined one command which will create a volume <code>nfsvolume</code>, </p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--privileged</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--name</span><span class="token plain"> nfs-test </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--mount</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'type=volume,source=nfsvolume,volume-driver=local,volume-opt=type=nfs,volume-opt=device=:/,"volume-opt=o=addr=172.17.0.2,rw,nfsvers=4,async",target=/mnt'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    busybox </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="setup-a-nfs-server-and-mount-nfs-volume-int-docker-compose">Setup a NFS Server and Mount NFS Volume int Docker Compose<a href="#setup-a-nfs-server-and-mount-nfs-volume-int-docker-compose" class="hash-link" aria-label="Direct link to Setup a NFS Server and Mount NFS Volume int Docker Compose" title="Direct link to Setup a NFS Server and Mount NFS Volume int Docker Compose">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="about-nfs-options">About NFS Options<a href="#about-nfs-options" class="hash-link" aria-label="Direct link to About NFS Options" title="Direct link to About NFS Options">​</a></h2><p><a href="https://www.thegeekdiary.com/understanding-the-etc-exports-file/" target="_blank" rel="noopener noreferrer">Understanding the /etc/exports File – The Geek Diary</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="docker" term="docker"/>
        <category label="nfs" term="nfs"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Docker Useful Commands]]></title>
        <id>https://liviaerxin.github.io/blog/docker-useful-commands</id>
        <link href="https://liviaerxin.github.io/blog/docker-useful-commands"/>
        <updated>2023-08-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Docker Useful Commands]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="docker">Docker<a href="#docker" class="hash-link" aria-label="Direct link to Docker" title="Direct link to Docker">​</a></h2><ul><li>Famous <code>busybox</code> image that provide many common UNIX utilities for testing.</li></ul><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--privileged</span><span class="token plain"> busybox </span><span class="token function" style="color:#d73a49">sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Find the IP address of Docker container</li></ul><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> inspect </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nfs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Delete all containers(include all status of running, stopped, created)</li></ul><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">docker</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">ps</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable parameter variable" style="color:#36acaa">-a</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable parameter variable" style="color:#36acaa">-q</span><span class="token variable" style="color:#36acaa">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Delete all volumes</li></ul><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> volume </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">docker</span><span class="token variable" style="color:#36acaa"> volume </span><span class="token variable function" style="color:#d73a49">ls</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable parameter variable" style="color:#36acaa">-q</span><span class="token variable" style="color:#36acaa">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Keep container running for for testing and debugging</li></ul><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Use -t(-tty)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> busybox</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> busybox </span><span class="token function" style="color:#d73a49">tail</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> /dev/null</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> busybox </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> infinity</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="docker-compose">Docker Compose<a href="#docker-compose" class="hash-link" aria-label="Direct link to Docker Compose" title="Direct link to Docker Compose">​</a></h2><p>Rebuild image and restart a service which you specified,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> up --no-deps web-app </span><span class="token parameter variable" style="color:#36acaa">-d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Remove a service,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> web-auth</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="docker" term="docker"/>
        <category label="best practice" term="best practice"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Git Best Practices]]></title>
        <id>https://liviaerxin.github.io/blog/git-best-practices</id>
        <link href="https://liviaerxin.github.io/blog/git-best-practices"/>
        <updated>2023-08-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Git Submodules]]></summary>
        <content type="html"><![CDATA[<p>Global configuration</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> config </span><span class="token parameter variable" style="color:#36acaa">--global</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--list</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> config </span><span class="token parameter variable" style="color:#36acaa">--local</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--list</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>GIT</strong> two popular authentication methods: <a href="#git-ssh-key">SSH Key</a> and <a href="#git-credentials">Credentials</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="git-ssh-key">Git SSH Key<a href="#git-ssh-key" class="hash-link" aria-label="Direct link to Git SSH Key" title="Direct link to Git SSH Key">​</a></h2><p><a href="https://hackernoon.com/how-to-authenticate-your-git-to-github-with-ssh-keys" target="_blank" rel="noopener noreferrer">How to Authenticate Your Git to GitHub with SSH Keys</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="git-credentials">Git Credentials<a href="#git-credentials" class="hash-link" aria-label="Direct link to Git Credentials" title="Direct link to Git Credentials">​</a></h2><p>Store username/password instead of ssh for multiple remotes</p><p>To enable git credentials</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># local</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> config credential.helper store</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># global</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> config </span><span class="token parameter variable" style="color:#36acaa">--global</span><span class="token plain"> credential.helper store</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Each credential is stored in <code>~/.git-credentials</code> file on its own line as a URL like:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">https://</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">USERNAME</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">:</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PASSWORD</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">@github.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Configure credentials,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Global</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> config </span><span class="token parameter variable" style="color:#36acaa">--global</span><span class="token plain"> credential.https://github.com.username </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your_username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Or </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> config </span><span class="token parameter variable" style="color:#36acaa">--local</span><span class="token plain"> user.name </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your_username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> config </span><span class="token parameter variable" style="color:#36acaa">--local</span><span class="token plain"> user.email </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your_useremail</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Then git pull or git push to let it cache your username/password after it prompt you to input password in the first time</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Alternatively, we can directly edit our global Git config file <code>~/.gitconfig</code>,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">credential </span><span class="token string" style="color:#e3116c">"https://github.com"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    username </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">username</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://www.shellhacks.com/git-config-username-password-store-credentials/" target="_blank" rel="noopener noreferrer">Git - Config Username &amp; Password - Store Credentials - ShellHacks</a></p><p><a href="https://www.baeldung.com/ops/git-configure-credentials" target="_blank" rel="noopener noreferrer">Configuring Git Credentials</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="git-submodules">Git Submodules<a href="#git-submodules" class="hash-link" aria-label="Direct link to Git Submodules" title="Direct link to Git Submodules">​</a></h2><ol><li>Pull the repo and its all submodules in <strong>the first time</strong>.</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone http://10.6.64.66:30000/mtr/mtr.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mtr</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> submodule update </span><span class="token parameter variable" style="color:#36acaa">--init</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--recursive</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--progress</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or just one command to clone with all the submodules.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone </span><span class="token parameter variable" style="color:#36acaa">--recursive</span><span class="token plain"> http://10.6.64.66:30000/mtr/mtr.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Pull the repo and its all submodules later</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> submodule update </span><span class="token parameter variable" style="color:#36acaa">--recursive</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--progress</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Enter each sub repository to pull its own latest of <code>main</code> per repository, when the parent repo does point to the latest branch of its submodules!</li></ol><p>Sometimes, it is very annoying to keep the parent repository up to date on the latest reference of its every sub repository!
This approach give you the flexibility while being like a shortcut.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> submodule foreach </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> submodule foreach </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> pull</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> submodule foreach </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> pull origin main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> submodule update </span><span class="token parameter variable" style="color:#36acaa">--recursive</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--remote</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="git" term="git"/>
        <category label="git submodules" term="git submodules"/>
        <category label="best practice" term="best practice"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Share Data between Docker Containers]]></title>
        <id>https://liviaerxin.github.io/blog/docker-containers-data-sharing</id>
        <link href="https://liviaerxin.github.io/blog/docker-containers-data-sharing"/>
        <updated>2023-07-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Docker Containers Data Sharing]]></summary>
        <content type="html"><![CDATA[<p>There are three types of data to manage data in Docker,</p><ul><li>bind mount</li><li>volume mount</li><li>tmpfs mount</li></ul><p><img loading="lazy" src="/assets/images/types-of-mounts-volume-866cf680c6d400c46bf73612cf43fcd2.png" width="502" height="255" class="img_ev3q"></p><p>Read <a href="https://docs.docker.com/storage/" target="_blank" rel="noopener noreferrer">Manage data in Docker</a> for more information, it's a great official documentation!</p><p>Here, this page demonstrates some use cases in practices that you maybe face. As the official documentation says, <strong>Volume</strong> is alway the first choice and preferred mechanism for persisting and sharing data between containers, as one of the biggest advantages is that <strong>volume</strong> is thoroughly managed by Docker. That means:</p><ul><li>You can manage <strong>volume</strong> using Docker CLI commands ir the Docker API.</li><li><strong>Volume</strong> is easier to back up and migrate than <strong>bind mounts</strong>.</li><li><strong>Volume</strong> work the same interface in Linux and Windows, such as no need to worry about <code>POSIX</code> file path style in Windows.</li><li><strong>Volume</strong> driver features support you to store data on remote hosts or cloud storage easily.</li><li><strong>Volume</strong> on Docker Desktop have much higher performance than bind mount from Mac and Windows hosts.</li></ul><p>Let's look at some use cases that leverage volume <strong>driver</strong> features</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="use-a-volume-to-bind-a-local-folder">Use a volume to bind a local folder<a href="#use-a-volume-to-bind-a-local-folder" class="hash-link" aria-label="Direct link to Use a volume to bind a local folder" title="Direct link to Use a volume to bind a local folder">​</a></h2><p>In default, the volume is created by Docker and its corresponding folder resides in Docker managed folder like <code>/var/lib/docker/volumes/</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> create volume xxx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> volume inspect xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"CreatedAt"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2023-07-19T14:41:18+08:00"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Driver"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"local"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Labels"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Mountpoint"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/var/lib/docker/volumes/xxx/_data"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Name"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"xxx"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Options"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Scope"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"local"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>However, sometimes you would like to bind the volume into a specified local folder(like <code>/data/volumes/testvol</code>) in hosts(only available in <code>Linux</code>)</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> volume create </span><span class="token parameter variable" style="color:#36acaa">--opt</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">none </span><span class="token parameter variable" style="color:#36acaa">--opt</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">o</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">bind </span><span class="token parameter variable" style="color:#36acaa">--opt</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">device</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/data/volumes/testvol testvol</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> inspect testvol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"CreatedAt"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2023-07-13T04:36:16Z"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Driver"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"local"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Labels"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Mountpoint"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/var/lib/docker/volumes/testvol/_data"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Name"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"testvol"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Options"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">"device"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/data/volumes/testvol"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">"o"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bind"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">"type"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"none"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Scope"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"local"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In Docker compose yaml,</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">frontend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">lts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> testvol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/home/node/app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">db-data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">testvol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">driver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">driver_opts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> none</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">o</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> bind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">device</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /data/volumes/testvol</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="use-nfs-volume">Use NFS volume<a href="#use-nfs-volume" class="hash-link" aria-label="Direct link to Use NFS volume" title="Direct link to Use NFS volume">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="use-samba-volume">Use Samba volume<a href="#use-samba-volume" class="hash-link" aria-label="Direct link to Use Samba volume" title="Direct link to Use Samba volume">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p><a href="https://docs.docker.com/storage/volumes/#share-data-between-machines" target="_blank" rel="noopener noreferrer">Volumes | Docker Documentation</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="docker" term="docker"/>
        <category label="dev-ops" term="dev-ops"/>
        <category label="docker-volume" term="docker-volume"/>
        <category label="data" term="data"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[REST API Filtering, Sorting and Pagination]]></title>
        <id>https://liviaerxin.github.io/blog/rest-api-filtering-sorting-pagination</id>
        <link href="https://liviaerxin.github.io/blog/rest-api-filtering-sorting-pagination"/>
        <updated>2023-07-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[REST API Filtering, Sorting and Pagination]]></summary>
        <content type="html"><![CDATA[<p><a href="https://github.com/microsoft/api-guidelines/blob/vNext/Guidelines.md#971-filter-operations" target="_blank" rel="noopener noreferrer">api-guidelines/Guidelines.md at vNext · microsoft/api-guidelines · GitHub</a></p><p><a href="https://www.moesif.com/blog/technical/api-design/REST-API-Design-Filtering-Sorting-and-Pagination/" target="_blank" rel="noopener noreferrer">REST API Design: Filtering, Sorting, and Pagination | Moesif Blog</a></p><p><a href="https://medium.com/meliopayments/how-we-write-our-query-filter-engine-on-our-rest-api-part-1-441cb13dcc15" target="_blank" rel="noopener noreferrer">How we write our query filter engine on our REST API (part 1) | by Adam Ben Aharon | Melio’s R&amp;D blog | Medium</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="backend" term="backend"/>
        <category label="best practice" term="best practice"/>
        <category label="rest api" term="rest api"/>
        <category label="filtering" term="filtering"/>
        <category label="sorting" term="sorting"/>
        <category label="pagination" term="pagination"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Learn ASGI]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-asgi</id>
        <link href="https://liviaerxin.github.io/blog/wiki-asgi"/>
        <updated>2023-07-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Learn ASGI]]></summary>
        <content type="html"><![CDATA[<p>Nowadays as web server framework is getting easy to use and work with. In Python areas, FastAPI obtains nearly 60k stars and becomes the most popular web framework for Pythoners.</p><p>Looking at the advantage of <code>FastAPI</code>, it simplifies everything from parsing http requests, middleware processing, authentication, database manipulation and more.</p><p>Let's dive into the behind-the-scenes technique stacks of <code>FastAPI</code>.</p><p>Before research, there are some common questions around the web server development:</p><ul><li>How to process messages on <code>HTTP</code> protocol on <code>TCP</code> protocol? What're the favorite library used to do that?</li><li>What are the differences between <code>WSGI</code> and <code>ASGI</code>?</li><li>Data model used for database and users</li></ul><p>stacks from low-level to high-level</p><p>Uvicorn:</p><ul><li>ASGI web server implementation/interface<ul><li>scope</li><li>receive</li><li>send</li></ul></li><li>h11 to process HTTP messages</li><li>websocket to process websocket messages</li></ul><p>Starlette:</p><ul><li>ASGI framework</li><li>abstract Request class for receive in <code>Uvicorn</code></li><li>abstract Response class for send in <code>Uvicorn</code></li><li>provide middleware</li></ul><p>FastAPI:</p><ul><li>Fast to code</li><li>OpenAPI docs</li><li>Pydantic native model</li></ul><p><code>APIRoute</code></p><p><code>APIRouter</code></p><p><code>Application</code> &lt;-- <code>APIRouter</code> &lt;-- <code>APIRoute</code></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="backend" term="backend"/>
        <category label="asgi" term="asgi"/>
        <category label="wiki" term="wiki"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[C/C++ Build System]]></title>
        <id>https://liviaerxin.github.io/blog/c-build-system</id>
        <link href="https://liviaerxin.github.io/blog/c-build-system"/>
        <updated>2023-07-07T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Learn Avalonia]]></summary>
        <content type="html"><![CDATA[<p><a href="https://en.wikipedia.org/wiki/List_of_build_automation_software" target="_blank" rel="noopener noreferrer">List of build automation software - Wikipedia</a></p><img loading="lazy" src="https://www.plantuml.com/plantuml/png/bP9TJy8m58Rl-okEYrSaJYJnXYoBYeata9WGzS8OSkWEKBQrJJy4G_plPcN0vWV1NRrzptdxjAUxiGwDysN1R2waHeCbI9MH9GtNtOPfKEQLUTNjCdOc92zyHf2KwCW8B2wvAaibqzzB6Ksc1ZdPl-je37uSZ-VaZcoWqP1q2xB7A0xdDcNCgJcv1HdOi9agCZ8GFHgr9EuYG0jMUSC9acIy5GELKPh2XW40p4H1TKSbNuDPVPsOQzrSDVHYhvFp4YUjYLJk6_jaZAjIAqdIGJGOOKxXBBp4d9heO5JA7j2XFNYnMxiJM6tQ7lQTjKCTI3lGF-yp6jzvKMHRY9rMkiNPMcrK_CwrKSjJI1fvZdE2w4N8JAqit6fT28vEA1cOAuGaYMbTFMEITEBxuJ0yQ3Fx9CNwHz27O9soQXTYRFik5nTf658V7aYIGQTCFyoeMQ_ls-fv5jPZ0MFdCw6Wr-tr6Aj_kogpGhQBrSjcrIFRx-xn2m00" class="img_ev3q"><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="build-system">Build System<a href="#build-system" class="hash-link" aria-label="Direct link to Build System" title="Direct link to Build System">​</a></h2><p>Make</p><p>Ninja</p><p>MSBuild</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="build-system-generator">Build System Generator<a href="#build-system-generator" class="hash-link" aria-label="Direct link to Build System Generator" title="Direct link to Build System Generator">​</a></h2><p>CMake</p><p>Meson</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ci">CI<a href="#ci" class="hash-link" aria-label="Direct link to CI" title="Direct link to CI">​</a></h2>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="make" term="make"/>
        <category label="ninja" term="ninja"/>
        <category label="msbuild" term="msbuild"/>
        <category label="cmake" term="cmake"/>
        <category label="meson" term="meson"/>
        <category label="ci-cd" term="ci-cd"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Resumable Upload]]></title>
        <id>https://liviaerxin.github.io/blog/resumable-upload</id>
        <link href="https://liviaerxin.github.io/blog/resumable-upload"/>
        <updated>2023-07-07T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Resumable Upload]]></summary>
        <content type="html"><![CDATA[<p>To implement a resumable file upload, it is necessary to contain three parts:</p><ul><li>Protocol: provide a mechanism for resumable file uploads</li><li>Upload Server: receive an interrupted upload and store it in local machine or in cloud storage</li><li>Upload Client: upload the file which may be interrupted</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="a-basic-resumable-upload">A Basic Resumable Upload<a href="#a-basic-resumable-upload" class="hash-link" aria-label="Direct link to A Basic Resumable Upload" title="Direct link to A Basic Resumable Upload">​</a></h2><div><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">code-snippets/app_resumable_upload.py</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">loading</span><span class="token spread operator" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="font-size:.9em;font-weight:600;color:#0E75DD;text-align:center;padding-bottom:13px;text-decoration:underline"><a href="https://github.com/liviaerxin/liviaerxin.github.io/blob/master/code-snippets/app_resumable_upload.py" target="_blank">See full example on GitHub</a></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tus-resumable-upload">TUS Resumable Upload<a href="#tus-resumable-upload" class="hash-link" aria-label="Direct link to TUS Resumable Upload" title="Direct link to TUS Resumable Upload">​</a></h2><p>FastAPI implementing tus v1.0.0 server in Python</p><div><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">code-snippets/app_tusd.py</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">loading</span><span class="token spread operator" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="font-size:.9em;font-weight:600;color:#0E75DD;text-align:center;padding-bottom:13px;text-decoration:underline"><a href="https://github.com/liviaerxin/liviaerxin.github.io/blob/master/code-snippets/app_tusd.py" target="_blank">See full example on GitHub</a></div></div><p><a href="https://tus.io/implementations" target="_blank" rel="noopener noreferrer">Implementations | tus.io</a></p><p><a href="https://javascript.info/resume-upload" target="_blank" rel="noopener noreferrer">Resumable file upload</a></p><p><a href="https://github.com/tus/tus-js-client" target="_blank" rel="noopener noreferrer">GitHub - tus/tus-js-client: A pure JavaScript client for the tus resumable upload protocol</a></p><p><a href="https://github.com/tus/tusd" target="_blank" rel="noopener noreferrer">GitHub - tus/tusd: Reference server implementation in Go of tus: the open protocol for resumable file uploads</a></p><p>IO, StreamIO, FileIO</p><p>high-level used by asyncio.io in socket/tcp/http</p><p><a href="https://docs.python.org/3/library/asyncio-stream.html#streamreader" target="_blank" rel="noopener noreferrer">Streams — Python 3.11.4 documentation</a></p><p>starlette.Request.stream = http Request Body</p><p>low-level:<br>
<a href="https://docs.python.org/3/library/io.html#io.RawIOBase" target="_blank" rel="noopener noreferrer">io — Core tools for working with streams — Python 3.11.4 documentation</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="fastapi" term="fastapi"/>
        <category label="backend" term="backend"/>
        <category label="protocol" term="protocol"/>
        <category label="tus" term="tus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki Avalonia]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-avalonia</id>
        <link href="https://liviaerxin.github.io/blog/wiki-avalonia"/>
        <updated>2023-07-07T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Learn Avalonia]]></summary>
        <content type="html"><![CDATA[<p><a href="https://stackoverflow.com/questions/61627374/is-it-possible-to-create-a-skia-canvas-element-in-an-avalonia-application" target="_blank" rel="noopener noreferrer">skiasharp - Is it possible to create a Skia Canvas element in an Avalonia application? - Stack Overflow</a></p><p><a href="https://github.com/AvaloniaUI/Avalonia/issues/2849" target="_blank" rel="noopener noreferrer">Poor rendering performance of Image control · Issue #2849 · AvaloniaUI/Avalonia · GitHub</a></p><p><a href="https://github.com/AvaloniaUI/Avalonia/discussions/7772" target="_blank" rel="noopener noreferrer">How to render a window with an OpenGlControl to RenderTargetBitmap? · Discussion #7772 · AvaloniaUI/Avalonia · GitHub</a></p><p><a href="https://github.com/AvaloniaUI/Avalonia/discussions/7661" target="_blank" rel="noopener noreferrer">Missing WriteableBitmap.WritePixels? · Discussion #7661 · AvaloniaUI/Avalonia · GitHub</a></p><p><a href="https://github.com/AvaloniaUI/Avalonia/pull/2858" target="_blank" rel="noopener noreferrer">Enable GPU-backed images for the Skia backend by mstr2 · Pull Request #2858 · AvaloniaUI/Avalonia · GitHub</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="skiasharp">SkiaSharp<a href="#skiasharp" class="hash-link" aria-label="Direct link to SkiaSharp" title="Direct link to SkiaSharp">​</a></h2><p><a href="https://github.com/mono/SkiaSharp/blob/main/tests/Tests/GRContextTest.cs" target="_blank" rel="noopener noreferrer">SkiaSharp/GRContextTest.cs at main · mono/SkiaSharp · GitHub</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="practice" term="practice"/>
        <category label="avalonia" term="avalonia"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[MDX Features of Docusaurus]]></title>
        <id>https://liviaerxin.github.io/blog/docusaurus-mdx-features</id>
        <link href="https://liviaerxin.github.io/blog/docusaurus-mdx-features"/>
        <updated>2023-07-06T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[MDX Features]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="react-component">React Component<a href="#react-component" class="hash-link" aria-label="Direct link to React Component" title="Direct link to React Component">​</a></h2><p>Code as:</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docs/mdx-features.mdx</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">Highlight</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter">children</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> color</span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">    </span><span class="token tag attr-name" style="color:#00a4db">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">      </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">backgroundColor</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> color</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">      </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">borderRadius</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript string" style="color:#e3116c">'2px'</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">      </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">color</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript string" style="color:#e3116c">'#fff'</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">      </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">padding</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript string" style="color:#e3116c">'0.2rem'</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">    </span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">children</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Highlight</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">color</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">#25c2a0</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Docusaurus green</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Highlight</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> and </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Highlight</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">color</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">#1877F2</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Facebook blue</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Highlight</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> are my favorite colors</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Render as:</p><span style="background-color:#25c2a0;border-radius:2px;color:#fff;padding:0.2rem">Docusaurus green</span> and <span style="background-color:#1877F2;border-radius:2px;color:#fff;padding:0.2rem">Facebook blue</span> are my favorite colors.<br><br><br><p>Code as:</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">src/components/Highlight</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">SharedHighlight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter">children</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> color</span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">      </span><span class="token tag attr-name" style="color:#00a4db">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">        </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">backgroundColor</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> color</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">        </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">borderRadius</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript string" style="color:#e3116c">'2px'</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">        </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">color</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript string" style="color:#e3116c">'#fff'</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">        </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">padding</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript string" style="color:#e3116c">'0.2rem'</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag script language-javascript" style="color:#00009f">      </span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">children</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With:</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docs/mdx-features.mdx</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">SharedHighlight</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@site/src/components/Highlight'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">SharedHighlight</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">color</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">#25c2a0</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Docusaurus green</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">SharedHighlight</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">I</span><span class="token plain"> can write </span><span class="token operator" style="color:#393A34">**</span><span class="token maybe-class-name">Markdown</span><span class="token operator" style="color:#393A34">**</span><span class="token plain"> alongside my _JSX_</span><span class="token operator" style="color:#393A34">!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Render as:</p><span style="background-color:#25c2a0;border-radius:10px;color:#000;padding:0.5rem">Docusaurus green</span><p>I can write <strong>Markdown</strong> alongside my <em>JSX</em>!</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tabs">Tabs<a href="#tabs" class="hash-link" aria-label="Direct link to Tabs" title="Direct link to Tabs">​</a></h2><p>Code as:</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docs/mdx-features.mdx</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Tabs</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@theme/Tabs'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">TabItem</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@theme/TabItem'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Tabs</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">TabItem</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">apple</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">label</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Apple</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">default</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    This is an apple 🍎</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">TabItem</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">TabItem</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">orange</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">label</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Orange</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    This is an orange 🍊</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">TabItem</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">TabItem</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">banana</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">label</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Banana</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    This is a banana 🍌</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">TabItem</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Tabs</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Render as:</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Apple</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Orange</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Banana</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6">This is an apple 🍎</div><div role="tabpanel" class="tabItem_Ymn6" hidden="">This is an orange 🍊</div><div role="tabpanel" class="tabItem_Ymn6" hidden="">This is a banana 🍌</div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="notes">NOTES<a href="#notes" class="hash-link" aria-label="Direct link to NOTES" title="Direct link to NOTES">​</a></h2><div class="language-mdx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docs/mdx-features.mdx</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mdx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- Prettier doesn't change this --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:::note</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:::</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Hello world</p></div></div><div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Prettier changes this --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:::note</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:::</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- to this --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">::: note Hello world:::</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docs/mdx-features.mdx</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">:::note Your Title</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Some </span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">content</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain"> with </span><span class="token italic punctuation" style="color:#393A34">_</span><span class="token italic content">Markdown</span><span class="token italic punctuation" style="color:#393A34">_</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#00009f">`syntax`</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:::</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Your Title</div><div class="admonitionContent_S0QG"><p>Some <strong>content</strong> with <em>Markdown</em> <code>syntax</code>.</p></div></div><div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docs/mdx-features.mdx</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">:::tip Use tabs in admonitions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Tabs</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">TabItem</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">apple</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">label</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Apple</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">This is an apple 🍎</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">TabItem</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">TabItem</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">orange</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">label</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Orange</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">This is an orange 🍊</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">TabItem</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">TabItem</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">banana</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">label</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Banana</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">This is a banana 🍌</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">TabItem</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">Tabs</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:::</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Use tabs in admonitions</div><div class="admonitionContent_S0QG"><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Apple</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Orange</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Banana</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6">This is an apple 🍎</div><div role="tabpanel" class="tabItem_Ymn6" hidden="">This is an orange 🍊</div><div role="tabpanel" class="tabItem_Ymn6" hidden="">This is a banana 🍌</div></div></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="math">Math<a href="#math" class="hash-link" aria-label="Direct link to Math" title="Direct link to Math">​</a></h2><div class="language-mdx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docs/mdx-features.mdx</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mdx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Let $f\colon[a,b]\to\R$ be Riemann integrable. Let $F\colon[a,b]\to\R$ be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$F(x)=\int_{a}^{x} f(t)\,dt$. Then $F$ is continuous, and at all $x$ such that</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$f$ is continuous at $x$, $F$ is differentiable at $x$ with $F'(x)=f(x)$.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mspace></mspace><mspace width="0.1111em"></mspace><mo lspace="0em" rspace="0.17em"></mo><mtext> ⁣</mtext><mo lspace="0em" rspace="0em">:</mo><mspace width="0.3333em"></mspace><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">]</mo><mo>→</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">f\colon[a,b]\to\R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mspace nobreak"></span><span class="mspace" style="margin-right:0.1111em"></span><span class="mpunct"></span><span class="mspace" style="margin-right:-0.1667em"></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mrel">:</span></span><span class="mspace" style="margin-right:0.3333em"></span><span class="mopen">[</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">b</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6889em"></span><span class="mord mathbb">R</span></span></span></span></span> be Riemann integrable. Let <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mspace></mspace><mspace width="0.1111em"></mspace><mo lspace="0em" rspace="0.17em"></mo><mtext> ⁣</mtext><mo lspace="0em" rspace="0em">:</mo><mspace width="0.3333em"></mspace><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">]</mo><mo>→</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">F\colon[a,b]\to\R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.13889em">F</span><span class="mspace nobreak"></span><span class="mspace" style="margin-right:0.1111em"></span><span class="mpunct"></span><span class="mspace" style="margin-right:-0.1667em"></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mrel">:</span></span><span class="mspace" style="margin-right:0.3333em"></span><span class="mopen">[</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">b</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6889em"></span><span class="mord mathbb">R</span></span></span></span></span> be
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msubsup><mo>∫</mo><mi>a</mi><mi>x</mi></msubsup><mi>f</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mtext> </mtext><mi>d</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">F(x)=\int_{a}^{x} f(t)\,dt</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.13889em">F</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2151em;vertical-align:-0.3558em"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8593em"><span style="top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span style="top:-3.2579em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3558em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span></span></span></span></span>. Then <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">F</span></span></span></span></span> is continuous, and at all <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span></span></span></span></span> such that
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span></span></span></span></span> is continuous at <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">F</span></span></span></span></span> is differentiable at <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span></span></span></span></span> with <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>F</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F'(x)=f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0019em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>.</p><div class="language-mdx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docs/mdx-features.mdx</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mdx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I = \int_0^{2\pi} \sin(x)\,dx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>I</mi><mo>=</mo><msubsup><mo>∫</mo><mn>0</mn><mrow><mn>2</mn><mi>π</mi></mrow></msubsup><mi>sin</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mtext> </mtext><mi>d</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">I = \int_0^{2\pi} \sin(x)\,dx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.07847em">I</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.476em;vertical-align:-0.9119em"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.564em"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span><span style="top:-3.8129em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.03588em">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">sin</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span></span></span></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="diagrams">Diagrams<a href="#diagrams" class="hash-link" aria-label="Direct link to Diagrams" title="Direct link to Diagrams">​</a></h2><div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Example Mermaid diagram</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token code punctuation" style="color:#393A34">```</span><span class="token code code-language">mermaid</span><span class="token code"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code"></span><span class="token code code-block language-mermaid">graph TD;</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-mermaid">    A--&gt;B;</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-mermaid">    A--&gt;C;</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-mermaid">    B--&gt;D;</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-mermaid">    C--&gt;D;</span><span class="token code"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code"></span><span class="token code punctuation" style="color:#393A34">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="code-block">Code Block<a href="#code-block" class="hash-link" aria-label="Direct link to Code Block" title="Direct link to Code Block">​</a></h2><div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token code punctuation" style="color:#393A34">```</span><span class="token code code-language">jsx title="/src/components/HelloCodeTitle.js"</span><span class="token code"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code"></span><span class="token code code-block language-jsx">function HelloCodeTitle(props) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx">  return &lt;h1&gt;Hello, {props.name}&lt;/h1&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code"></span><span class="token code punctuation" style="color:#393A34">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/src/components/HelloCodeTitle.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">HelloCodeTitle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Hello, </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Syntax highlighting for Other languages by <code>prism</code>: <code>sh</code>, <code>editorconfig</code>, etc.</p><p><strong>editorconfig</strong>:</p><div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token code punctuation" style="color:#393A34">```</span><span class="token code code-language">editorconfig title="/etc/samba.conf"</span><span class="token code"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code"></span><span class="token code code-block language-editorconfig">[documents]</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-editorconfig">path = /data/documents</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-editorconfig">valid users = @simon</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-editorconfig">guest ok = no</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-editorconfig">writable = yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-editorconfig">browsable = yes</span><span class="token code"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code"></span><span class="token code punctuation" style="color:#393A34">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>sh</strong>:</p><div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token code punctuation" style="color:#393A34">```</span><span class="token code code-language">sh</span><span class="token code"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code"></span><span class="token code code-block language-sh">$ ls /home</span><span class="token code"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code"></span><span class="token code punctuation" style="color:#393A34">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token code punctuation" style="color:#393A34">```</span><span class="token code code-language">js</span><span class="token code"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code"></span><span class="token code code-block language-js">function HighlightSomeText(highlight) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js">  if (highlight) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js">    // highlight-next-line</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js">    return 'This text is highlighted!';</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js">  return 'Nothing highlighted';</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js">function HighlightMoreText(highlight) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js">  // highlight-start</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js">  if (highlight) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js">    return 'This range is highlighted!';</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js">  // highlight-end</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js">  return 'Nothing highlighted';</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-js">}</span><span class="token code"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code"></span><span class="token code punctuation" style="color:#393A34">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">HighlightSomeText</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">highlight</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">highlight</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'This text is highlighted!'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Nothing highlighted'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">HighlightMoreText</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">highlight</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">highlight</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'This range is highlighted!'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Nothing highlighted'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token code punctuation" style="color:#393A34">```</span><span class="token code code-language">jsx {1,4-6,11}</span><span class="token code"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code"></span><span class="token code code-block language-jsx">import React from 'react';</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx">function MyComponent(props) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx">  if (props.isBar) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx">    return &lt;div&gt;Bar&lt;/div&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx">  return &lt;div&gt;Foo&lt;/div&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx">export default MyComponent;</span><span class="token code"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code"></span><span class="token code punctuation" style="color:#393A34">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">MyComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">isBar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Bar</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Foo</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token maybe-class-name">MyComponent</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token code punctuation" style="color:#393A34">```</span><span class="token code code-language">jsx {1,4-6,11} showLineNumbers</span><span class="token code"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code"></span><span class="token code code-block language-jsx">import React from 'react';</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx">function MyComponent(props) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx">  if (props.isBar) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx">    return &lt;div&gt;Bar&lt;/div&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx">  return &lt;div&gt;Foo&lt;/div&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code code-block language-jsx">export default MyComponent;</span><span class="token code"></span><br></span><span class="token-line" style="color:#393A34"><span class="token code"></span><span class="token code punctuation" style="color:#393A34">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">MyComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">isBar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Bar</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Foo</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token maybe-class-name">MyComponent</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">JavaScript</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Python</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Java</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">helloWorld</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Hello, world!'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hello_world</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Hello, world!"</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class HelloWorld {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public static void main(String args[]) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.out.println("Hello, World");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="importing-code">Importing Code<a href="#importing-code" class="hash-link" aria-label="Direct link to Importing Code" title="Direct link to Importing Code">​</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--save</span><span class="token plain"> raw-loader</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-mdx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docs/mdx-features.mdx</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mdx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import CodeBlock from '@theme/CodeBlock';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import MyComponentSource from '!!raw-loader!./myComponent';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;CodeBlock language="jsx"&gt;{MyComponentSource}&lt;/CodeBlock&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * Copyright (c) Facebook, Inc. and its affiliates.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This source code is licensed under the MIT license found in the</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * LICENSE file in the root directory of this source tree.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">MyComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">bool</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setBool</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">MyComponent rendered !</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">bool=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">bool </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'true'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'false'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript arrow operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript function" style="color:#d73a49">setBool</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript parameter" style="color:#00009f">b</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript arrow operator" style="color:#393A34">=&gt;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript operator" style="color:#393A34">!</span><span class="token tag script language-javascript" style="color:#00009f">b</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">toggle bool</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="importing-markdown">Importing Markdown<a href="#importing-markdown" class="hash-link" aria-label="Direct link to Importing Markdown" title="Direct link to Importing Markdown">​</a></h2><div class="language-mdx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docs/mdx-features.mdx</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mdx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import PartialExample from './_markdown-partial-example.mdx';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;PartialExample name="Sebastien" /&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><span>Hello <!-- -->Sebastien</span><p>This is text some content from <code>_markdown-partial-example.mdx</code>.</p><div class="language-mdx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docs/mdx-features.mdx</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mdx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import PartialExample1 from './wiki-skia.md';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;PartialExample1 /&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It imports file from <a href="/blog/wiki-skia">wiki-skia.md</a>:</p><p><a href="https://groups.google.com/g/skia-discuss/c/rNWV-oYtps" target="_blank" rel="noopener noreferrer">What the difference between SkImage/SkPicture/SkCanvas/SkSurface?</a></p><p><a href="https://groups.google.com/g/skia-discuss/c/zatUu89s5_I" target="_blank" rel="noopener noreferrer">SkBitmap based SkCanvas very slow... How to improve draw speeds?</a></p><p><a href="https://groups.google.com/g/skia-discuss/c/M6G_bQd8Vf8" target="_blank" rel="noopener noreferrer">How to move SkImage from CPU to GPU?</a></p><p><a href="https://groups.google.com/g/skia-discuss/c/EqvExXnEUbI" target="_blank" rel="noopener noreferrer">How to control the SkImage GPU back cache size?</a></p><p>As far as I understand when I load SkImage from file or SkBitmap the SkImage lives in CPU side memory. Then the moment I draw this SkImage on a GPU backed canvas it will make a copy of the CPU data into a GPU backed texture. So now we technically have two copies available on the SkImage. Then each time I draw that SkImage it will do it quickly cause it's already in the GPU side.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="import-code-snippets-from-github-repositories">Import Code Snippets from GitHub Repositories<a href="#import-code-snippets-from-github-repositories" class="hash-link" aria-label="Direct link to Import Code Snippets from GitHub Repositories" title="Direct link to Import Code Snippets from GitHub Repositories">​</a></h2><p><a href="https://github.com/saucelabs/docusaurus-theme-github-codeblock" target="_blank" rel="noopener noreferrer">A Docusaurus v2 plugin that supports referencing code examples from public GitHub repositories.</a></p><div><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">src/theme/ReferenceCodeBlock/index.tsx</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">loading</span><span class="token spread operator" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="font-size:.9em;font-weight:600;color:#0E75DD;text-align:center;padding-bottom:13px;text-decoration:underline"><a href="https://github.com/saucelabs/docusaurus-theme-github-codeblock/blob/main/src/theme/ReferenceCodeBlock/index.tsx#L105-L108" target="_blank">See full example on GitHub</a></div></div><div><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">code-snippets/XKeyIn.cpp</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">loading</span><span class="token spread operator" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="font-size:.9em;font-weight:600;color:#0E75DD;text-align:center;padding-bottom:13px;text-decoration:underline"><a href="https://github.com/liviaerxin/liviaerxin.github.io/blob/560ce03e8dbf5d32b197ccf307ca36af25b5dacd/code-snippets/XKeyIn.cpp#L55-L72" target="_blank">See full example on GitHub</a></div></div>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="mdx" term="mdx"/>
        <category label="docusaurus" term="docusaurus"/>
        <category label="react" term="react"/>
        <category label="best practice" term="best practice"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[FFmpeg Command Samples]]></title>
        <id>https://liviaerxin.github.io/blog/ffmpeg-command-samples</id>
        <link href="https://liviaerxin.github.io/blog/ffmpeg-command-samples"/>
        <updated>2023-07-06T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Learn FFmpeg]]></summary>
        <content type="html"><![CDATA[<p>A list of FFmpeg command samples for quick lookup!</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2><p>Examples of Container and Codec lists in Chrome<sup id="fnref-chrome-52b4f7"><a href="#fn-chrome-52b4f7" class="footnote-ref">chrome</a></sup>:</p><p>Video Container Format:</p><ul><li>MP4 <!-- -->[<code>.mp4</code> file extension]</li><li>Ogg</li><li>WebM</li><li>WAV</li><li>HLS <!-- -->[<code>.m3u8</code> file extension]</li></ul><p>Video Codec Format:</p><ul><li>VP8</li><li>VP9</li><li>H.264 <!-- -->[Chrome only]</li><li>H.265 <!-- -->[Chrome only and also only with the underlying OS support]</li><li>MPEG-4 <!-- -->[Chrome OS only, aka <strong>Xvid</strong>, <strong>DivX</strong>]</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="about-ffmpeg-command">About FFmpeg Command<a href="#about-ffmpeg-command" class="hash-link" aria-label="Direct link to About FFmpeg Command" title="Direct link to About FFmpeg Command">​</a></h2><p>The common patter of <code>ffmpeg</code> looks like:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">input_options</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">output_options</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> output.mp4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In short:</p><ul><li>The <code>[input_options]</code> before <code>-i input.mp4</code> are options used for decoding the video</li><li>The <code>[output_options]</code> before <code>output.mp4</code> are options used for encoding the video</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ffmpeg-command-examples">FFmpeg Command Examples<a href="#ffmpeg-command-examples" class="hash-link" aria-label="Direct link to FFmpeg Command Examples" title="Direct link to FFmpeg Command Examples">​</a></h2><p>It's note worthing to look over FFmpeg Wiki <sup id="fnref-ffmpeg-52b4f7"><a href="#fn-ffmpeg-52b4f7" class="footnote-ref">ffmpeg</a></sup></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="list-all-available-container-formats">List all available <code>container</code> formats<a href="#list-all-available-container-formats" class="hash-link" aria-label="Direct link to list-all-available-container-formats" title="Direct link to list-all-available-container-formats">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-formats</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="list-all-available-codec-formats">List all available <code>codec</code> formats<a href="#list-all-available-codec-formats" class="hash-link" aria-label="Direct link to list-all-available-codec-formats" title="Direct link to list-all-available-codec-formats">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-codecs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="list-all-available-encoder-or-decoder">List all available <code>encoder</code> or <code>decoder</code><a href="#list-all-available-encoder-or-decoder" class="hash-link" aria-label="Direct link to list-all-available-encoder-or-decoder" title="Direct link to list-all-available-encoder-or-decoder">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-encoders</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-decoders</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Show available `presets`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-h</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">encoder</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">h264_nvenc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="list-all-frames-timestamp">List all frames timestamp<a href="#list-all-frames-timestamp" class="hash-link" aria-label="Direct link to List all frames timestamp" title="Direct link to List all frames timestamp">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ffprobe </span><span class="token parameter variable" style="color:#36acaa">-select_streams</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">v</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-show_entries</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">frame</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pict_type,pts_time </span><span class="token parameter variable" style="color:#36acaa">-of</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">csv</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">p</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="list-all-keyframei-frame-timestamp">List all keyframe(I-frame) timestamp<a href="#list-all-keyframei-frame-timestamp" class="hash-link" aria-label="Direct link to List all keyframe(I-frame) timestamp" title="Direct link to List all keyframe(I-frame) timestamp">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ffprobe </span><span class="token parameter variable" style="color:#36acaa">-select_streams</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">v</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-show_entries</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">frame</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pict_type,pts_time </span><span class="token parameter variable" style="color:#36acaa">-of</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">csv</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">p</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-skip_frame</span><span class="token plain"> nokey </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="read-video-information-json-output">Read video information json output<a href="#read-video-information-json-output" class="hash-link" aria-label="Direct link to Read video information json output" title="Direct link to Read video information json output">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ffprobe </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> quiet </span><span class="token parameter variable" style="color:#36acaa">-show_streams</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-select_streams</span><span class="token plain"> v:0 </span><span class="token parameter variable" style="color:#36acaa">-print_format</span><span class="token plain"> json video.mp4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="transcode-video">Transcode video<a href="#transcode-video" class="hash-link" aria-label="Direct link to Transcode video" title="Direct link to Transcode video">​</a></h3><p>There are three possible and reasonable methods for transcoding:</p><ul><li>software decoding and software encoding</li><li>software decoding and hardware encoding</li><li>hardware decoding and hardware encoding</li></ul><p>you can convert either the <code>container formats</code> or the <code>codecs formats</code>, such as:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># To `mp4` container and `h.264` codecs(the lower crf, the higher quality)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.avi </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> libx264 </span><span class="token parameter variable" style="color:#36acaa">-preset</span><span class="token plain"> fast </span><span class="token parameter variable" style="color:#36acaa">-crf</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token plain"> output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># To `mp4` container and `mpeg4` codecs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.avi </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> libxvid </span><span class="token parameter variable" style="color:#36acaa">-preset</span><span class="token plain"> fast output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># To be friendly for streaming, adding necessary metadata to begin playback faster! </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.avi </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> libx264 </span><span class="token parameter variable" style="color:#36acaa">-preset</span><span class="token plain"> fast </span><span class="token parameter variable" style="color:#36acaa">-crf</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-movflags</span><span class="token plain"> +faststart output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Remove audio</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.avi </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> libx264 </span><span class="token parameter variable" style="color:#36acaa">-preset</span><span class="token plain"> fast </span><span class="token parameter variable" style="color:#36acaa">-crf</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-an</span><span class="token plain"> output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Use NVIDIA GPU</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.avi </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> h264_nvenc </span><span class="token parameter variable" style="color:#36acaa">-preset</span><span class="token plain"> fast output.avi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># keep quality</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.avi </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> h264_nvenc </span><span class="token parameter variable" style="color:#36acaa">-preset</span><span class="token plain"> fast </span><span class="token parameter variable" style="color:#36acaa">-rc</span><span class="token plain"> constqp </span><span class="token parameter variable" style="color:#36acaa">-cq</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">19</span><span class="token plain"> output.avi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set-keyframe-interval">Set keyframe interval<a href="#set-keyframe-interval" class="hash-link" aria-label="Direct link to Set keyframe interval" title="Direct link to Set keyframe interval">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># mpeg4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.avi </span><span class="token parameter variable" style="color:#36acaa">-vcodec</span><span class="token plain"> libxvid </span><span class="token parameter variable" style="color:#36acaa">-preset</span><span class="token plain"> fast </span><span class="token parameter variable" style="color:#36acaa">-g</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-keyint_min</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-sc_threshold</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> output.avi </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># NVIDIA GPU</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># This sets the I-frame interval at 10 and ensures that no I-frames will be inserted in scene changes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.avi </span><span class="token parameter variable" style="color:#36acaa">-vcodec</span><span class="token plain"> h264_nvenc </span><span class="token parameter variable" style="color:#36acaa">-preset</span><span class="token plain"> fast </span><span class="token parameter variable" style="color:#36acaa">-g</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-keyint_min</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-sc_threshold</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> output.avi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="clip-video">Clip video<a href="#clip-video" class="hash-link" aria-label="Direct link to Clip video" title="Direct link to Clip video">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Fast clip with stream copy and faster seeking(700x)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-ss</span><span class="token plain"> 00:00:10 </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> video.mp4 </span><span class="token parameter variable" style="color:#36acaa">-to</span><span class="token plain"> 00:00:50 </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> copy output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Fast clip with stream copy and slower seeking(600x)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> video.mp4 </span><span class="token parameter variable" style="color:#36acaa">-ss</span><span class="token plain"> 00:00:10 </span><span class="token parameter variable" style="color:#36acaa">-to</span><span class="token plain"> 00:00:50 </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> copy output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Slow clip with re-encoding and faster seeking(1x)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-ss</span><span class="token plain"> 00:00:10 </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> video.mp4 </span><span class="token parameter variable" style="color:#36acaa">-to</span><span class="token plain"> 00:00:50 </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> libx264 output.mp4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Use filter(Slow)</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4 </span><span class="token parameter variable" style="color:#36acaa">-an</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> libx264 </span><span class="token parameter variable" style="color:#36acaa">-filter:v</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"trim=start=10:end=30"</span><span class="token plain"> output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># remove the black video</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4 </span><span class="token parameter variable" style="color:#36acaa">-an</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> libx264 </span><span class="token parameter variable" style="color:#36acaa">-filter:v</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"trim=start=10:end=30,setpts=PTS-STARTPTS"</span><span class="token plain"> output.mp4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>NOTE: Cutting video with stream copy will lead the start frame is not precise!</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="slow-downspeed-up-video">Slow down/Speed up video<a href="#slow-downspeed-up-video" class="hash-link" aria-label="Direct link to Slow down/Speed up video" title="Direct link to Slow down/Speed up video">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Slow down to 1/2x in fast way</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-itsscale</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> video.mp4 </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> copy output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Speed up to 2x in fast way</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-itsscale</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> video.mp4 </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> copy output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Speed up to 2x with re-encoding in slow way</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-itsscale</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> video.mp4 </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> libx264 output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Speed up to 2x with `setpts filter`(which requires re-encoding) in slow way</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> video.mp4 </span><span class="token parameter variable" style="color:#36acaa">-filter:v</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"setpts=0.5*PTS"</span><span class="token plain"> output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Change fps to slow down/speed up but keeping duration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> video.mp4 </span><span class="token parameter variable" style="color:#36acaa">-filter:v</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"fps=30"</span><span class="token plain"> output.mp4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="draw-region-of-interestroi-on-a-video">Draw region of interest(ROI) on a video<a href="#draw-region-of-interestroi-on-a-video" class="hash-link" aria-label="Direct link to Draw region of interest(ROI) on a video" title="Direct link to Draw region of interest(ROI) on a video">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Draw one drawbox</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4 </span><span class="token parameter variable" style="color:#36acaa">-filter:v</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"drawbox=x=100:y=100:w=200:h=150:color=red@0.5"</span><span class="token plain"> output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4 </span><span class="token parameter variable" style="color:#36acaa">-filter:v</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"drawbox=x=100:y=100:w=200:h=150:color=red@0.5,drawtext=text='Test Text':x=100:y=100:fontsize=24:fontcolor=yellow:box=1:boxcolor=yellow"</span><span class="token plain"> output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-ss</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-noaccurate_seek</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4 </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> libx264 </span><span class="token parameter variable" style="color:#36acaa">-filter:v</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"drawbox=x=100:y=100:w=200:h=150:color=red@0.5,drawtext=text='Test Text':x=100:y=(100-text_h):fontsize=24:fontcolor=black:box=1:boxcolor=red:boxborderw=2"</span><span class="token plain"> output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Trim video and draw box</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4 </span><span class="token parameter variable" style="color:#36acaa">-an</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> libx264 </span><span class="token parameter variable" style="color:#36acaa">-filter:v</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"trim=start=10:end=30,drawbox=x=100:y=100:w=200:h=150:color=red@0.5:enable='between(t,10,15)',setpts=PTS-STARTPTS"</span><span class="token plain"> output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4 </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> overlay_video.mp4 </span><span class="token parameter variable" style="color:#36acaa">-filter_complex</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[0:v][1:v]overlay=0:0:enable='between(t,0,25)'"</span><span class="token plain"> output.mp4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Draw different `drawbox` at different time on video from a file(using `timeline` feature)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># See timeline: https://ffmpeg.org/ffmpeg-filters.html#Timeline-editing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># See expression: https://ffmpeg.org/ffmpeg-utils.html#Expression-Evaluation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4 </span><span class="token parameter variable" style="color:#36acaa">-filter_complex_script</span><span class="token plain"> timeline.txt output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># `timeline.txt` look like:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:v</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">drawbox</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">100</span><span class="token plain">:y</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">100</span><span class="token plain">:w</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">200</span><span class="token plain">:h</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">150</span><span class="token plain">:color</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">red@0.5:enable</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'between(t,0,21)'</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">box1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">box1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">drawbox</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">300</span><span class="token plain">:y</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">200</span><span class="token plain">:w</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">150</span><span class="token plain">:h</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">100</span><span class="token plain">:color</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">green@0.5:t</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">:enable</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'between(t,21,40)'</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">box2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">box2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">drawbox</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">50</span><span class="token plain">:y</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">300</span><span class="token plain">:w</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">300</span><span class="token plain">:h</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">200</span><span class="token plain">:color</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">blue@0.5:t</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">:enable</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'between(t,41,60)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># or using `n`: sequential number of the input frame, starting from 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:v</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">drawbox</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">100</span><span class="token plain">:y</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">100</span><span class="token plain">:w</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">200</span><span class="token plain">:h</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">150</span><span class="token plain">:color</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">red@0.5:n</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:600</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">box1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">box1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">drawbox</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">300</span><span class="token plain">:y</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">200</span><span class="token plain">:w</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">150</span><span class="token plain">:h</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">100</span><span class="token plain">:color</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">green@0.5:n</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">601</span><span class="token plain">:1200</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">box2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">box2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">drawbox</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">50</span><span class="token plain">:y</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">300</span><span class="token plain">:w</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">300</span><span class="token plain">:h</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">200</span><span class="token plain">:color</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">blue@0.5:n</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1201</span><span class="token plain">:1800</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Draw different `drawbox` at different time on video</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4 </span><span class="token parameter variable" style="color:#36acaa">-filter_complex</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[0:v]drawbox=x=100:y=100:w=200:h=150:color=red:t=8:enable='between(t,0,21)'[box1];[box1]drawbox=x=300:y=200:w=150:h=100:color=green:t=8:enable='between(t,21,40)'[box2];[box2]drawbox=x=50:y=300:w=300:h=200:color=blue:t=8:enable='between(t,41,60)'"</span><span class="token plain"> output.mp4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pipe-ffmpeg">Pipe ffmpeg<a href="#pipe-ffmpeg" class="hash-link" aria-label="Direct link to Pipe ffmpeg" title="Direct link to Pipe ffmpeg">​</a></h3><p>The <code>FFmpeg Pipe</code> is very useful in <strong>IPC</strong> for communicating <code>FFmpeg</code> with another <code>process</code>. For instance, an application generates images to <code>Pipe</code> stdin which <code>FFmpeg</code> reads and encodes into a video.</p><p><strong>A real-life scenario that FFmpeg read from Pipe</strong>:
An application applied <code>OpenCV</code> to process images for object detection, and it will draw ROI but lacks ability to encode a video as efficiently as <code>FFmpeg</code> does. So it's somewhat ideal to pipe these images to <code>FFmpeg</code> that can encode the video by leveraging hardware acceleration(GPU) capability.</p><p>However, FFmpeg can also <strong>write to a Pipe</strong>.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># It works in Linux and Windows(`cmd`, does not work in `PS`)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-ss</span><span class="token plain"> 00:00:10 </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> video.mp4 </span><span class="token parameter variable" style="color:#36acaa">-to</span><span class="token plain"> 00:00:20 </span><span class="token parameter variable" style="color:#36acaa">-an</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> copy </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> h264 pipe: </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> pipe: </span><span class="token parameter variable" style="color:#36acaa">-filter:v</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"drawbox=x=100:y=100:w=200:h=150:color=red"</span><span class="token plain"> output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4 </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> rawvideo </span><span class="token parameter variable" style="color:#36acaa">-pix_fmt</span><span class="token plain"> bgr24 </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> rawvideo pipe: </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> rawvideo </span><span class="token parameter variable" style="color:#36acaa">-pix_fmt</span><span class="token plain"> bgr24 </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> 1920x1080 </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> pipe: </span><span class="token parameter variable" style="color:#36acaa">-pix_fmt</span><span class="token plain"> yuv420p </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> h264_nvenc foo.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4 </span><span class="token parameter variable" style="color:#36acaa">-pix_fmt</span><span class="token plain"> yuv420p </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> rawvideo pipe: </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> rawvideo </span><span class="token parameter variable" style="color:#36acaa">-pix_fmt</span><span class="token plain"> yuv420p </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> 1920x1080 </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> pipe: </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> h264_nvenc foo.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4 </span><span class="token parameter variable" style="color:#36acaa">-an</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> h264 pipe: </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> h264 </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> pipe: </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> h264_nvenc foo.mp4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="use-testsrc">Use testsrc<a href="#use-testsrc" class="hash-link" aria-label="Direct link to Use testsrc" title="Direct link to Use testsrc">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> lavfi </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">testsrc</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">duration</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10</span><span class="token plain">:size</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">1920x1080:rate</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> libx264 </span><span class="token parameter variable" style="color:#36acaa">-pix_fmt</span><span class="token plain"> yuv420p testsrc.mp4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="split-and-concatenate">Split and Concatenate<a href="#split-and-concatenate" class="hash-link" aria-label="Direct link to Split and Concatenate" title="Direct link to Split and Concatenate">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4 </span><span class="token parameter variable" style="color:#36acaa">-ss</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-to</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> copy part1.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4 </span><span class="token parameter variable" style="color:#36acaa">-ss</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-to</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> copy part2.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> input.mp4 </span><span class="token parameter variable" style="color:#36acaa">-ss</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> copy part3.mp4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> part2.mp4 </span><span class="token parameter variable" style="color:#36acaa">-filter:v</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"drawbox=x=100:y=100:w=200:h=150:color=red@0.5"</span><span class="token plain"> part2-draw.mp4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Slow,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> part1.mp4 </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> part2-draw.mp4 </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> part3.mp4 </span><span class="token parameter variable" style="color:#36acaa">-filter_complex</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[0:v][1:v][2:v]concat=n=3:v=1:a=0[outv]"</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-map</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"[outv]"</span><span class="token plain"> output.mp4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Fast(Concat protocol),</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> part1.mp4 </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> copy part1.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> part2-draw.mp4 </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> copy part2-draw.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> part3.mp4 </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> copy part3.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"concat:part1.ts|part2-draw.ts|part3.ts"</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> copy output.mp4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Fast(Concat demuxer),</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> concat </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> concat.txt </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> copy output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># concat.txt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'part1.mp4'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'part2-draw.mp4'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'part3.mp4'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Or avoid creating the input file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> concat </span><span class="token parameter variable" style="color:#36acaa">-safe</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"file '</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/part1.mp4'"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"file '</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/part2-draw.mp4'"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"file '</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/part3.mp4'"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> copy output.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># cmd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> concat </span><span class="token parameter variable" style="color:#36acaa">-safe</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">@echo </span><span class="token string" style="color:#e3116c">"file '</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/part1.mp4'"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">@echo </span><span class="token string" style="color:#e3116c">"file '</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/part2-draw.mp4'"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">@echo </span><span class="token string" style="color:#e3116c">"file '</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/part3.mp4'"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c:v</span><span class="token plain"> copy output.mp4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://trac.ffmpeg.org/wiki/Concatenate" target="_blank" rel="noopener noreferrer">https://trac.ffmpeg.org/wiki/Concatenate</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><div class="footnotes"><hr><ol><li id="fn-chrome-52b4f7"><a href="https://www.chromium.org/audio-video/" target="_blank" rel="noopener noreferrer">Chrome Audio/Video Support</a><a href="#fnref-chrome-52b4f7" class="footnote-backref">↩</a></li><li id="fn-ffmpeg-52b4f7"><a href="https://trac.ffmpeg.org/wiki" target="_blank" rel="noopener noreferrer">FFmpeg Wiki</a><a href="#fnref-ffmpeg-52b4f7" class="footnote-backref">↩</a></li></ol></div>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="cheat-sheet" term="cheat-sheet"/>
        <category label="ffmpeg" term="ffmpeg"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki CUDA]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-cuda</id>
        <link href="https://liviaerxin.github.io/blog/wiki-cuda"/>
        <updated>2023-06-29T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Learn CUDA]]></summary>
        <content type="html"><![CDATA[<p>Ecosystem:</p><p>Hardware:</p><ul><li>GPU(Hardware)</li></ul><p>Software:</p><ul><li>Nvidia GPU Driver<ul><li>libnvidia-encode.so</li></ul></li><li>CUDA Toolkit<ul><li>libnvcuvid.so</li><li>libcuda.so</li></ul></li><li>cuDNN library</li><li>Nvidia Container Toolkit<ul><li>libnvidia-container.so</li></ul></li></ul><p><img loading="lazy" src="https://docs.nvidia.com/deploy/cuda-compatibility/graphics/CUDA-components.png" alt="CUDA Components" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cuda-on-wsl">CUDA on WSL<a href="#cuda-on-wsl" class="hash-link" aria-label="Direct link to CUDA on WSL" title="Direct link to CUDA on WSL">​</a></h2><p>NVIDIA CUDA software stack on WSL 2:</p><p><img loading="lazy" src="https://docs.nvidia.com/cuda/wsl-user-guide/_images/wsl-launch-upt-0625-rz.png" alt="NVIDIA CUDA software stack on WSL 2" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nvidia-gpu-driver-on-ubuntu">Nvidia GPU Driver on Ubuntu<a href="#nvidia-gpu-driver-on-ubuntu" class="hash-link" aria-label="Direct link to Nvidia GPU Driver on Ubuntu" title="Direct link to Nvidia GPU Driver on Ubuntu">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="find-out-whether-the-host-machine-have-nvidia-gpu-hardware">Find out whether the host machine have Nvidia GPU hardware<a href="#find-out-whether-the-host-machine-have-nvidia-gpu-hardware" class="hash-link" aria-label="Direct link to Find out whether the host machine have Nvidia GPU hardware" title="Direct link to Find out whether the host machine have Nvidia GPU hardware">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ lspci </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> VGA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0000:ac:00.0 VGA compatible controller: NVIDIA Corporation Device </span><span class="token number" style="color:#36acaa">2233</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rev a1</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> lshw </span><span class="token parameter variable" style="color:#36acaa">-C</span><span class="token plain"> display</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  *-display</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       description: VGA compatible controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       product: NVIDIA Corporation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       vendor: NVIDIA Corporation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       physical id: </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       bus info: pci@0000:ac:00.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       logical name: /dev/fb0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       version: a1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       width: </span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> bits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       clock: 33MHz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       capabilities: pm msi pciexpress vga_controller bus_master cap_list rom fb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       configuration: </span><span class="token assign-left variable" style="color:#36acaa">depth</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">32</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">driver</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">nouveau </span><span class="token assign-left variable" style="color:#36acaa">latency</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">resolution</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1920,1080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       resources: iomemory:204f0-204ef iomemory:204f0-204ef irq:68 memory:99000000-99ffffff memory:204fe0000000-204fefffffff memory:204ff0000000-204ff1ffffff ioport:3000</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">128</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> memory:9a080000-9a0fffff</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ hwinfo </span><span class="token parameter variable" style="color:#36acaa">--gfxcard</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--short</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">graphics card:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       nVidia VGA compatible controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Primary display adapter: </span><span class="token comment" style="color:#999988;font-style:italic">#94</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="check-which-gpu-driver-being-used">Check which GPU Driver being used<a href="#check-which-gpu-driver-being-used" class="hash-link" aria-label="Direct link to Check which GPU Driver being used" title="Direct link to Check which GPU Driver being used">​</a></h3><p>Ubuntu is using <strong>open-source Nouveau drivers</strong></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ lsmod </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> nouveau</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nouveau              </span><span class="token number" style="color:#36acaa">2306048</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mxm_wmi                </span><span class="token number" style="color:#36acaa">16384</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> nouveau</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">i2c_algo_bit           </span><span class="token number" style="color:#36acaa">16384</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> nouveau</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drm_ttm_helper         </span><span class="token number" style="color:#36acaa">16384</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> nouveau</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ttm                    </span><span class="token number" style="color:#36acaa">86016</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> drm_ttm_helper,nouveau</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drm_kms_helper        </span><span class="token number" style="color:#36acaa">311296</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> nouveau</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drm                   </span><span class="token number" style="color:#36acaa">622592</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> drm_kms_helper,drm_ttm_helper,ttm,nouveau</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">video                  </span><span class="token number" style="color:#36acaa">65536</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> dell_wmi,nouveau</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wmi                    </span><span class="token number" style="color:#36acaa">32768</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"> dell_wmi_sysman,dell_wmi,wmi_bmof,dell_smbios,dell_wmi_descriptor,mxm_wmi,nouveau</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Ubuntu is not using the <strong>proprietary NVIDIA drivers</strong></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ lsmod </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> nvidia</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="install-the-nvidia-gpu-driver">Install the Nvidia GPU driver<a href="#install-the-nvidia-gpu-driver" class="hash-link" aria-label="Direct link to Install the Nvidia GPU driver" title="Direct link to Install the Nvidia GPU driver">​</a></h3><p><a href="https://www.cyberciti.biz/faq/ubuntu-linux-install-nvidia-driver-latest-proprietary-driver" target="_blank" rel="noopener noreferrer">Ubuntu Linux Install Nvidia Driver (Latest Proprietary Driver)</a></p><p><a href="https://phoenixnap.com/kb/install-nvidia-drivers-ubuntu#ftoc-heading-11" target="_blank" rel="noopener noreferrer">Install Nvidia Beta Drivers via PPA Repository</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="verify-the-nvidia-gpu-driver">Verify the Nvidia GPU driver<a href="#verify-the-nvidia-gpu-driver" class="hash-link" aria-label="Direct link to Verify the Nvidia GPU driver" title="Direct link to Verify the Nvidia GPU driver">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nvidia-smi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nvidia-smi --query-gpu</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">driver_version </span><span class="token parameter variable" style="color:#36acaa">--format</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">csv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dconfig </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> nvidia</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nvidia-cuda-on-ubuntu">Nvidia CUDA on Ubuntu<a href="#nvidia-cuda-on-ubuntu" class="hash-link" aria-label="Direct link to Nvidia CUDA on Ubuntu" title="Direct link to Nvidia CUDA on Ubuntu">​</a></h2><p><a href="https://docs.nvidia.com/cuda/" target="_blank" rel="noopener noreferrer">Official documentation: CUDA installation</a></p><p><a href="https://linuxhint.com/install-cuda-on-ubuntu-22-04-lts" target="_blank" rel="noopener noreferrer">How to Install CUDA on Ubuntu 22.04 LTS</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nvidia-cuda-container-toolkit">Nvidia CUDA Container Toolkit<a href="#nvidia-cuda-container-toolkit" class="hash-link" aria-label="Direct link to Nvidia CUDA Container Toolkit" title="Direct link to Nvidia CUDA Container Toolkit">​</a></h2><p><a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/user-guide.html" target="_blank" rel="noopener noreferrer"></a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nvidia-cuda-container">Nvidia CUDA Container<a href="#nvidia-cuda-container" class="hash-link" aria-label="Direct link to Nvidia CUDA Container" title="Direct link to Nvidia CUDA Container">​</a></h2><p>Prerequisites on Host Machine:</p><ul><li><a href="#nvidia-gpu-driver-on-ubuntu">Nvidia GPU driver</a></li><li><a href="#nvidia-cuda-container-toolkit">Nvidia CUDA Container Toolkit</a></li><li>Docker</li></ul><p>Running a docker container <code>ubuntu</code>,</p><p><a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/docker-specialized.html#" target="_blank" rel="noopener noreferrer">Specialized Configurations with Docker — container-toolkit 1.14.1 documentation</a></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--gpus</span><span class="token plain"> all ubuntu nvidia-smi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--gpus</span><span class="token plain"> all ubuntu ldconfig </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> nvidia</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        libnvidia-ptxjitcompiler.so.1 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">libc6,x86-64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/x86_64-linux-gnu/libnvidia-ptxjitcompiler.so.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        libnvidia-pkcs11-openssl3.so.535.86.05 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">libc6,x86-64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/x86_64-linux-gnu/libnvidia-pkcs11-openssl3.so.535.86.05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        libnvidia-opencl.so.1 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">libc6,x86-64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/x86_64-linux-gnu/libnvidia-opencl.so.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        libnvidia-nvvm.so.4 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">libc6,x86-64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/x86_64-linux-gnu/libnvidia-nvvm.so.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        libnvidia-ml.so.1 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">libc6,x86-64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/x86_64-linux-gnu/libnvidia-ml.so.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        libnvidia-cfg.so.1 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">libc6,x86-64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/x86_64-linux-gnu/libnvidia-cfg.so.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        libnvidia-allocator.so.1 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">libc6,x86-64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/x86_64-linux-gnu/libnvidia-allocator.so.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">NVIDIA_DRIVER_CAPABILITIES</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">video </span><span class="token parameter variable" style="color:#36acaa">--gpus</span><span class="token plain"> all ubuntu ldconfig </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> nvidia</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        libnvidia-ptxjitcompiler.so.1 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">libc6,x86-64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/x86_64-linux-gnu/libnvidia-ptxjitcompiler.so.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        libnvidia-pkcs11-openssl3.so.535.86.05 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">libc6,x86-64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/x86_64-linux-gnu/libnvidia-pkcs11-openssl3.so.535.86.05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        libnvidia-opticalflow.so.1 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">libc6,x86-64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/x86_64-linux-gnu/libnvidia-opticalflow.so.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        libnvidia-opencl.so.1 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">libc6,x86-64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/x86_64-linux-gnu/libnvidia-opencl.so.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        libnvidia-nvvm.so.4 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">libc6,x86-64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/x86_64-linux-gnu/libnvidia-nvvm.so.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        libnvidia-encode.so.1 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">libc6,x86-64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/x86_64-linux-gnu/libnvidia-encode.so.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        libnvidia-allocator.so.1 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">libc6,x86-64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/x86_64-linux-gnu/libnvidia-allocator.so.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Running a docker container <code>nvidia/cuda</code>,</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Make sure the version of <strong>CUDA container</strong> <code>nvidia/cuda:xx.x.x-base-ubuntu22.04</code> such as <code>12.2.0</code> in following must be compatible with the version of the <strong>Nvidia GPU driver</strong> on the host platform such as <code>&gt;525.60.13</code>.</p></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--gpus</span><span class="token plain"> all nvidia/cuda:12.2.0-base-ubuntu22.04 nvidia-smi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--gpus</span><span class="token plain"> all </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">NVIDIA_VISIBLE_DEVICES</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">all </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">NVIDIA_DRIVER_CAPABILITIES</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">compute,video,utility,graphics </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nvidia/cuda:12.2.0-base-ubuntu22.04 nvidia-smi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>More <code>Dockerfile</code> examples:</p><ul><li><a href="/code-snippets/dockerfiles/nvidia-cuda-ffmpeg/Dockerfile">Dockerfile</a></li><li><a target="_blank" href="/assets/files/docker-compose-82c74b0de8fc41ced08aa64543a22057.yml">docker compose</a></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ffmpeg-in-nvidia-cuda-container">FFmpeg in Nvidia CUDA container<a href="#ffmpeg-in-nvidia-cuda-container" class="hash-link" aria-label="Direct link to FFmpeg in Nvidia CUDA container" title="Direct link to FFmpeg in Nvidia CUDA container">​</a></h2><p><a href="https://developer.nvidia.com/ffmpeg" target="_blank" rel="noopener noreferrer">https://developer.nvidia.com/ffmpeg</a></p><p><a href="https://docs.nvidia.com/video-technologies/video-codec-sdk/12.0/ffmpeg-with-nvidia-gpu/index.html#compiling-for-linux" target="_blank" rel="noopener noreferrer">https://docs.nvidia.com/video-technologies/video-codec-sdk/12.0/ffmpeg-with-nvidia-gpu/index.html#compiling-for-linux</a></p><p><a href="https://developer.nvidia.com/blog/nvidia-ffmpeg-transcoding-guide/" target="_blank" rel="noopener noreferrer">https://developer.nvidia.com/blog/nvidia-ffmpeg-transcoding-guide/</a></p><p><a href="/blog/ffmpeg-on-cuda-container">Install FFmpeg on Nvidia CUDA Container</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="known-issues">Known issues<a href="#known-issues" class="hash-link" aria-label="Direct link to Known issues" title="Direct link to Known issues">​</a></h2><p>After random long running time, in Nvidia docker the FFmpeg encoding stops and error comes out: <code>CUDA_ERROR_NO_DEVICE: no CUDA-capable device is detected</code>.<br>
<a href="https://github.com/jellyfin/jellyfin/issues/9287" target="_blank" rel="noopener noreferrer">[Issue]: NVidia Docker transcoding randomly stops working after 5 minutes to 4 hours later. · Issue #9287 · jellyfin/jellyfin · GitHub</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p><a href="https://docs.nvidia.com/deploy/cuda-compatibility/index.html" target="_blank" rel="noopener noreferrer">CUDA And Nvidia Graphics Driver</a></p><p><a href="https://docs.nvidia.com/cuda/wsl-user-guide/index.html" target="_blank" rel="noopener noreferrer">CUDA on WSL User Guide</a></p>]]></content>
        <author>
            <name>frank</name>
        </author>
        <category label="nvidia" term="nvidia"/>
        <category label="gpu" term="gpu"/>
        <category label="cuda" term="cuda"/>
        <category label="wsl" term="wsl"/>
        <category label="ubuntu" term="ubuntu"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[C++ Package Management]]></title>
        <id>https://liviaerxin.github.io/blog/c-package-management</id>
        <link href="https://liviaerxin.github.io/blog/c-package-management"/>
        <updated>2023-06-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[C++ Package Management]]></summary>
        <content type="html"><![CDATA[<p>vcpkg</p><p><a href="/blog/wiki-vcpkg">[wiki vcpkg]</a></p><p>conan</p>]]></content>
        <author>
            <name>frank</name>
        </author>
        <category label="c++" term="c++"/>
        <category label="vcpkg" term="vcpkg"/>
        <category label="conan" term="conan"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Code Snippet Management]]></title>
        <id>https://liviaerxin.github.io/blog/code-snippet-management</id>
        <link href="https://liviaerxin.github.io/blog/code-snippet-management"/>
        <updated>2023-06-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Code Snippet Management]]></summary>
        <content type="html"><![CDATA[<img loading="lazy" src="https://www.plantuml.com/plantuml/png/RP9DQ-Gm38Rl_XLYxcxlfGpDE5qeR4zXqyFIWngBYLd7ChR2T2ZzxqkSJ4apFILwzRpwmWzPCCauU9N_kH0nuG3U1P9p98ZiprFmKuwJzAmw7Y872W8xmvQW2Iv64dZ6W4TAKCMu0ynWckSAFXG0mDg2GaTEZl8CRVCDOUhwackkl3mC52G31WirT-CKeJWESwrwQsWfPSS130T9x0lLNhViCL6fQTXxVEE4GlC4Csj0_-sTjHHUzJ9LivQMngPUYqkVzhlPg4-rlk1J_GWd9ptyUCh7Tw6GB_jDxDKzMqSd-4KeOw8BTTDkgPVaX6x_H8j2L_JBbgwUT9Mpoq9sdilm43t9Qf2RIdqgYu9lc0bslxb33_KI5wW-gCxpQ65dogSHJdYavMaePHgurteFzU4EyZbqC5LJgZw0zdfVNiyT948xIVTQByffsgHGUZ_lkb3b_qlTUCkQ5xDwe637mVy7" class="img_ev3q">]]></content>
        <author>
            <name>frank</name>
        </author>
        <category label="code snippet" term="code snippet"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Dotfiles Guide]]></title>
        <id>https://liviaerxin.github.io/blog/dotfiles-guide</id>
        <link href="https://liviaerxin.github.io/blog/dotfiles-guide"/>
        <updated>2023-06-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Dotfiles Guide]]></summary>
        <content type="html"><![CDATA[<p><a href="http://dotfiles.github.io/tutorials/" target="_blank" rel="noopener noreferrer">Tutorials - dotfiles.github.io</a></p><p><a href="https://www.webpro.nl/articles/getting-started-with-dotfiles" target="_blank" rel="noopener noreferrer">Getting started with dotfilesFrontend Ramblings RSS feedThe content of this website on GitHubMy Mastodon profileMy Twitter profileShare this article on TwitterShare this article on Hacker News</a></p>]]></content>
        <author>
            <name>frank</name>
        </author>
        <category label="dotfiles" term="dotfiles"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Python Package Management]]></title>
        <id>https://liviaerxin.github.io/blog/python-package-management</id>
        <link href="https://liviaerxin.github.io/blog/python-package-management"/>
        <updated>2023-06-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Python Package Management]]></summary>
        <content type="html"><![CDATA[<p>Foam includes note templates!
This allows you to easily create notes that have similar structure without having to use copy/paste :)</p><p>Templates support the <a href="https://code.visualstudio.com/docs/editor/userdefinedsnippets#_snippet-syntax" target="_blank" rel="noopener noreferrer">VS Code's Snippet Syntax</a>, which means you can:</p><ul><li>add variables to the newly created note</li><li>add tabstop to automatically navigate to the key parts of the note, just like a form
Below you can see an example showing a todo list and a timestamp.</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="todo-list">Todo List<a href="#todo-list" class="hash-link" aria-label="Direct link to Todo List" title="Direct link to Todo List">​</a></h2><ol><li>First tabstop</li><li>A second tabstop</li><li>A third tabstop</li></ol><p>Note Created: 2023-06-26</p><hr><p>Try out the above example by running the <code>Foam: Create New Note From Template</code> command and selecting the <code>your-first-template</code> template. Notice what happens when your new note is created!</p><p>To remove this template, simply delete the <code>.foam/templates/your-first-template.md</code> file.</p><p>Enjoy!</p>]]></content>
        <author>
            <name>frank</name>
        </author>
        <category label="blog" term="blog"/>
        <category label="docusaurus" term="docusaurus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki PowerShell]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-powershell</id>
        <link href="https://liviaerxin.github.io/blog/wiki-powershell"/>
        <updated>2023-06-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Learn PowerShell]]></summary>
        <content type="html"><![CDATA[<p>Set environment variables permanently</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token namespace" style="opacity:0.7">[Environment]</span><span class="token plain">::SetEnvironmentVariable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"VCPKG_ROOT"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Whatever you need it to be"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Machine"</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Get environment variables</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Get all variables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token namespace" style="opacity:0.7">[Environment]</span><span class="token plain">::GetEnvironmentVariable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Get specific variable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token namespace" style="opacity:0.7">[Environment]</span><span class="token plain">::GetEnvironmentVariable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"VCPKG_ROOT"</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>frank</name>
        </author>
        <category label="powershell" term="powershell"/>
        <category label="learn" term="learn"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Learn CMake]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-cmake</id>
        <link href="https://liviaerxin.github.io/blog/wiki-cmake"/>
        <updated>2023-06-25T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Learn CMake]]></summary>
        <content type="html"><![CDATA[<p>In brief, <strong>CMake</strong> is all about <strong>targets</strong> and <strong>properties</strong></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cmake-project-structure">CMake Project Structure<a href="#cmake-project-structure" class="hash-link" aria-label="Direct link to CMake Project Structure" title="Direct link to CMake Project Structure">​</a></h2><p>A typical <strong>CMake</strong> project can be regarded to has three <code>Tree</code>:</p><p><strong>Source Tree</strong>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">project_root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── CMakeLists.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── simple_example.cpp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── simple_lib.cpp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── simple_lib.hpp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Build Tree</strong>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">project_root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── CMakeLists.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── simple_example.cpp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── simple_lib.cpp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── simple_lib.hpp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── CMakeCache.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Install Tree</strong>:</p><p>This tree is located in the <code>CMAKE_INSTALL_PREFIX</code>, of which default value is platform-dependent. By default, it is set to <code>/usr/local</code> on Unix-like systems (Linux, macOS) and <code>C:/Program Files/&lt;Project Name&gt;</code> on Windows..</p><p>To change it, you can pass <code>-DCMAKE_INSTALL_PREFIX</code> argument during CMake <code>configuration</code> step, like this:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmake </span><span class="token parameter variable" style="color:#36acaa">-B</span><span class="token plain"> build </span><span class="token parameter variable" style="color:#36acaa">-S</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-DCMAKE_INSTALL_PREFIX</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/my/custom/installation/path</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Alternatively, you can change it by passing <code>--prefix</code>(it can be relative path) argument during CMake <code>install</code> step, like this:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmake </span><span class="token parameter variable" style="color:#36acaa">--install</span><span class="token plain"> build </span><span class="token parameter variable" style="color:#36acaa">--prefix</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/my/custom/installation/path"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It's recommended to use a default install layout as <code>GNUInstallDirs</code>.</p><p>A <strong>install tree</strong> will look like as below if you'd like all things to be installed inside the project via <code>cmake --install build --prefix "./install</code>.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">project_root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── CMakeLists.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── simple_example.cpp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── simple_lib.cpp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── simple_lib.hpp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── CMakeCache.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │   └── executables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── sbin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │   └── sysadmin executables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │   ├── compiled libraries </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">*.so </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">unix</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> or *.dll </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">windows</span><span class="token punctuation" style="color:#393A34">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │   └── library archive files </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">*.lib </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">windows</span><span class="token punctuation" style="color:#393A34">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── libexec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │   └── executables not directly invoked by user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │   └── header files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── doc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       └── documentation</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-cmake-works">How CMake Works<a href="#how-cmake-works" class="hash-link" aria-label="Direct link to How CMake Works" title="Direct link to How CMake Works">​</a></h2><p>A typical workflow of CMake includes <code>Configure</code>, <code>Build</code> and <code>Install</code> steps, combined with the above mentioned <code>Trees</code> concepts.</p><ol><li><code>Configure</code> step will generate a sort of configuration files, the most important ones among them are <code>CMakeCache.txt</code>, <code>cmake_install.cmake</code> and <code>Makefile</code> if using <code>Make</code> as building system. With these generated configuration files, the later steps <code>Build</code> and <code>Install</code> will run according to them.</li><li><code>Build</code> step will generate the build binary directory.</li><li><code>Install</code> step will generate the install binary directory.</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-to-make-your-package-be-found-by-others-by-find_package">How to make your package be found by others by <code>find_package()</code><a href="#how-to-make-your-package-be-found-by-others-by-find_package" class="hash-link" aria-label="Direct link to how-to-make-your-package-be-found-by-others-by-find_package" title="Direct link to how-to-make-your-package-be-found-by-others-by-find_package">​</a></h2><p>package configuration files: <code>find_package</code></p><p><a href="https://cmake.org/cmake/help/latest/guide/importing-exporting/index.html#importing-targets" target="_blank" rel="noopener noreferrer">Title</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="rpath-in-cmake">RPATH in CMake<a href="#rpath-in-cmake" class="hash-link" aria-label="Direct link to RPATH in CMake" title="Direct link to RPATH in CMake">​</a></h2><p><sup id="fnref-rpath-5b4334"><a href="#fn-rpath-5b4334" class="footnote-ref">rpath</a></sup></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cmake-variables">CMake Variables<a href="#cmake-variables" class="hash-link" aria-label="Direct link to CMake Variables" title="Direct link to CMake Variables">​</a></h2><p>There are some useful and important CMake variables that will be introduced here:</p><p><code>CMAKE_PREFIX_PATH</code></p><p><code>CMAKE_IGNORE_PATH</code></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="clang-faq"><code>clang</code> FAQ<a href="#clang-faq" class="hash-link" aria-label="Direct link to clang-faq" title="Direct link to clang-faq">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="find-out-clang-include-search-path">Find out <code>clang</code> include search path<a href="#find-out-clang-include-search-path" class="hash-link" aria-label="Direct link to find-out-clang-include-search-path" title="Direct link to find-out-clang-include-search-path">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ clang </span><span class="token parameter variable" style="color:#36acaa">-x</span><span class="token plain"> c </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-E</span><span class="token plain"> /dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#include "..." search starts here:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#include &lt;...&gt; search starts here:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /opt/homebrew/Cellar/llvm/17.0.1/lib/clang/17/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /Library/Developer/CommandLineTools/SDKs/MacOSX14.sdk/usr/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /Library/Developer/CommandLineTools/SDKs/MacOSX14.sdk/System/Library/Frameworks </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">framework directory</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">End of search list.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 1 "/dev/null"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 1 "&lt;built-in&gt;" 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 1 "&lt;built-in&gt;" 3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 420 "&lt;built-in&gt;" 3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 1 "&lt;command line&gt;" 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 1 "&lt;built-in&gt;" 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 1 "/dev/null" 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="add-include-search-path-to-clang">Add include search path to <code>clang</code><a href="#add-include-search-path-to-clang" class="hash-link" aria-label="Direct link to add-include-search-path-to-clang" title="Direct link to add-include-search-path-to-clang">​</a></h3><p>Use environment variables <code>C_INCLUDE_PATH</code> for <code>c</code> and <code>CPLUS_INCLUDE_PATH</code> for <code>c++</code>.</p><p><code>clang</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ </span><span class="token assign-left variable" style="color:#36acaa">C_INCLUDE_PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/opt/homebrew/include clang </span><span class="token parameter variable" style="color:#36acaa">-x</span><span class="token plain"> c </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-E</span><span class="token plain"> /dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#include "..." search starts here:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#include &lt;...&gt; search starts here:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /usr/local/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /opt/homebrew/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /Library/Developer/CommandLineTools/usr/lib/clang/15.0.0/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /Library/Developer/CommandLineTools/usr/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/System/Library/Frameworks </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">framework directory</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>clang++</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ </span><span class="token assign-left variable" style="color:#36acaa">CPLUS_INCLUDE_PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/opt/homebrew/include clang </span><span class="token parameter variable" style="color:#36acaa">-x</span><span class="token plain"> c++ </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-E</span><span class="token plain"> /dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#include "..." search starts here:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#include &lt;...&gt; search starts here:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /usr/local/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /opt/homebrew/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /Library/Developer/CommandLineTools/usr/lib/clang/15.0.0/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /Library/Developer/CommandLineTools/usr/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/System/Library/Frameworks </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">framework directory</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Use <code>-I</code> flag,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ clang </span><span class="token parameter variable" style="color:#36acaa">-x</span><span class="token plain"> c -I/opt/homebrew/include </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-E</span><span class="token plain"> /dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#include "..." search starts here:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#include &lt;...&gt; search starts here:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /opt/homebrew/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /usr/local/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /Library/Developer/CommandLineTools/usr/lib/clang/15.0.0/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /Library/Developer/CommandLineTools/usr/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/System/Library/Frameworks </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">framework directory</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="find-out-clang-library-search-paths">Find out <code>clang</code> library search paths<a href="#find-out-clang-library-search-paths" class="hash-link" aria-label="Direct link to find-out-clang-library-search-paths" title="Direct link to find-out-clang-library-search-paths">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ clang </span><span class="token parameter variable" style="color:#36acaa">-Xlinker</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Library search paths:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /usr/local/lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Framework search paths:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ld: Undefined symbols:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  _main, referenced from:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">initial-undefines</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clang: error: linker </span><span class="token builtin class-name">command</span><span class="token plain"> failed with </span><span class="token builtin class-name">exit</span><span class="token plain"> code </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">use </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> to see invocation</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="add-library-search-path-to-clang">Add library search path to <code>clang</code><a href="#add-library-search-path-to-clang" class="hash-link" aria-label="Direct link to add-library-search-path-to-clang" title="Direct link to add-library-search-path-to-clang">​</a></h3><p>Use environment variables <code>LIBRARY_PATH</code>,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ </span><span class="token assign-left variable" style="color:#36acaa">LIBRARY_PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$LIBRARY_PATH</span><span class="token plain">:/usr/lib clang </span><span class="token parameter variable" style="color:#36acaa">-Xlinker</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Library search paths:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /usr/lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /usr/local/lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Framework search paths:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ld: Undefined symbols:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  _main, referenced from:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">initial-undefines</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clang: error: linker </span><span class="token builtin class-name">command</span><span class="token plain"> failed with </span><span class="token builtin class-name">exit</span><span class="token plain"> code </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">use </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> to see invocation</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Use <code>-L</code> flag:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ clang -L/opt/homebrew/lib </span><span class="token parameter variable" style="color:#36acaa">-Xlinker</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://langui.sh/2015/07/24/osx-clang-include-lib-search-paths/" target="_blank" rel="noopener noreferrer">https://langui.sh/2015/07/24/osx-clang-include-lib-search-paths/</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-is-the-difference-clang--clang--stdc11">What is the difference? clang++ | clang -std=c++11<a href="#what-is-the-difference-clang--clang--stdc11" class="hash-link" aria-label="Direct link to What is the difference? clang++ | clang -std=c++11" title="Direct link to What is the difference? clang++ | clang -std=c++11">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cmake-faq">CMake FAQ<a href="#cmake-faq" class="hash-link" aria-label="Direct link to CMake FAQ" title="Direct link to CMake FAQ">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="add-library-search-path-to-cmake-globally-in-project">Add library search path to <code>CMake</code> globally in project<a href="#add-library-search-path-to-cmake-globally-in-project" class="hash-link" aria-label="Direct link to add-library-search-path-to-cmake-globally-in-project" title="Direct link to add-library-search-path-to-cmake-globally-in-project">​</a></h3><ol><li><code>set(CMAKE_LIBRARY_PATH ${CMAKE_LIBRARY_PATH} /opt/local/lib)</code></li><li><code>LINK_DIRECTORIES(/opt/local/lib)</code></li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2><p><a href="https://enccs.github.io/cmake-workshop/" target="_blank" rel="noopener noreferrer">CMake hands-on workshop — CMake Workshop</a>
<sup id="fnref-rpath-5b4334"><a href="#fn-rpath-5b4334" class="footnote-ref">rpath</a></sup>: <a href="https://gitlab.kitware.com/cmake/community/-/wikis/doc/cmake/RPATH-handling" target="_blank" rel="noopener noreferrer">RPATH handling from official cmake</a></p>]]></content>
        <author>
            <name>frank</name>
        </author>
        <category label="cmake" term="cmake"/>
        <category label="wiki" term="wiki"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wiki vcpkg]]></title>
        <id>https://liviaerxin.github.io/blog/wiki-vcpkg</id>
        <link href="https://liviaerxin.github.io/blog/wiki-vcpkg"/>
        <updated>2023-06-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[learn vcpkg]]></summary>
        <content type="html"><![CDATA[<p><code>vcpkg</code> is cross-platform <strong>C/C++ package manager</strong>, and its peers include <code>conan</code>.</p><p>The most common type of package is a C/C++ library consisting of headers, source code, and binaries.</p><p>Some useful folders in <code>VCPKG_ROOT=/path/to/vcpkg</code> in <code>vcpkg</code>:</p><p>How <code>vcpkg</code> install <code>fmt</code> library when calling <code>vcpkg install fmt</code> in classic mode?</p><ol><li>Download the source code <code>fmt.tar.gz</code> into <code>%VCPKG_ROOT%/downloads/</code> directory.</li><li><strong>build tree</strong> -&gt; <code>%VCPKG_ROOT%/buildtrees</code>:<ol><li>Put the source code under <code>%VCPKG_ROOT%/buildtrees/fmt/src/xxxx-xxxx.clean/</code> directory.</li><li>Create building directory: <code>%VCPKG_ROOT%/buildtrees/fmt/arm64-osx-dynamic-rel/</code>(<code>triplet</code>+<code>release/debug</code>) and then start building</li></ol></li><li><strong>package tree</strong> -&gt; <code>%VCPKG_ROOT%/package</code>:<ol><li>Package <code>fmt</code> built library like <code>fmt.dylib</code>, its <code>header</code> files and <code>binaries</code>(tools) in <strong>build tree</strong> into <code>%VCPKG_ROOT%/packages/fmt_arm64-osx-dynamic/</code></li></ol></li><li><strong>install tree</strong> -&gt; <code>%VCPKG_ROOT%/installed</code>:<ol><li>Install <code>fmt</code>'s <code>libs</code>, <code>headers</code> and <code>tools</code> in <strong>package tree</strong> into <code>%VCPKG_ROOT%/installed/arm64-osx-dynamic/lib</code>, <code>%VCPKG_ROOT%/installed/arm64-osx-dynamic/include</code> and <code>%VCPKG_ROOT%/installed/arm64-osx-dynamic/tools</code> respectively.</li></ol></li></ol><p>As it outlines, <code>vcpkg</code> builds each package separately in <strong>build tree</strong> and <strong>package tree</strong> stages and finally in <strong>install tree</strong> stage <code>reduce</code> all packages into the central set in <code>%VCPKG_ROOT%/installed/arm64-osx-dynamic/</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="classic-mode">Classic mode<a href="#classic-mode" class="hash-link" aria-label="Direct link to Classic mode" title="Direct link to Classic mode">​</a></h2><p>Official saying: In Classic mode, vcpkg maintains a central <strong>installed tree</strong> inside the vcpkg instance built up by individual <code>vcpkg install</code> and <code>vcpkg remove</code> commands. This central set of packages can then be shared by any number of projects.</p><p>All packages are installed in a common <code>%VCPKG_ROOT%/installed</code> directory.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="classic-mode-how-to">Classic mode how-to<a href="#classic-mode-how-to" class="hash-link" aria-label="Direct link to Classic mode how-to" title="Direct link to Classic mode how-to">​</a></h3><p>Just run <code>vcpkg install %package%</code> to use <strong>classic mode</strong> as the package will be installed into <code>%VCPKG_ROOT%/installed/</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="manifest-mode">Manifest mode<a href="#manifest-mode" class="hash-link" aria-label="Direct link to Manifest mode" title="Direct link to Manifest mode">​</a></h2><p>Official saying: In Manifest mode, vcpkg creates separate <strong>installed trees</strong> for each project and configuration. This allows separate projects to use different versions of libraries. The <code>vcpkg.json</code> file and optional <code>vcpkg-configuration.json</code> file form a project's manifest. The manifest declares the project's direct dependencies, version constraints, and registries used.</p><p>All packages are installed in their own <code>${project}/vcpkg_installed</code> directory inside the <code>${project}</code> directory.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="manifest-mode-how-to">Manifest mode how-to<a href="#manifest-mode-how-to" class="hash-link" aria-label="Direct link to Manifest mode how-to" title="Direct link to Manifest mode how-to">​</a></h3><p>Create <code>vcpkg.json</code> in the project, then run <code>vcpkg install</code> to use <strong>manifest mode</strong> as all the packages declared in <code>vcpkg.json</code> will be installed into <code>${project}/vcpkg_installed/</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="useful-environment-variables-for-development">Useful environment variables for development<a href="#useful-environment-variables-for-development" class="hash-link" aria-label="Direct link to Useful environment variables for development" title="Direct link to Useful environment variables for development">​</a></h2><p><code>CURRENT_INSTALLED_DIR</code>
<code>CURRENT_PACKAGES_DIR</code></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VCPKG_RELEASE_LIBDIR </span><span class="token string" style="color:#e3116c">"</span><span class="token string variable" style="color:#36acaa">${CURRENT_INSTALLED_DIR}</span><span class="token string" style="color:#e3116c">/lib"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VCPKG_DEBUG_LIBDIR </span><span class="token string" style="color:#e3116c">"</span><span class="token string variable" style="color:#36acaa">${CURRENT_INSTALLED_DIR}</span><span class="token string" style="color:#e3116c">/debug/lib"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VCPKG_TOOLS_DIR </span><span class="token string" style="color:#e3116c">"</span><span class="token string variable" style="color:#36acaa">${CURRENT_INSTALLED_DIR}</span><span class="token string" style="color:#e3116c">/tools"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VCPKG_SHARE_DIR </span><span class="token string" style="color:#e3116c">"</span><span class="token string variable" style="color:#36acaa">${CURRENT_INSTALLED_DIR}</span><span class="token string" style="color:#e3116c">/share"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VCPKG_INCLUDE_DIR </span><span class="token string" style="color:#e3116c">"</span><span class="token string variable" style="color:#36acaa">${CURRENT_INSTALLED_DIR}</span><span class="token string" style="color:#e3116c">/include"</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tips-and-tricks">Tips and Tricks<a href="#tips-and-tricks" class="hash-link" aria-label="Direct link to Tips and Tricks" title="Direct link to Tips and Tricks">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-to-specify-a-compiler-fof-vcpkg-install">How to specify a compiler fof <code>vcpkg install</code>?<a href="#how-to-specify-a-compiler-fof-vcpkg-install" class="hash-link" aria-label="Direct link to how-to-specify-a-compiler-fof-vcpkg-install" title="Direct link to how-to-specify-a-compiler-fof-vcpkg-install">​</a></h3><p>As <code>vcpkg</code> just use <code>cmake</code> toolchain to do install, how to set a specific compile is <code>cmake</code> things.</p><p>A fast way is use <code>CC</code> and <code>CXX</code> environment variables.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">CC</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">gcc-4.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">CXX</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/usr/bin/g++-4.2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See more ways at <a href="https://stackoverflow.com/questions/45933732/how-to-specify-a-compiler-in-cmake" target="_blank" rel="noopener noreferrer">iar - How to specify a compiler in CMake? - Stack Overflow</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="install--osx-dynamic">Install <code>*-osx-dynamic</code><a href="#install--osx-dynamic" class="hash-link" aria-label="Direct link to install--osx-dynamic" title="Direct link to install--osx-dynamic">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">vcpkg</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> libpq --host-triplet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm64-osx-dynamic </span><span class="token parameter variable" style="color:#36acaa">--triplet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm64-osx-dynamic</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="reinstall-packages-without-caching">Reinstall packages without caching<a href="#reinstall-packages-without-caching" class="hash-link" aria-label="Direct link to Reinstall packages without caching" title="Direct link to Reinstall packages without caching">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">vcpkg</span><span class="token plain"> remove icu --host-triplet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm64-osx-dynamic </span><span class="token parameter variable" style="color:#36acaa">--triplet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm64-osx-dynamic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">vcpkg</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> icu --host-triplet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm64-osx-dynamic </span><span class="token parameter variable" style="color:#36acaa">--triplet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm64-osx-dynamic --no-binarycaching</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">vcpkg</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> libpq --host-triplet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm64-osx-dynamic </span><span class="token parameter variable" style="color:#36acaa">--triplet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm64-osx-dynamic </span><span class="token parameter variable" style="color:#36acaa">--binarysource</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">clear</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">vcpkg</span><span class="token plain"> remove libpq --host-triplet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm64-osx-dynamic </span><span class="token parameter variable" style="color:#36acaa">--triplet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm64-osx-dynamic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">vcpkg</span><span class="token plain"> remove </span><span class="token string" style="color:#e3116c">"qtbase[gui,widgets]"</span><span class="token plain"> --host-triplet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm64-osx-dynamic </span><span class="token parameter variable" style="color:#36acaa">--triplet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm64-osx-dynamic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">vcpkg</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"qtbase[gui,widgets]"</span><span class="token plain"> --host-triplet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm64-osx-dynamic </span><span class="token parameter variable" style="color:#36acaa">--triplet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm64-osx-dynamic --no-binarycaching</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">vcpkg</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"qtbase[gui,widgets]"</span><span class="token plain"> --host-triplet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm64-osx-dynamic </span><span class="token parameter variable" style="color:#36acaa">--triplet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm64-osx-dynamic </span><span class="token parameter variable" style="color:#36acaa">--binarysource</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">clear</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="clean-up-all-packages">Clean up all packages<a href="#clean-up-all-packages" class="hash-link" aria-label="Direct link to Clean up all packages" title="Direct link to Clean up all packages">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-rf</span><span class="token plain"> /opt/vcpkg/installed/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-rf</span><span class="token plain"> /opt/vcpkg/packages/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-rf</span><span class="token plain"> /opt/vcpkg/buildtrees/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="clean-up-all-caching-packages">Clean up all caching packages<a href="#clean-up-all-caching-packages" class="hash-link" aria-label="Direct link to Clean up all caching packages" title="Direct link to Clean up all caching packages">​</a></h3><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-rf</span><span class="token plain"> ~/.cache/vcpkg/archives/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="install_rpath_use_link_path-different-behaviours-in-manifest-mode-and-classic-mode"><code>INSTALL_RPATH_USE_LINK_PATH</code> different behaviours in <strong>manifest mode</strong> and <strong>classic mode</strong><a href="#install_rpath_use_link_path-different-behaviours-in-manifest-mode-and-classic-mode" class="hash-link" aria-label="Direct link to install_rpath_use_link_path-different-behaviours-in-manifest-mode-and-classic-mode" title="Direct link to install_rpath_use_link_path-different-behaviours-in-manifest-mode-and-classic-mode">​</a></h3><p><code>INSTALL_RPATH_USE_LINK_PATH</code> will not work properly when being used in the <strong>manifest mode</strong>, because <code>CMake</code> will don't handle libraries located in <code>buildtree</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">set_target_properties</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">${PROJECT_NAME}</span><span class="token plain"> PROPERTIES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    INSTALL_RPATH </span><span class="token string" style="color:#e3116c">"@executable_path/../Frameworks"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    INSTALL_RPATH_USE_LINK_PATH ON</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After <code>${PROJECT_NAME}</code> installed, in the <strong>manifest mode</strong>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ otoolll /Users/frankchen/Documents/vcpkg-qt-app/install/./helloworld.app/Contents/MacOS/helloworld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cmd LC_RPATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cmdsize </span><span class="token number" style="color:#36acaa">48</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         path @executable_path/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/Frameworks </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">offset </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After <code>${PROJECT_NAME}</code> installed, in the <strong>classic mode</strong>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ otoolll /Users/frankchen/Documents/vcpkg-qt-app/install/./helloworld.app/Contents/MacOS/helloworld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cmd LC_RPATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cmdsize </span><span class="token number" style="color:#36acaa">56</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         path /opt/vcpkg/installed/arm64-osx-dynamic/lib </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">offset </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Load </span><span class="token builtin class-name">command</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">27</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cmd LC_FUNCTION_STARTS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cmd LC_RPATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cmdsize </span><span class="token number" style="color:#36acaa">48</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         path @executable_path/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/Frameworks </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">offset </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>[wiki-cmake.mdx#RPATH in CMake]<!-- -->(/blog/wiki-cmake#RPATH in CMake)</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2><p>TODO: Fix qtbase tools/config in release/debug osx  </p><p><a href="https://github.com/microsoft/vcpkg/tree/master/ports/qtbase" target="_blank" rel="noopener noreferrer">https://github.com/microsoft/vcpkg/tree/master/ports/qtbase</a></p><p><a href="https://learn.microsoft.com/en-us/vcpkg/maintainers/functions/vcpkg_cmake_config_fixup" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/en-us/vcpkg/maintainers/functions/vcpkg_cmake_config_fixup</a></p>]]></content>
        <author>
            <name>frank</name>
        </author>
        <category label="wiki" term="wiki"/>
        <category label="vcpkg" term="vcpkg"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[FastAPI Best Practices]]></title>
        <id>https://liviaerxin.github.io/blog/fastapi-best-practices</id>
        <link href="https://liviaerxin.github.io/blog/fastapi-best-practices"/>
        <updated>2023-06-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Lock Endpoint Request At A Time]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="limit-only-one-access-to-endpoint-at-a-time">Limit Only One Access to Endpoint at a Time<a href="#limit-only-one-access-to-endpoint-at-a-time" class="hash-link" aria-label="Direct link to Limit Only One Access to Endpoint at a Time" title="Direct link to Limit Only One Access to Endpoint at a Time">​</a></h2><p>Limit only one access to an endpoint at a time with <code>asyncio.Lock</code> in <code>asyncio</code> in <strong>FastAPI</strong>.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">../code-snippets/app_request_lock.py</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># main.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> fastapi </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> FastAPI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> asyncio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> FastAPI</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lock </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> asyncio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Lock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">counter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@app</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/limit"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">global</span><span class="token plain"> counter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> lock</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Hello"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        counter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> counter </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> asyncio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"bye"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> asyncio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"counter"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> counter</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Make 2 requests at a time, output from server:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">INFO:     127.0.0.1:60228 - "POST /limit HTTP/1.1" 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">bye</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">INFO:     127.0.0.1:51010 - "POST /limit HTTP/1.1" 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">bye</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">INFO:     127.0.0.1:51022 - "POST /limit HTTP/1.1" 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Request 1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">❯ curl -X 'POST' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  'http://127.0.0.1:8000/limit' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  -H 'accept: application/json' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  -d ''</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">{"counter":1}%</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Request 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">❯ curl -X 'POST' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  'http://127.0.0.1:8000/limit' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  -H 'accept: application/json' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  -d ''</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">{"counter":2}%</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>NOTE: The <code>asyncio.Lock</code> only take effect in the <code>asyncio</code> loop level, if using <code>unicorn</code> to run server in multiple processes, it can not lock the request! </p></blockquote><p>No limitation.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">../code-snippets/app_request_nolock.py</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># main.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> fastapi </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> FastAPI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> asyncio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> FastAPI</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lock </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> asyncio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Lock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">counter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@app</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/limit"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">global</span><span class="token plain"> counter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Hello"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    counter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> counter </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> asyncio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"bye"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> asyncio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"counter"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> counter</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Make 2 requests at a time, output from server:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">bye</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">bye</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">INFO:     127.0.0.1:45160 - "POST /limit HTTP/1.1" 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">INFO:     127.0.0.1:45172 - "POST /limit HTTP/1.1" 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Request 1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">❯ curl -X 'POST' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  'http://127.0.0.1:8000/limit' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  -H 'accept: application/json' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  -d ''</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">{"counter":2}%</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Request 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">❯ curl -X 'POST' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  'http://127.0.0.1:8000/limit' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  -H 'accept: application/json' \</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  -d ''</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">{"counter":2}%</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Limit only one access to an endpoint at a time with <code>thread.Lock</code></p><p>Limit only one access to an endpoint at a time with <code>process.Lock</code></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="attach-a-background-service-into-the-application">Attach A Background Service Into the Application<a href="#attach-a-background-service-into-the-application" class="hash-link" aria-label="Direct link to Attach A Background Service Into the Application" title="Direct link to Attach A Background Service Into the Application">​</a></h2><p>Run a background service behind the FastAPI server:</p><ul><li>share the same <code>asyncio</code> main loop with the server</li><li>the service start when the server starts and stop when the server stops</li><li>it should be light-weight and non-CPU heavy workload</li></ul><p><a href="https://docs.python.org/3/library/asyncio-task.html#asyncio.Task.cancel" target="_blank" rel="noopener noreferrer">Coroutines and Tasks — Python 3.11.4 documentation</a>
<a href="https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.loop.create_task" target="_blank" rel="noopener noreferrer">Event Loop — Python 3.11.4 documentation</a></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">../code-snippets/app_background_service.py</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> fastapi </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> FastAPI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> asyncio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> FastAPI</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">BackgroundService</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> loop</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> asyncio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AbstractEventLoop</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tasks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">loop </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">running </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">work</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"Start background service"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"Run background service..."</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Sleep for 1 second</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> asyncio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">loop</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_task</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">work</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">stop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cancel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> asyncio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CancelledError</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Clean up background service"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> BackgroundService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">asyncio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_running_loop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@app</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">on_event</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"startup"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">startup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"PID[</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">os</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">getpid</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">] app startup"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># schedule a task on main loop</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@app</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">on_event</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"shutdown"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">shutdown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># close ProcessPoolExecutor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"PID[</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">os</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">getpid</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">] app shutdown"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@app</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hello</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"value"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f"hello world [</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">service</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">task</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">done</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">] [</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">service</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">task</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">get_name</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">]"</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>frank</name>
        </author>
        <category label="fastapi" term="fastapi"/>
        <category label="python" term="python"/>
        <category label="http" term="http"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Communication Between Docker Containers]]></title>
        <id>https://liviaerxin.github.io/blog/docker-containers-communication</id>
        <link href="https://liviaerxin.github.io/blog/docker-containers-communication"/>
        <updated>2023-06-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Communication Between Docker Containers]]></summary>
        <content type="html"><![CDATA[<p>Sometimes between docker containers, we need connect container B from container A to do fast test, etc. For most well-known example, we have <code>FastAPI</code> app container connect to <code>postgres</code> db container. In addition, it's likely to do some sql test on <code>PostgreSQL</code> db container in a third container.</p><p>Here some methods we can use.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using---link-flaglegacy">Using <code>--link</code> flag(Legacy)<a href="#using---link-flaglegacy" class="hash-link" aria-label="Direct link to using---link-flaglegacy" title="Direct link to using---link-flaglegacy">​</a></h2><p>Start a <code>postgres db</code> container:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--name</span><span class="token plain"> postgres-db </span><span class="token parameter variable" style="color:#36acaa">--detach</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">POSTGRES_PASSWORD</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mysecretpassword postgres</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Run a <code>postgres client</code> container to connect the <code>db</code> container with user <code>postgres</code> and password <code>mysecretpassword</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--link</span><span class="token plain"> postgres-db:db postgres psql </span><span class="token parameter variable" style="color:#36acaa">-h</span><span class="token plain"> db </span><span class="token parameter variable" style="color:#36acaa">-U</span><span class="token plain"> postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">psql </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">14.3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type </span><span class="token string" style="color:#e3116c">"help"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> help.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">postgres</span><span class="token operator" style="color:#393A34">=</span><span class="token comment" style="color:#999988;font-style:italic"># SELECT 1;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ?column? </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> row</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or run a utility container:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--link</span><span class="token plain"> postgres-db:db busybox </span><span class="token function" style="color:#d73a49">sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># in `busybox`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ping</span><span class="token plain"> db</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-default-bridge-network">Using Default Bridge Network<a href="#using-default-bridge-network" class="hash-link" aria-label="Direct link to Using Default Bridge Network" title="Direct link to Using Default Bridge Network">​</a></h2><p>If you are running your container without specifying attached <code>network</code>, it will use the docker <code>default bridge network</code>.</p><p>However The <code>default bridge network</code> allows container-to-container communication by <code>IP address</code> only. To use <code>hostname</code> or <code>alias name</code> in connecting rather than IP address, see the following methods.</p><blockquote><p>So before connecting, we need get the container IP address by <code>docker inspect</code>.</p></blockquote><p>Start a <code>postgres db</code> container:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--name</span><span class="token plain"> postgres-db </span><span class="token parameter variable" style="color:#36acaa">--detach</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">POSTGRES_PASSWORD</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mysecretpassword postgres</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Get the IP address of the <code>postgres db</code> container:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> inspect mynginx </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> IPAddress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">"IPAddress"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"172.17.0.2"</span><span class="token plain">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Run a <code>postgres client</code> container to connect the <code>db</code> container:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> postgres psql </span><span class="token parameter variable" style="color:#36acaa">-h</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"172.17.0.2"</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-U</span><span class="token plain"> postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">psql </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">14.3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type </span><span class="token string" style="color:#e3116c">"help"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> help.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">postgres</span><span class="token operator" style="color:#393A34">=</span><span class="token comment" style="color:#999988;font-style:italic"># SELECT 1;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ?column? </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> row</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-private-defined-bridge-network">Using Private Defined Bridge Network<a href="#using-private-defined-bridge-network" class="hash-link" aria-label="Direct link to Using Private Defined Bridge Network" title="Direct link to Using Private Defined Bridge Network">​</a></h2><p>The <code>private defined bridge network</code> will give you more privacy that it only allows only containers belonging to it can talk to each other.</p><p>Moreover, you can use <code>hostname</code> or <code>alias name</code> to connect without regard of <code>IP address</code> changing due to re-start.</p><p>Create a <code>private bridge network</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> network create postgres-net</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Start a <code>postgres db</code> container:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--net</span><span class="token plain"> postgres-net </span><span class="token parameter variable" style="color:#36acaa">--name</span><span class="token plain"> postgres-db </span><span class="token parameter variable" style="color:#36acaa">--detach</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">POSTGRES_PASSWORD</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mysecretpassword postgres</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Run a <code>postgres client</code> container to connect the <code>db</code> container:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-it</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--net</span><span class="token plain"> postgres-net postgres psql </span><span class="token parameter variable" style="color:#36acaa">-h</span><span class="token plain"> postgres-db </span><span class="token parameter variable" style="color:#36acaa">-U</span><span class="token plain"> postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">psql </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">14.3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type </span><span class="token string" style="color:#e3116c">"help"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> help.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">postgres</span><span class="token operator" style="color:#393A34">=</span><span class="token comment" style="color:#999988;font-style:italic"># SELECT 1;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ?column? </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> row</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="use-case-in-docker-compose">Use Case in Docker Compose<a href="#use-case-in-docker-compose" class="hash-link" aria-label="Direct link to Use Case in Docker Compose" title="Direct link to Use Case in Docker Compose">​</a></h2><p>Actually, <code>docker compose</code> will create its <code>private bridge network</code>, and when it start containers, containers will be attached to that network in default.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docker-compose-postgres.yml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Use below credentials to access in `adminer` web to access `db`,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># server:   db  (db1, db2 are also available!)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># user:     postgres</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># password: example </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'3.1'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">db</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># POSTGRES_USER: postgres  # `postgres` in default.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">POSTGRES_PASSWORD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">default</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">aliases</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> db1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> db2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">adminer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> adminer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 8080</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="docker" term="docker"/>
        <category label="docker-network" term="docker-network"/>
        <category label="postgres" term="postgres"/>
        <category label="dev-ops" term="dev-ops"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Inspect Shared Library]]></title>
        <id>https://liviaerxin.github.io/blog/inspect-shared-library</id>
        <link href="https://liviaerxin.github.io/blog/inspect-shared-library"/>
        <updated>2023-06-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Test Dynamic Library]]></summary>
        <content type="html"><![CDATA[<p>Concepts:</p><ul><li>Show shared libraries dependencies(detect what shared libraries an executable or a another shared libraries depend on)</li><li>Check/Test dependent shared libraries loaded successfully</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-ldd-command">Using <code>ldd</code> Command<a href="#using-ldd-command" class="hash-link" aria-label="Direct link to using-ldd-command" title="Direct link to using-ldd-command">​</a></h2><p>Available in Linux:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ldd /usr/bin/vim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    linux-vdso.so.1 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0x00007ffc75fb1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    libgtk-3.so.0 </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/libgtk-3.so.0 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0x00007fa4dcb5e000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    libgdk-3.so.0 </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/libgdk-3.so.0 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0x00007fa4dca64000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    libXau.so.6 </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/libXau.so.6 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0x00007fa4db7a9000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    liblzma.so.5 </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/liblzma.so.5 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0x00007fa4db63f000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    liblz4.so.1 </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/liblz4.so.1 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0x00007fa4db61d000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    libgcrypt.so.20 </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/libgcrypt.so.20 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0x00007fa4db4ff000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    libgpg-error.so.0 </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /usr/lib/libgpg-error.so.0 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0x00007fa4db4d8000</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-objdump-command">Using <code>objdump</code> Command<a href="#using-objdump-command" class="hash-link" aria-label="Direct link to using-objdump-command" title="Direct link to using-objdump-command">​</a></h2><p>Available in Linux:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">objdump </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> /usr/bin/vim </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'NEEDED'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NEEDED               libpython3.7m.so.1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NEEDED               libcrypt.so.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NEEDED               libpthread.so.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NEEDED               libdl.so.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NEEDED               libutil.so.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NEEDED               libm.so.6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NEEDED               libselinux.so.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NEEDED               libtinfo.so.6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NEEDED               libacl.so.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NEEDED               libgpm.so.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NEEDED               libc.so.6</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-readelf-command">Using <code>readelf</code> Command<a href="#using-readelf-command" class="hash-link" aria-label="Direct link to using-readelf-command" title="Direct link to using-readelf-command">​</a></h2><p>Available in Linux:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">readelf </span><span class="token parameter variable" style="color:#36acaa">--dynamic</span><span class="token plain"> /usr/bin/vim </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> NEEDED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 0x0000000000000001 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEEDED</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">             Shared library: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">libpython3.7m.so.1.0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 0x0000000000000001 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEEDED</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">             Shared library: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">libcrypt.so.2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 0x0000000000000001 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEEDED</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">             Shared library: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">libpthread.so.0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 0x0000000000000001 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEEDED</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">             Shared library: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">libdl.so.2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 0x0000000000000001 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEEDED</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">             Shared library: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">libutil.so.1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 0x0000000000000001 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEEDED</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">             Shared library: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">libm.so.6</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 0x0000000000000001 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEEDED</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">             Shared library: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">libselinux.so.1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 0x0000000000000001 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEEDED</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">             Shared library: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">libtinfo.so.6</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 0x0000000000000001 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEEDED</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">             Shared library: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">libacl.so.1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 0x0000000000000001 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEEDED</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">             Shared library: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">libgpm.so.2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 0x0000000000000001 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEEDED</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">             Shared library: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">libc.so.6</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-otool-command">Using <code>otool</code> Command<a href="#using-otool-command" class="hash-link" aria-label="Direct link to using-otool-command" title="Direct link to using-otool-command">​</a></h2><p>Available in OSX:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">otool </span><span class="token parameter variable" style="color:#36acaa">-L</span><span class="token plain"> libOpenCvSharpExtern.dylib</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="reading-the-procpidmaps-file">Reading the <code>/proc/&lt;pid&gt;/maps</code> File<a href="#reading-the-procpidmaps-file" class="hash-link" aria-label="Direct link to reading-the-procpidmaps-file" title="Direct link to reading-the-procpidmaps-file">​</a></h2><p>Available in Linux:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /proc/179015/maps </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7f2cb67c3000-7f2cb67c6000 r--p 00000000 08:13 </span><span class="token number" style="color:#36acaa">3810274</span><span class="token plain">                    /usr/lib/libnss_files-2.31.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7f2cb67c6000-7f2cb67cd000 r-xp 00003000 08:13 </span><span class="token number" style="color:#36acaa">3810274</span><span class="token plain">                    /usr/lib/libnss_files-2.31.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7f2cb6a89000-7f2cb6a8a000 r--p 00002000 08:13 </span><span class="token number" style="color:#36acaa">3810903</span><span class="token plain">                    /usr/lib/libutil-2.31.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7f2cb6a8a000-7f2cb6a8b000 r--p 00002000 08:13 </span><span class="token number" style="color:#36acaa">3810903</span><span class="token plain">                    /usr/lib/libutil-2.31.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7f2cb9802000-7f2cb9803000 rw-p 00000000 00:00 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7ffe77658000-7ffe7767a000 rw-p 00000000 00:00 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">                          </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">stack</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7ffe776c8000-7ffe776cc000 r--p 00000000 00:00 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">                          </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">vvar</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7ffe776cc000-7ffe776ce000 r-xp 00000000 00:00 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">                          </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">vdso</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffffffffff600000-ffffffffff601000 </span><span class="token parameter variable" style="color:#36acaa">--xp</span><span class="token plain"> 00000000 00:00 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">vsyscall</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">awk</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'$NF!~/\.so/{next} {$0=$NF} !a[$0]++'</span><span class="token plain"> /proc/179015/maps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/lib/libpython3.8.so.1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/lib/libgpg-error.so.0.29.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/lib/libgcrypt.so.20.2.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/lib/liblz4.so.1.9.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/lib/liblzma.so.5.2.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/lib/libsystemd.so.0.28.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/lib/libogg.so.0.8.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/lib/libvorbis.so.0.4.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/lib/libblkid.so.1.1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/lib/libXdmcp.so.6.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/lib/libXau.so.6.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/lib/libdatrie.so.1.3.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-vmmap-command">Using <code>vmmap</code> Command<a href="#using-vmmap-command" class="hash-link" aria-label="Direct link to using-vmmap-command" title="Direct link to using-vmmap-command">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-ctypes-in-python">Using <code>ctypes</code> in Python<a href="#using-ctypes-in-python" class="hash-link" aria-label="Direct link to using-ctypes-in-python" title="Direct link to using-ctypes-in-python">​</a></h2><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> ctypes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cdll</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">LoadLibrary</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"libOpenCvSharpExtern.so"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ctypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CDLL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"libOpenCvSharpExtern.so"</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">dlopen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DYLD_PRINT_LIBRARIES</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> dlopen_test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">opt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">vcpkg</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">installed</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">arm64</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">osx</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">dynamic</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">lib</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">libpng16</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dylib</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">objdump </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> /usr/local/lib/libOpenCvSharpExtern.so</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-nm">Using <code>nm</code><a href="#using-nm" class="hash-link" aria-label="Direct link to using-nm" title="Direct link to using-nm">​</a></h3><p>Show list of symbols:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ nm </span><span class="token parameter variable" style="color:#36acaa">-g</span><span class="token plain"> /opt/vcpkg/installed/arm64-osx-dynamic/lib/libintl.8.dylib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 U _CFArrayGetCount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 U _CFArrayGetValueAtIndex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 U _CFGetTypeID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 U _CFLocaleCopyPreferredLanguages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 U _CFPreferencesCopyAppValue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 U _CFRelease</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 U _CFStringGetCString</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 U _CFStringGetTypeID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 U __DefaultRuneLocale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 U ___CFConstantStringClassReference</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-dumpbin">Using <code>dumpbin</code><a href="#using-dumpbin" class="hash-link" aria-label="Direct link to using-dumpbin" title="Direct link to using-dumpbin">​</a></h3><p>Available in Windows</p><p>Show dependent dynamic libraries(<code>DLL</code>):</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dumpbin </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">dependents your_dll_file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dll</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-microsoftpowershell">Using <code>Microsoft.PowerShell</code><a href="#using-microsoftpowershell" class="hash-link" aria-label="Direct link to using-microsoftpowershell" title="Direct link to using-microsoftpowershell">​</a></h3><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Get-Command</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"C:\Path\To\Thing.dll"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">FileVersionInfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Get-Item</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"C:\Windows\System32\nvcuda.dll"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VersionInfo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="useful-environment-variables">Useful Environment Variables<a href="#useful-environment-variables" class="hash-link" aria-label="Direct link to Useful Environment Variables" title="Direct link to Useful Environment Variables">​</a></h2><p>OSX:</p><ul><li><code>DYLD_LIBRARY_PATH</code></li><li><code>DYLD_PRINT_LIBRARIES</code></li><li><code>DYLD_PRINT_STATISTICS</code></li></ul><p>Linux:</p><ul><li><code>LD_LIBRARY_PATH</code></li><li><code>LD_DEBUG=libs</code></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p><a href="https://learn.microsoft.com/en-us/cpp/build/reference/c-cpp-build-tools" target="_blank" rel="noopener noreferrer">Additional MSVC Build Tools</a></p><p><a href="https://www.baeldung.com/linux/show-shared-libraries-executables" target="_blank" rel="noopener noreferrer">How to Show All Shared Libraries Used by Executables in Linux</a></p>]]></content>
        <author>
            <name>Frank Chen</name>
            <uri>https://github.com/liviaerxin</uri>
        </author>
        <category label="debug" term="debug"/>
        <category label="shared library" term="shared library"/>
        <category label="osx" term="osx"/>
        <category label="windows" term="windows"/>
        <category label="linux" term="linux"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[WiFi AutoSwitch Windows]]></title>
        <id>https://liviaerxin.github.io/blog/wifi-autoswitch-windows</id>
        <link href="https://liviaerxin.github.io/blog/wifi-autoswitch-windows"/>
        <updated>2023-06-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[WiFi AutoSwitch Windows]]></summary>
        <content type="html"><![CDATA[<p>If <strong>autoSwitch</strong> is turned on, it allows Windows to continue looking for other auto-connected wireless networks while connected to the current wireless network. If a higher priority auto-connected wireless network than the currently connected wireless network comes in range, Windows will automatically connect to it instead.</p><p>It also needs to work along with <code>priority</code> setting.</p><p>For example:</p><p>There're 3 networks of profile name: <code>TP-Link-1</code>, <code>TP-Link-2</code> and <code>TP-Link-3</code>. PC(windows) will try to connect <code>TP-Link-3</code> if it's in range when it's already connected to <code>TP-Link-1</code> or <code>TP-Link-2</code>.</p><ol><li>Setup <code>autoswitch</code>:</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">netsh wlan </span><span class="token builtin class-name">set</span><span class="token plain"> profileparameter </span><span class="token assign-left variable" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"TP-Link-1"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">autoswitch</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">netsh wlan </span><span class="token builtin class-name">set</span><span class="token plain"> profileparameter </span><span class="token assign-left variable" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"TP-Link-2"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">autoswitch</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">netsh wlan </span><span class="token builtin class-name">set</span><span class="token plain"> profileparameter </span><span class="token assign-left variable" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"TP-Link-3"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">autoswitch</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">No</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Setup <code>priority</code>:</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">netsh wlan </span><span class="token builtin class-name">set</span><span class="token plain"> profileorder </span><span class="token assign-left variable" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"TP-Link-1"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">interface</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"Wi-Fi"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">priority</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">netsh wlan </span><span class="token builtin class-name">set</span><span class="token plain"> profileorder </span><span class="token assign-left variable" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"TP-Link-2"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">interface</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"Wi-Fi"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">priority</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">netsh wlan </span><span class="token builtin class-name">set</span><span class="token plain"> profileorder </span><span class="token assign-left variable" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"TP-Link-3"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">interface</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"Wi-Fi"</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">priority</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>other tools:</p><p>List profile name:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">netsh wlan show profiles</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>List connected WiFi:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">netsh wlan show interfaces</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://winaero.com/enable-auto-switch-for-wireless-network-connection-in-windows-10/" target="_blank" rel="noopener noreferrer">Enable Auto Switch for Wireless Network Connection in Windows 10</a></p><p><a href="https://winaero.com/change-wifi-network-priority-in-windows-10/" target="_blank" rel="noopener noreferrer">Change WiFi network priority in Windows 10</a></p>]]></content>
        <author>
            <name>frank</name>
        </author>
        <category label="autoswitch" term="autoswitch"/>
        <category label="wifi" term="wifi"/>
        <category label="windows" term="windows"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello from Docusaurus]]></title>
        <id>https://liviaerxin.github.io/blog/doc-with-tags</id>
        <link href="https://liviaerxin.github.io/blog/doc-with-tags"/>
        <updated>2023-05-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Create a doc page with rich content.]]></summary>
        <content type="html"><![CDATA[<p>Are you ready to create the documentation site for your open source project?</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="headers">Headers<a href="#headers" class="hash-link" aria-label="Direct link to Headers" title="Direct link to Headers">​</a></h2><p>will show up on the table of contents on the upper right</p><p>So that your users will know what this page is all about without scrolling down or even without reading too much.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="only-h2-and-h3-will-be-in-the-toc-by-default">Only h2 and h3 will be in the TOC by default.<a href="#only-h2-and-h3-will-be-in-the-toc-by-default" class="hash-link" aria-label="Direct link to Only h2 and h3 will be in the TOC by default." title="Direct link to Only h2 and h3 will be in the TOC by default.">​</a></h2><p>You can configure the TOC heading levels either per-document or in the theme configuration.</p><p>The headers are well-spaced so that the hierarchy is clear.</p><ul><li>lists will help you</li><li>present the key points</li><li>that you want your users to remember<ul><li>and you may nest them<ul><li>multiple times</li></ul></li></ul></li></ul>]]></content>
        <author>
            <name>custom author name</name>
        </author>
        <category label="Demo" term="Demo"/>
        <category label="Getting started" term="Getting started"/>
    </entry>
</feed>